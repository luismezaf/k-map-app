import{E as wn,F as rs,G as ci,H as cd,I as di,J as dd,c as _t,i as et,e as Kt,l as Fl,d as hd,a as k,h as X,b as Dt,g as Pt,m as $s,r as H,v as yt,_ as qt,K as Xn,D as ft,k as dn,p as Xt,x as zt,w as ke,o as Nl,L as fd,M as va,N as xi,O as xn,P as xe,Q as ut,R as wt,q as P,S as Y,T as O,U as ze,V as Qt,W as rn,u as w,t as C,X as St,Y as A,Z as Jn,$ as md,a0 as eo,a1 as pd,a2 as ga,a3 as yn,a4 as vd,s as R,a5 as V,a6 as at,a7 as tn,a8 as qe,a9 as Ue,aa as gd,ab as _d,ac as qo,ad as Jt,ae as zn,A as Cs,af as il,ag as ln,j as yd,ah as Os,ai as qs,aj as Is,ak as vi,al as yi,am as Zl,an as Rs,ao as Hl,z as Vl,ap as Vn,aq as Dn,ar as ue,as as Ze,at as bd,au as Io,av as wd,aw as al,ax as xd,ay as Pd,az as Ul,aA as kd,aB as jl,aC as hn,aD as be,aE as Ge,aF as At,aG as Yn,aH as Ke,aI as $n,aJ as to,aK as Fs,aL as Cd,aM as Sd,aN as Td,aO as ct,aP as Wl,aQ as Ns,aR as Yl,aS as Gl,aT as Kl,aU as Ql,y as Zs,aV as Xl,aW as Oo,aX as Ld,aY as Md,aZ as Ss,a_ as vo,a$ as Xi,b0 as Ad,b1 as Bd,b2 as Jl,b3 as Ed,b4 as eu,b5 as zd,b6 as gi,b7 as Dd,b8 as $d,b9 as sl,ba as Od,bb as tu,bc as qd,bd as nu,be as Id,bf as Rd,bg as Fd,bh as Nd,bi as na,bj as Zd,bk as ou,bl as Hs,bm as Hd,bn as ls,bo as rl,bp as Vd,bq as Ud,br as jd,bs as Wd}from"./index.dbf76095.js";import{Q as _a,u as Pn,a as Yd,b as Ht}from"./QForm.36f05080.js";import{u as Gn,a as Tt,b as un,c as Gd,d as ya,e as nn,f as go,g as Kd,h as Qd,i as Xd,j as Jd}from"./user.hook.8e71458c.js";import{_ as Vs,a as oa,Q as eh}from"./plugin-vue_export-helper.b5e96e53.js";import th from"./ErrorNotFound.1cc3a5cd.js";function nh(t,o){return o.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return i[r]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var oh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ts(t){return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ts(t)}function Ct(t){wn(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||Ts(t)==="object"&&o==="[object Date]"?new Date(t.getTime()):typeof t=="number"||o==="[object Number]"?new Date(t):((typeof t=="string"||o==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ll(t){var o=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return o.setUTCFullYear(t.getFullYear()),t.getTime()-o.getTime()}function Ji(t,o){wn(2,arguments);var i=Ct(t),r=Ct(o),s=i.getTime()-r.getTime();return s<0?-1:s>0?1:s}function ih(t,o){wn(2,arguments);var i=Ct(t),r=Ct(o),s=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return s*12+l}function ah(t,o){return wn(2,arguments),Ct(t).getTime()-Ct(o).getTime()}var ul={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(o){return o<0?Math.ceil(o):Math.floor(o)}},sh="trunc";function rh(t){return t?ul[t]:ul[sh]}function lh(t){wn(1,arguments);var o=Ct(t);return o.setHours(23,59,59,999),o}function uh(t){wn(1,arguments);var o=Ct(t),i=o.getMonth();return o.setFullYear(o.getFullYear(),i+1,0),o.setHours(23,59,59,999),o}function ch(t){wn(1,arguments);var o=Ct(t);return lh(o).getTime()===uh(o).getTime()}function dh(t,o){wn(2,arguments);var i=Ct(t),r=Ct(o),s=Ji(i,r),l=Math.abs(ih(i,r)),u;if(l<1)u=0;else{i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*l);var d=Ji(i,r)===-s;ch(Ct(t))&&l===1&&Ji(t,r)===1&&(d=!1),u=s*(l-Number(d))}return u===0?0:u}function hh(t,o,i){wn(2,arguments);var r=ah(t,o)/1e3;return rh(i==null?void 0:i.roundingMethod)(r)}var fh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mh=function(o,i,r){var s,l=fh[o];return typeof l=="string"?s=l:i===1?s=l.one:s=l.other.replace("{{count}}",i.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s},ph=mh,vh={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_h={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yh={date:rs({formats:vh,defaultWidth:"full"}),time:rs({formats:gh,defaultWidth:"full"}),dateTime:rs({formats:_h,defaultWidth:"full"})},bh=yh,wh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xh=function(o,i,r,s){return wh[o]},Ph=xh,kh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ch={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Th={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ah=function(o,i){var r=Number(o),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Bh={ordinalNumber:Ah,era:ci({values:kh,defaultWidth:"wide"}),quarter:ci({values:Ch,defaultWidth:"wide",argumentCallback:function(o){return o-1}}),month:ci({values:Sh,defaultWidth:"wide"}),day:ci({values:Th,defaultWidth:"wide"}),dayPeriod:ci({values:Lh,defaultWidth:"wide",formattingValues:Mh,defaultFormattingWidth:"wide"})},Eh=Bh,zh=/^(\d+)(th|st|nd|rd)?/i,Dh=/\d+/i,$h={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Oh={any:[/^b/i,/^(a|c)/i]},qh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ih={any:[/1/i,/2/i,/3/i,/4/i]},Rh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Uh={ordinalNumber:cd({matchPattern:zh,parsePattern:Dh,valueCallback:function(o){return parseInt(o,10)}}),era:di({matchPatterns:$h,defaultMatchWidth:"wide",parsePatterns:Oh,defaultParseWidth:"any"}),quarter:di({matchPatterns:qh,defaultMatchWidth:"wide",parsePatterns:Ih,defaultParseWidth:"any",valueCallback:function(o){return o+1}}),month:di({matchPatterns:Rh,defaultMatchWidth:"wide",parsePatterns:Fh,defaultParseWidth:"any"}),day:di({matchPatterns:Nh,defaultMatchWidth:"wide",parsePatterns:Zh,defaultParseWidth:"any"}),dayPeriod:di({matchPatterns:Hh,defaultMatchWidth:"any",parsePatterns:Vh,defaultParseWidth:"any"})},jh=Uh,Wh={code:"en-US",formatDistance:ph,formatLong:bh,formatRelative:Ph,localize:Eh,match:jh,options:{weekStartsOn:0,firstWeekContainsDate:1}},Yh=Wh;function iu(t,o){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}function Gh(t){return iu({},t)}var cl=1440,Kh=2520,us=43200,Qh=86400;function ia(t,o,i){var r,s;wn(2,arguments);var l=dd(),u=(r=(s=i==null?void 0:i.locale)!==null&&s!==void 0?s:l.locale)!==null&&r!==void 0?r:Yh;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var d=Ji(t,o);if(isNaN(d))throw new RangeError("Invalid time value");var h=iu(Gh(i),{addSuffix:Boolean(i==null?void 0:i.addSuffix),comparison:d}),f,m;d>0?(f=Ct(o),m=Ct(t)):(f=Ct(t),m=Ct(o));var v=hh(m,f),g=(ll(m)-ll(f))/1e3,_=Math.round((v-g)/60),S;if(_<2)return i!=null&&i.includeSeconds?v<5?u.formatDistance("lessThanXSeconds",5,h):v<10?u.formatDistance("lessThanXSeconds",10,h):v<20?u.formatDistance("lessThanXSeconds",20,h):v<40?u.formatDistance("halfAMinute",0,h):v<60?u.formatDistance("lessThanXMinutes",1,h):u.formatDistance("xMinutes",1,h):_===0?u.formatDistance("lessThanXMinutes",1,h):u.formatDistance("xMinutes",_,h);if(_<45)return u.formatDistance("xMinutes",_,h);if(_<90)return u.formatDistance("aboutXHours",1,h);if(_<cl){var M=Math.round(_/60);return u.formatDistance("aboutXHours",M,h)}else{if(_<Kh)return u.formatDistance("xDays",1,h);if(_<us){var q=Math.round(_/cl);return u.formatDistance("xDays",q,h)}else if(_<Qh)return S=Math.round(_/us),u.formatDistance("aboutXMonths",S,h)}if(S=dh(m,f),S<12){var F=Math.round(_/us);return u.formatDistance("xMonths",F,h)}else{var ee=S%12,B=Math.floor(S/12);return ee<3?u.formatDistance("aboutXYears",B,h):ee<9?u.formatDistance("overXYears",B,h):u.formatDistance("almostXYears",B+1,h)}}var Xh=_t({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:o}){const{proxy:{$q:i}}=Pt(),r=et(Fl,Kt);if(r===Kt)return console.error("QPage needs to be a deep child of QLayout"),Kt;if(et(hd,Kt)===Kt)return console.error("QPage needs to be child of QPageContainer"),Kt;const l=k(()=>{const d=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof t.styleFn=="function"){const h=r.isContainer.value===!0?r.containerHeight.value:i.screen.height;return t.styleFn(d,h)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-d+"px":i.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":i.screen.height-d+"px"}}),u=k(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>X("main",{class:u.value,style:l.value},Dt(o.default))}});const Jh=["top","middle","bottom"];var Nt=_t({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>Jh.includes(t)}},setup(t,{slots:o}){const i=k(()=>t.align!==void 0?{verticalAlign:t.align}:null),r=k(()=>{const s=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(s!==void 0?` text-${s}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>X("div",{class:r.value,style:i.value,role:"status","aria-label":t.label},$s(o.default,t.label!==void 0?[t.label]:[]))}});const au=(t,o=100)=>{let i;const r=function(...s){const l=this;i&&clearTimeout(i),i=setTimeout(()=>{t.apply(l,s),i=null},o)};return r.cancel=function(){i&&clearTimeout(i)},r},su=function(t){for(const o of Object.values(t))o&&fo(o.cancel)&&o.cancel()},ef=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),fo=t=>typeof t=="function",On=(t,o,i)=>{for(const r in i){const s="set"+ef(r);t[s]?ke(()=>i[r],(l,u)=>{t[s](l,u)}):o[s]&&ke(()=>i[r],l=>{o[s](l)})}},on=(t,o,i={})=>{const r={...i};for(const s in t){const l=o[s],u=t[s];l&&(l&&l.custom===!0||u!==void 0&&(r[s]=u))}return r},qn=t=>{const o={};for(const i in t)if(i.startsWith("on")&&!i.startsWith("onUpdate")&&i!=="onReady"){const r=i.slice(2).toLocaleLowerCase();o[r]=t[i]}return o},tf=async t=>{const o=await Promise.all([qt(()=>import("./marker-icon-2x.17982e67.js"),[]),qt(()=>import("./marker-icon.c1a4cbf5.js"),[]),qt(()=>import("./marker-shadow.91c47cf3.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},Ui=t=>{const o=H(()=>console.warn(`Method ${t} has been invoked without being replaced`)),i=(...r)=>o.value(...r);return i.wrapped=o,Xt(t,i),i},ji=(t,o)=>t.wrapped.value=o,cn=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,In="useGlobalLeaflet",ba={options:{type:Object,default:()=>({}),custom:!0}},wa=t=>({options:t.options,methods:{}}),Zo={...ba,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},xa=(t,o,i)=>{const r=et("addLayer"),s=et("removeLayer"),{options:l,methods:u}=wa(t),d=on(t,Zo,l),h=()=>r({leafletObject:o.value}),f=()=>s({leafletObject:o.value}),m={...u,setAttribution(v){f(),o.value.options.attribution=v,t.visible&&h()},setName(){f(),t.visible&&h()},setLayerType(){f(),t.visible&&h()},setVisible(v){o.value&&(v?h():f())},bindPopup({leafletObject:v}){if(!o.value||!fo(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(v)},bindTooltip({leafletObject:v}){if(!o.value||!fo(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(v)},unbindTooltip(){o.value&&(fo(o.value.closeTooltip)&&o.value.closeTooltip(),fo(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(fo(o.value.closePopup)&&o.value.closePopup(),fo(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(v){i.emit("update:visible",v)}};return Xt("bindPopup",m.bindPopup),Xt("bindTooltip",m.bindTooltip),Xt("unbindTooltip",m.unbindTooltip),Xt("unbindPopup",m.unbindPopup),Nl(()=>{m.unbindPopup(),m.unbindTooltip(),f()}),{options:d,methods:m}},Pa=(t,o)=>{if(t&&o.default)return X("div",{style:{display:"none"}},o.default())},ru={...Zo,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},nf=(t,o,i)=>{const{options:r,methods:s}=xa(t,o,i);return{options:on(t,ru,r),methods:s}},Us={...ru,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},lu=(t,o,i)=>{const{options:r,methods:s}=nf(t,o,i),l=on(t,Us,r),u=et("removeLayer"),d={...s,setStroke(h){o.value.setStyle({stroke:h})},setColor(h){o.value.setStyle({color:h})},setWeight(h){o.value.setStyle({weight:h})},setOpacity(h){o.value.setStyle({opacity:h})},setLineCap(h){o.value.setStyle({lineCap:h})},setLineJoin(h){o.value.setStyle({lineJoin:h})},setDashArray(h){o.value.setStyle({dashArray:h})},setDashOffset(h){o.value.setStyle({dashOffset:h})},setFill(h){o.value.setStyle({fill:h})},setFillColor(h){o.value.setStyle({fillColor:h})},setFillOpacity(h){o.value.setStyle({fillOpacity:h})},setFillRule(h){o.value.setStyle({fillRule:h})},setClassName(h){o.value.setStyle({className:h})}};return zt(()=>{u({leafletObject:o.value})}),{options:l,methods:d}},js={...Us,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},of=(t,o,i)=>{const{options:r,methods:s}=lu(t,o,i),l=on(t,js,r),u={...s,setRadius(d){o.value.setRadius(d)},setLatLng(d){o.value.setLatLng(d)}};return{options:l,methods:u}};({...js});const af={name:"LCircleMarker",props:js,setup(t,o){const i=H({}),r=H(!1),s=et(In),l=et("addLayer"),{options:u,methods:d}=of(t,i,o);return yt(async()=>{const{circleMarker:h,DomEvent:f}=s?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);i.value=Xn(h(t.latLng,u));const m=qn(o.attrs);f.on(i.value,m),On(d,i.value,t),l({...t,...d,leafletObject:i.value}),r.value=!0,ft(()=>o.emit("ready",i.value))}),{ready:r,leafletObject:i}},render(){return Pa(this.ready,this.$slots)}},sf=af,Ws={...Zo},rf=(t,o,i)=>{const{options:r,methods:s}=xa(t,o,i),l=on(t,Ws,r),u={...s,addLayer(d){o.value.addLayer(d.leafletObject)},removeLayer(d){o.value.removeLayer(d.leafletObject)}};return Xt("addLayer",u.addLayer),Xt("removeLayer",u.removeLayer),{options:l,methods:u}};({...Ws});const uu={...Ws,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:[Object,Function],custom:!0}},lf=(t,o,i)=>{const{options:r,methods:s}=rf(t,o,i),l=on(t,uu,r);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(l.style=t.optionsStyle);const u={...s,setGeojson(d){o.value.clearLayers(),o.value.addData(d)},setOptionsStyle(d){o.value.setStyle(d)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}};return{options:l,methods:u}},uf={props:uu,setup(t,o){const i=H({}),r=H(!1),s=et(In),l=et("addLayer"),{methods:u,options:d}=lf(t,i,o);return yt(async()=>{const{geoJSON:h,DomEvent:f}=s?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);i.value=Xn(h(t.geojson,d));const m=qn(o.attrs);f.on(i.value,m),On(u,i.value,t),l({...t,...u,leafletObject:i.value}),r.value=!0,ft(()=>o.emit("ready",i.value))}),{ready:r,leafletObject:i}},render(){return Pa(this.ready,this.$slots)}},cf=uf,Ys={...Zo,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:Number},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number}},cu=(t,o,i)=>{const{options:r,methods:s}=xa(t,o,i);return{options:on(t,Ys,r),methods:{...s}}};({...Ys});const dl={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},df={name:"LIcon",props:{...dl,...ba},setup(t,o){const i=H(null),r=et(In),s=et("canSetParentHtml"),l=et("setParentHtml"),u=et("setIcon");let d,h,f,m,v;const g=(q,F,ee)=>{const B=q&&q.innerHTML;if(!F){ee&&v&&s()&&l(B);return}const z=qn(o.attrs);v&&h(v,z);const{options:D}=wa(t),U=on(t,dl,D);B&&(U.html=B),v=U.html?f(U):m(U),d(v,z),u(v)},_=()=>{ft(()=>g(i.value,!0,!1))},S=()=>{ft(()=>g(i.value,!1,!0))},M={setIconUrl:_,setIconRetinaUrl:_,setIconSize:_,setIconAnchor:_,setPopupAnchor:_,setTooltipAnchor:_,setShadowUrl:_,setShadowRetinaUrl:_,setShadowAnchor:_,setBgPos:_,setClassName:_,setHtml:_};return yt(async()=>{const{DomEvent:q,divIcon:F,icon:ee}=r?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);d=q.on,h=q.off,f=F,m=ee,On(M,{},t),new MutationObserver(S).observe(i.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),_()}),{root:i}},render(){const t=this.$slots.default?this.$slots.default():void 0;return X("div",{ref:"root"},t)}},hl=df;({...Zo});const fl={...ba,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:Array},paddingTopLeft:{type:Array},padding:{type:Array},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},hf={emits:["ready","update:zoom","update:center","update:bounds"],props:fl,setup(t,o){const i=H(null),r=dn({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:s}=wa(t),l=on(t,fl,s),u=Ui("addLayer"),d=Ui("removeLayer"),h=Ui("registerControl"),f=Ui("registerLayerControl");Xt(In,t.useGlobalLeaflet);const m={moveEndHandler:au(()=>{o.emit("update:zoom",r.leafletRef.getZoom()),o.emit("update:center",r.leafletRef.getCenter()),o.emit("update:bounds",r.leafletRef.getBounds())}),overlayAddHandler(_){const S=r.layersInControl.find(M=>M.name===_.name);S&&S.updateVisibleProp(!0)},overlayRemoveHandler(_){const S=r.layersInControl.find(M=>M.name===_.name);S&&S.updateVisibleProp(!1)}};yt(async()=>{t.useGlobalLeaflet&&(cn.L=cn.L||await qt(()=>Promise.resolve().then(function(){return vm}),void 0));const{map:_,CRS:S,Icon:M,latLngBounds:q,latLng:F,DomEvent:ee}=t.useGlobalLeaflet?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch(U){console.error(`The following error occurred running the provided beforeMapMount hook ${U.message}`)}await tf(M);const B=typeof l.crs=="string"?S[l.crs]:l.crs;l.crs=B||S.EPSG3857;const z={addLayer(U){U.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd.push(U):r.layersInControl.find(Z=>Z.leafletObject._leaflet_id===U.leafletObject._leaflet_id)||(r.layerControl.addLayer(U),r.layersInControl.push(U))),U.visible!==!1&&r.leafletRef.addLayer(U.leafletObject)},removeLayer(U){U.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd=r.layersToAdd.filter(Z=>Z.name!==U.name):(r.layerControl.removeLayer(U.leafletObject),r.layersInControl=r.layersInControl.filter(Z=>Z.leafletObject._leaflet_id!==U.leafletObject._leaflet_id))),r.leafletRef.removeLayer(U.leafletObject)},registerLayerControl(U){r.layerControl=U,r.layersToAdd.forEach(Z=>{r.layerControl.addLayer(Z)}),r.layersToAdd=[],h(U)},registerControl(U){r.leafletRef.addControl(U.leafletObject)},setZoom(U){const Z=r.leafletRef.getZoom();U!==Z&&r.leafletRef.setZoom(U,{animate:t.noBlockingAnimations?!1:null})},setPaddingBottomRight(U){r.paddingBottomRight=U},setPaddingTopLeft(U){r.paddingTopLeft=U},setPadding(U){r.padding=U},setCrs(U){const Z=r.leafletRef.getBounds();r.leafletRef.options.crs=U,r.leafletRef.fitBounds(Z,{animate:!1,padding:[0,0]})},fitBounds(U){r.leafletRef.fitBounds(U,{animate:this.noBlockingAnimations?!1:null})},setBounds(U){if(!U)return;const Z=q(U);!Z.isValid()||!(r.lastSetBounds||r.leafletRef.getBounds()).equals(Z,0)&&(r.lastSetBounds=Z,r.leafletRef.fitBounds(Z,this.fitBoundsOptions))},setCenter(U){if(U==null)return;const Z=F(U),$=r.lastSetCenter||r.leafletRef.getCenter();($.lat!==Z.lat||$.lng!==Z.lng)&&(r.lastSetCenter=Z,r.leafletRef.panTo(Z,{animate:this.noBlockingAnimations?!1:null}))}};ji(u,z.addLayer),ji(d,z.removeLayer),ji(h,z.registerControl),ji(f,z.registerLayerControl),r.leafletRef=Xn(_(i.value,l)),On(z,r.leafletRef,t);const D=qn(o.attrs);r.leafletRef.on("moveend",m.moveEndHandler),r.leafletRef.on("overlayadd",m.overlayAddHandler),r.leafletRef.on("overlayremove",m.overlayRemoveHandler),ee.on(r.leafletRef,D),r.ready=!0,ft(()=>o.emit("ready",r.leafletRef))}),zt(()=>{su(m),r.leafletRef&&(r.leafletRef.off(),r.leafletRef.remove())});const v=k(()=>r.leafletRef),g=k(()=>r.ready);return{root:i,ready:g,leafletObject:v}},render(){return X("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}},ff=hf,mf=["Symbol(Comment)","Symbol(Text)"],pf=["LTooltip","LPopup"],du={...Zo,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},vf=(t,o,i)=>{const{options:r,methods:s}=xa(t,o,i),l=on(t,du,r),u={...s,setDraggable(d){o.value.dragging&&(d?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(d){i.emit("update:latLng",d.latlng),i.emit("update:lat-lng",d.latlng)},setLatLng(d){if(d!=null&&o.value){const h=o.value.getLatLng();(!h||!h.equals(d))&&o.value.setLatLng(d)}}};return{options:l,methods:u}},gf=(t,o)=>{const i=o.slots.default&&o.slots.default();return i&&i.length&&i.some(_f)};function _f(t){return!(mf.includes(t.type.toString())||pf.includes(t.type.name))}const yf={name:"LMarker",props:du,setup(t,o){const i=H({}),r=H(!1),s=et(In),l=et("addLayer");Xt("canSetParentHtml",()=>!!i.value.getElement()),Xt("setParentHtml",f=>i.value.getElement().innerHTML=f),Xt("setIcon",f=>i.value.setIcon&&i.value.setIcon(f));const{options:u,methods:d}=vf(t,i,o),h={moveHandler:au(d.latLngSync)};return yt(async()=>{const{marker:f,DomEvent:m,divIcon:v}=s?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);gf(u,o)&&(u.icon=v({className:""})),i.value=Xn(f(t.latLng,u));const g=qn(o.attrs);m.on(i.value,g),i.value.on("move",h.moveHandler),On(d,i.value,t),l({...t,...d,leafletObject:i.value}),r.value=!0,ft(()=>o.emit("ready",i.value))}),zt(()=>su(h)),{ready:r,leafletObject:i}},render(){return Pa(this.ready,this.$slots)}},ml=yf,Gs={...Us,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},bf=(t,o,i)=>{const{options:r,methods:s}=lu(t,o,i),l=on(t,Gs,r),u={...s,setSmoothFactor(d){o.value.setStyle({smoothFactor:d})},setNoClip(d){o.value.setStyle({noClip:d})},addLatLng(d){o.value.addLatLng(d)}};return{options:l,methods:u}},wf={...Gs},xf={name:"LPolyline",props:Gs,setup(t,o){const i=H({}),r=H(!1),s=et(In),l=et("addLayer"),{options:u,methods:d}=bf(t,i,o);return yt(async()=>{const{polyline:h,DomEvent:f}=s?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);i.value=Xn(h(t.latLngs,u));const m=qn(o.attrs);f.on(i.value,m),On(d,i.value,t),l({...t,...d,leafletObject:i.value}),r.value=!0,ft(()=>o.emit("ready",i.value))}),{ready:r,leafletObject:i}},render(){return Pa(this.ready,this.$slots)}},Pf=xf,kf={...ba,content:{type:String,default:null}},Cf=(t,o)=>{const{options:i,methods:r}=wa(t),s={...r,setContent(l){o.value&&l!==null&&l!==void 0&&o.value.setContent(l)}};return{options:i,methods:s}},Sf=t=>t.default?X("div",{ref:"root"},t.default()):null;wf.latLngs.required=!1;const Ks={...Ys,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},Tf=(t,o,i)=>{const{options:r,methods:s}=cu(t,o,i),l=on(t,Ks,r),u={...s};return{options:l,methods:u}},Lf={props:Ks,setup(t,o){const i=H({}),r=et(In),s=et("addLayer"),{options:l,methods:u}=Tf(t,i,o);return yt(async()=>{const{tileLayer:d,DomEvent:h}=r?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);i.value=Xn(d(t.url,l));const f=qn(o.attrs);h.on(i.value,f),On(u,i.value,t),s({...t,...u,leafletObject:i.value}),ft(()=>o.emit("ready",i.value))}),{leafletObject:i}},render(){return null}},Mf=Lf,Af={...kf},Bf=(t,o)=>{const{options:i,methods:r}=Cf(t,o),s=et("unbindTooltip");return zt(()=>{s()}),{options:i,methods:r}},Ef={name:"LTooltip",props:Af,setup(t,o){const i=H({}),r=H(null),s=et(In),l=et("bindTooltip"),{options:u,methods:d}=Bf(t,i);return yt(async()=>{const{tooltip:h,DomEvent:f}=s?cn.L:await qt(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);i.value=Xn(h(u)),On(d,i.value,t);const m=qn(o.attrs);f.on(i.value,m),i.value.setContent(t.content||r.value),l({leafletObject:i.value}),ft(()=>o.emit("ready",i.value))}),{root:r,leafletObject:i}},render(){return Sf(this.$slots)}},zf=Ef;({...Ks});function Df({address:t}){var l,u;const o=new Date().toISOString(),i=hu(),r={...i.steps[0],createdAt:o,updatedAt:o,datetime:o,task:Gn(),data:null};return{id:Gn(),currentStatus:r,statusLogs:[r],contactAddress:t,isExpired:!1,createdAt:o,updatedAt:o,isActive:!0,subject:`Hacer una visita: ${t.description}`,description:`Visita a ${(l=t.contact)==null?void 0:l.fullName} en ${((u=t.coords)==null?void 0:u.address)||"--"}`,flow:i.id,users:["1"],salesPoints:[]}}function hu(){const t=new Date().toISOString();return{id:"1",createdAt:t,updatedAt:t,isActive:!0,name:"visit",label:"Visita",description:"Flujo de tarea para visitar a una persona",steps:[{name:"pending",type:"p",color:"orange",label:"Creado",transitions:[{form:{name:"status",title:"Complete las actividades requeridas",fields:[{name:"sayHello",props:{label:"Decir hola"},fieldType:"checkbox"},{name:"explain",props:{label:"Explicar el motivo de la vista"},fieldType:"checkbox"}],subtitle:"Relice las siguientes actividades y marque las casillas.",validations:["return data?.sayHello || data?.explain || 'Marque al menos una de las casillas para continuar'"]},name:"accepted",label:"Completar visita",throught:"form"},{form:{name:"reason",title:"Indique el motivo",fields:[{name:"reason",props:{type:"text",label:"Motivo",required:!0},choices:["La otra persona no se encuentra","La otra persona no quiere ser visitada","Otro"],fieldType:"select"},{name:"otherReason",when:"return data.reason === 'Otro'",props:{type:"textarea",label:"Indique el motivo",required:!0,autofocus:!0}}],subtitle:"Ingrese la raz\xF3n por la que no est\xE1 interesado"},name:"notaccepted",label:"Posponer visita",throught:"form"}]},{name:"accepted",type:"c",color:"green",label:"Aceptado",transitions:[{name:"pending",label:"Volcer a visitar",message:"\xBFEst\xE1s seguro de que quieres volver a visitar a esta persona?",throught:"confirm"}]},{name:"notaccepted",type:"c",color:"red",label:"No aceptado",transitions:[{name:"pending",label:"Visitar ahora",message:"\xBFEst\xE1 seguro de que desea visitar a esta persona en este momento?",throught:"confirm"}]}],adminRequired:!1,defaultTasksSubject:null,defaultTasksDescription:"{coords.address}"}}function $f(){const t=new Date().toISOString();return{id:"2",createdAt:t,updatedAt:t,isActive:!0,name:"wash",label:"Lavar platos",description:"Flujo de tarea para lavar los platos de la casa",steps:[{name:"pending",type:"p",color:"orange",label:"Pendiente de lavado",transitions:[{name:"washed",label:"Completar lavado",message:"\xBFEst\xE1s seguro de haber lavado los platos correctamente?",throught:"confirm"},{form:{name:"reason",title:"Indique el motivo",fields:[{name:"reason",props:{type:"textarea",label:"Ingrese el motivo por el que no quieres lavar los platos",required:!0}}],subtitle:"Ingrese el motivo por el que no quieres lavar los platos"},name:"later",label:"Dejar para m\xE1s tarde",throught:"form"}]},{name:"washed",type:"c",color:"green",label:"Lavado",transitions:[{name:"pending",label:"Usar platos"}]},{name:"later",type:"c",color:"red",label:"No aceptado",transitions:[{name:"pending",label:"Lavar\xE9 los platos ahora..."}]}],adminRequired:!1,defaultTasksSubject:null,defaultTasksDescription:"{coords.address}"}}function Qs(){return[hu(),$f()]}function Of(t,o){const i="https://nominatim.openstreetmap.org/search",r=H(t),s=H(""),l=H(null),u=H(!1);async function d(h){console.log("getCoordinatesFromAddress:",h);const f=h||r.value;if(h.length<=3||s.value===f)return;const m=new URLSearchParams({q:f,format:"json",limit:"5",addressdetails:"1"});u.value=!0;const v=await fetch(`${i}?${m.toString()}`);if(!v.ok)return u.value=!1,o!=null&&o.onError&&o.onError("Error fetching coordinates from OpenStreetMap"),{data:void 0,error:"Error fetching coordinates from OpenStreetMap"};const g=await v.json();return u.value=!1,l.value=g.map(_=>({id:_.place_id,latlng:[_.lat,_.lon],address:_.display_name,lastUpdate:"",raw:_.address,addressType:_.addresstype,bounds:[[_.boundingbox[0],_.boundingbox[2]],[_.boundingbox[1],_.boundingbox[3]]]})),s.value=f,o!=null&&o.onSuccess&&o.onSuccess(l.value),{data:l.value,error:void 0}}return{lastSearch:s,search:k({get:()=>r.value,set:h=>{d(h),r.value=h}}),setSearchText:h=>{r.value=h},data:k(()=>l.value),getCoordinatesFromAddress:d}}function qf(t){const o=new URL("https://nominatim.openstreetmap.org/reverse"),i=H(!1);async function r(s){const l=`${s[0]}`,u=`${s[1]}`;i.value=!0;const d=new URLSearchParams({format:"json",lat:l,lon:u,addressdetails:"1"});o.search=d.toString();const h=await fetch(o,{method:"GET"});if(!h.ok)return i.value=!1,console.error("Error fetching location from OpenStreetMap"),t!=null&&t.onError&&t.onError("Error fetching location from OpenStreetMap"),{data:void 0,error:"Error fetching location from OpenStreetMap"};const f=await h.json();i.value=!1;const m={id:f.place_id,latlng:[f.lat,f.lon],address:f.display_name,raw:f.address,addressType:f.addresstype,bounds:[[f.boundingbox[0],f.boundingbox[2]],[f.boundingbox[1],f.boundingbox[3]]]};return t!=null&&t.onSuccess&&t.onSuccess(m.address),{data:m,error:void 0}}return{getAddressFromCoordinates:r,isSearching:i}}const cs=H(!1);function no(){const t=va(),o=Tt(),{getLocalData:i}=Pn("addresses");async function r(){return new Promise(v=>{const g=i();setTimeout(v,2e3,g)})}const{data:s,isLoading:l,error:u,isError:d,refetch:h}=xi(["addresses"],r,{refetchOnWindowFocus:!1,staleTime:_a,onSuccess:()=>!cs.value&&(cs.value=!0),initialData:i(),initialDataUpdatedAt:0,enabled:k(()=>o.value.hasListAddressesPermission())}),f=k(()=>s.value||[]);function m(v){const g=t.getQueryData(["addresses"]);return(g==null?void 0:g.find(_=>_.id===v))||null}return{addresses:f,addressesHasFetchedOnce:cs,getAddressById:m,addressesError:k(()=>{var v,g;return(g=(v=u.value)==null?void 0:v.response)==null?void 0:g.data}),isGettingAddresses:l,isGettingAddressesError:d,refetchAddresses:h}}function If(){const t=un(["addresses"]),o=un(["tasks"]),i=un(["contacts"]),{getAddressFromCoordinates:r}=qf();async function s(f){var M,q,F,ee,B;const m=((M=f.coords)==null?void 0:M.latlng)||[-25.276744090960346,-57.63190731436439],v=await r(m),g=new Date().toISOString(),_={...f,coords:{latlng:m,address:((q=v.data)==null?void 0:q.address)||"Not found",formatedAddress:((F=v.data)==null?void 0:F.address)||"Not found",lastUpdate:g},contact:{...f.contact,fullName:`${(ee=f.contact)==null?void 0:ee.firstName} ${(B=f.contact)==null?void 0:B.lastName}`.trim(),createdAt:g,id:Gn(),isActive:!0,updatedAt:g},id:Gn()};t(_),i(_.contact);const S=Df({address:_});return o(S),await new Promise(z=>setTimeout(z,2e3,_))}const{mutate:l,isLoading:u,isError:d,error:h}=xn(s);return{createAddress:l,isCreatingAddress:k(()=>u.value),isCreatingAddressError:k(()=>d.value),createAddressError:k(()=>{var f,m;return(m=(f=h.value)==null?void 0:f.response)==null?void 0:m.data})}}const ds=H(!1);function _o(){const{getLocalData:t,setLocalData:o}=Pn("zones");va();const i=Tt();async function r(){return await new Promise(f=>setTimeout(f,2e3,t()))}const{data:s,isLoading:l,error:u,isError:d,refetch:h}=xi(["zones"],r,{refetchOnWindowFocus:!1,staleTime:_a,onSuccess:()=>!ds.value&&(ds.value=!0),initialData:t(),initialDataUpdatedAt:0,enabled:k(()=>i.value.hasListZonesPermission())});return{zones:k(()=>s.value||[]),zonesHasFetchedOnce:ds,zonesError:k(()=>{var f,m;return(m=(f=u.value)==null?void 0:f.response)==null?void 0:m.data}),isGettingZones:l,isGettingZonesError:d,refetchZones:h}}function Rf(){const t=Gd("zones");async function o(u){await new Promise(d=>setTimeout(d,200,u)),t(u)}const{mutateAsync:i,isLoading:r,isError:s,error:l}=xn(o);return{deleteZone:i,isDeletingZone:k(()=>r.value),isDeletingZoneError:k(()=>s.value),deleteZoneError:k(()=>l.value)}}function ka(){const t=un(["zones"]),{getLocalData:o}=Pn("zones");async function i(f){var g;const v={...(g=o())==null?void 0:g.find(_=>_.id===f.id),...f};return t(v),v}const{mutateAsync:r,isLoading:s,isError:l,error:u}=xn(i);async function d(f,m){if(f.zonePeriodicityRules.rules.some(g=>g.type===m.type)){const g=f.zonePeriodicityRules.rules.map(_=>_.type===m.type?{...m}:_);await r({id:f.id,zonePeriodicityRules:{...f.zonePeriodicityRules,rules:g}})}else await r({id:f.id,zonePeriodicityRules:{...f.zonePeriodicityRules,rules:[...f.zonePeriodicityRules.rules,{...m}]}})}async function h(f,m){await r({id:f.id,zonePeriodicityRules:{...f.zonePeriodicityRules,rules:f.zonePeriodicityRules.rules.filter(v=>v.type!==m.type)}})}return{updateZone:r,updateZoneRule:d,removeZoneRule:h,isUpdatingZone:k(()=>s.value),isUpdatingZoneError:k(()=>l.value),updateZoneError:k(()=>u.value)}}function fu(){const t=un(["zones"]),{getLocalData:o}=Pn("zones");async function i(d){var g;const h=(g=o())==null?void 0:g.find(_=>_.polygons.some(S=>S.id===d.id)),m={...h==null?void 0:h.polygons.find(_=>_.id===d.id),...d},v={...h,polygons:h==null?void 0:h.polygons.map(_=>_.id===d.id?m:_)};return await new Promise(_=>setTimeout(_,200,null)),t(v),m}const{mutateAsync:r,isLoading:s,isError:l,error:u}=xn(i);return{updatePolygon:r,isUpdatingPolygon:k(()=>s.value),isUpdatingPolygonError:k(()=>l.value),updatePolygonError:k(()=>u.value)}}function mu(){const t=un(["zones"]),{getLocalData:o}=Pn("zones");async function i(d){var v;const h=new Date().toISOString(),f=(v=o())==null?void 0:v.find(g=>g.id===d.zone),m={id:Gn(),vertices:[],addresses:[],createdAt:h,updatedAt:h,isActive:!0,label:"Nuevo pol\xEDgono",zone:d.zone||""};return t({...f,polygons:[m,...(f==null?void 0:f.polygons)||[]]}),new Promise(g=>setTimeout(g,2e3,m))}const{mutateAsync:r,isLoading:s,isError:l,error:u}=xn(i);return{createPolygon:r,isCreatingPolygon:k(()=>s.value),isCreatingPolygonError:k(()=>l.value),createPolygonError:k(()=>u.value)}}function Ff(){const t=un(["zones"]);async function o(u){const d={...u,id:Gn(),polygons:[],isActive:!0,zonePeriodicityRules:{asociation:"or",rules:[{type:"ever",values:[]}]},additionalAddresses:[],excludedAddresses:[],users:[]};return t(d),d}const{mutateAsync:i,isLoading:r,isError:s,error:l}=xn(o);return{createZone:i,isCreatingZone:k(()=>r.value),isCreatingZoneError:k(()=>s.value),createZoneError:k(()=>l.value)}}const Wi=8,hs=H(),fs=H(!1),hi=H(null),pl=H({});function Ls(t){{const o=t;if(!o||o.length===0)return[];const i={minLat:o[0][0],maxLat:o[0][0],minLng:o[0][1],maxLng:o[0][1]};for(let r=1;r<o.length;r++){const s=o[r][0],l=o[r][1];i.minLat=Math.min(i.minLat,s),i.maxLat=Math.max(i.maxLat,s),i.minLng=Math.min(i.minLng,l),i.maxLng=Math.max(i.maxLng,l)}return[[i.minLat,i.minLng],[i.maxLat,i.maxLng]]}}function Nf(){const{addresses:t}=no(),{zones:o}=_o(),{users:i}=ya(),r=k(()=>t.value.map(u=>{var d;return(d=u.coords)==null?void 0:d.latlng}).filter(Boolean)),s=k(()=>{const u=[];for(const d of o.value)for(const h of d.polygons)u.push(...h.vertices);return u}),l=k(()=>i.value.map(u=>{var d;return(d=u.coords)==null?void 0:d.latlng}).filter(Boolean)||[]);return k(()=>Ls([...r.value,...s.value,...l.value]))}function yo(t){const o=t||hs,i=k(()=>{var f,m;return Boolean((m=(f=o.value)==null?void 0:f.leafletObject)==null?void 0:m.fitBounds)}),r=Nf();function s(f,m){var D,U,Z,$,j;if(!f||f.length<2||!i.value)return;f.length>2&&(f=Ls(f));const v=(D=o.value)==null?void 0:D.leafletObject,g=v.getSize();if(g.x===0||g.y===0)return;const{left:_=((U=hi.value)==null?void 0:U.left)||Wi,right:S=((Z=hi.value)==null?void 0:Z.right)||Wi,bottom:M=(($=hi.value)==null?void 0:$.bottom)||Wi,top:q=((j=hi.value)==null?void 0:j.top)||Wi}={...m||{}},F={x:(g.x-_-S)/g.x,y:(g.y-q-M)/g.y},ee={left:_?_/(_+S):0,right:S?S/(_+S):0,top:q?q/(q+M):0,bottom:M?M/(q+M):0},B={lat:f[1][0]-f[0][0],lng:f[1][1]-f[0][1]},z={lat:B.lat*(1/F.y)-B.lat,lng:B.lng*(1/F.x)-B.lng};f=[[f[0][0]-z.lat*ee.bottom,f[0][1]-z.lng*ee.left],[f[1][0]+z.lat*ee.top,f[1][1]+z.lng*ee.right]],v.flyToBounds(f,{duration:.3})}function l(f,m){var g;if(!f||f.length!==2||!i.value)return;const v=(g=(t||hs).value)==null?void 0:g.leafletObject;!v||v.setView(f,m||v.getZoom(),{animate:!0,duration:.3})}async function u(f){fs.value=!0,await new Promise(m=>setTimeout(m,200)),fs.value=!1,f&&s(f)}function d(f){s(r.value,f)}function h(f,m){pl.value[f]=m}return{refreshMap:u,calcBounds:Ls,setBounds:s,centerToLatlng:l,setFullBounds:d,addMapClickEvent:h,isMapReady:i,defaultMargins:hi,mapClickEvents:k(()=>pl.value),isRefreshingMap:k(()=>fs.value),map:hs}}const Zf={style:{width:"100%"},class:"relative-position"},Hf={class:"absolute-top-right row",style:{"z-index":"999"}},Vf={class:"absolute-top-left row",style:{"z-index":"999",top:"8px"}},Uf={class:"absolute-bottom-right row",style:{"z-index":"999"}},jf={class:"absolute-bottom-left row",style:{"z-index":"999"}},Wf={class:"absolute-top row flex flex-center",style:{"z-index":"500"}},Xs=xe({__name:"KBaseMap",props:ut({width:{default:"100%"},height:{default:"100%"},margins:{},showZoomControl:{type:Boolean},keepStatic:{type:Boolean},useGlobalLeaflet:{type:Boolean}},{center:{local:!0,default:[-25.355,-57.59]},zoom:{local:!0,default:14},bounds:{local:!0,default:[]}}),emits:ut(["ready","click"],["update:center","update:zoom","update:bounds"]),setup(t,{emit:o}){const i=t,r=o,s=H(),{isMapReady:l,setBounds:u,centerToLatlng:d}=yo(s),h={map:s,isReady:l,setBounds:u,centerToLatlng:d},f=dn({attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),m=dn({zoomSnap:.2,zoomControl:k(()=>i.showZoomControl||!1),maxZoom:40}),v=wt(t,"center",{local:!0}),g=wt(t,"zoom",{local:!0}),_=wt(t,"bounds",{local:!0});ke(l,()=>{var q;const M=(q=s.value)==null?void 0:q.leafletObject;!l.value||!M||(M==null||M.off("click"),M==null||M.on("click",F=>{F!=null&&F.latlng&&r("click",{latlng:[F.latlng.lat,F.latlng.lng]})}),S(),r("ready",{map:s.value}))}),ke(()=>i.keepStatic,S);function S(){var q;const M=(q=s.value)==null?void 0:q.leafletObject;!M||(i.keepStatic?(M.dragging.disable(),M.touchZoom.disable(),M.doubleClickZoom.disable(),M.scrollWheelZoom.disable(),M.keyboard.disable()):(M.dragging.enable(),M.touchZoom.enable(),M.doubleClickZoom.enable(),M.scrollWheelZoom.enable(),M.keyboard.enable()))}return(M,q)=>(P(),Y("div",Zf,[O("div",Hf,[ze(M.$slots,"top-right",Qt(rn(h)))]),O("div",Vf,[ze(M.$slots,"top-left",Qt(rn(h)))]),O("div",Uf,[ze(M.$slots,"bottom-right",Qt(rn(h)))]),O("div",jf,[ze(M.$slots,"bottom-left",Qt(rn(h)))]),O("div",Wf,[ze(M.$slots,"top-center",Qt(rn(h)))]),w(A(ff),{style:St(`height: ${M.height}; min-width: ${M.width};`),ref_key:"map",ref:s,maxZoom:18,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0,useGlobalLeaflet:M.useGlobalLeaflet,options:m,bounds:_.value,"onUpdate:bounds":q[0]||(q[0]=F=>_.value=F),center:v.value,"onUpdate:center":q[1]||(q[1]=F=>v.value=F),zoom:g.value,"onUpdate:zoom":q[2]||(q[2]=F=>g.value=F)},{default:C(()=>[w(A(Mf),{url:f.url,attribution:f.attribution},null,8,["url","attribution"]),ze(M.$slots,"default",Qt(rn(h)))]),_:3},8,["style","useGlobalLeaflet","options","bounds","center","zoom"])]))}}),Yf=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Ca({r:t,g:o,b:i,a:r}){const s=r!==void 0;if(t=Math.round(t),o=Math.round(o),i=Math.round(i),t>255||o>255||i>255||s&&r>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return r=s?(Math.round(255*r/100)|1<<8).toString(16).slice(1):"","#"+(i|o<<8|t<<16|1<<24).toString(16).slice(1)+r}function pu(t){if(typeof t!="string")throw new TypeError("Expected a string");t=t.replace(/^#/,""),t.length===3?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t.length===4&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const o=parseInt(t,16);return t.length>6?{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:Math.round((o&255)/2.55)}:{r:o>>16,g:o>>8&255,b:o&255}}function Gf({h:t,s:o,v:i,a:r}){let s,l,u;o=o/100,i=i/100,t=t/360;const d=Math.floor(t*6),h=t*6-d,f=i*(1-o),m=i*(1-h*o),v=i*(1-(1-h)*o);switch(d%6){case 0:s=i,l=v,u=f;break;case 1:s=m,l=i,u=f;break;case 2:s=f,l=i,u=v;break;case 3:s=f,l=m,u=i;break;case 4:s=v,l=f,u=i;break;case 5:s=i,l=f,u=m;break}return{r:Math.round(s*255),g:Math.round(l*255),b:Math.round(u*255),a:r}}function Kf({r:t,g:o,b:i,a:r}){const s=Math.max(t,o,i),l=Math.min(t,o,i),u=s-l,d=s===0?0:u/s,h=s/255;let f;switch(s){case l:f=0;break;case t:f=o-i+u*(o<i?6:0),f/=6*u;break;case o:f=i-t+u*2,f/=6*u;break;case i:f=t-o+u*4,f/=6*u;break}return{h:Math.round(f*360),s:Math.round(d*100),v:Math.round(h*100),a:r}}function Kn(t){if(typeof t!="string")throw new TypeError("Expected a string");const o=t.replace(/ /g,""),i=Yf.exec(o);if(i===null)return pu(o);const r={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const s=parseFloat(i[5]);r.a=Math.min(1,isNaN(s)===!0?1:s)*100}return r}function Qf(t,o){if(typeof t!="string")throw new TypeError("Expected a string as color");if(typeof o!="number")throw new TypeError("Expected a numeric percent");const i=Kn(t),r=o<0?0:255,s=Math.abs(o)/100,l=i.r,u=i.g,d=i.b;return"#"+(16777216+(Math.round((r-l)*s)+l)*65536+(Math.round((r-u)*s)+u)*256+(Math.round((r-d)*s)+d)).toString(16).slice(1)}function Xf(t){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const o=typeof t=="string"?Kn(t):t,i=o.r/255,r=o.g/255,s=o.b/255,l=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),u=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),d=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return .2126*l+.7152*u+.0722*d}function Jf(t){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const o=typeof t=="string"?Kn(t):t;return(o.r*299+o.g*587+o.b*114)/1e3}function em(t,o){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as fgColor");if(typeof o!="string"&&(!o||o.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as bgColor");const i=typeof t=="string"?Kn(t):t,r=i.r/255,s=i.g/255,l=i.b/255,u=i.a!==void 0?i.a/100:1,d=typeof o=="string"?Kn(o):o,h=d.r/255,f=d.g/255,m=d.b/255,v=d.a!==void 0?d.a/100:1,g=u+v*(1-u),_=Math.round((r*u+h*v*(1-u))/g*255),S=Math.round((s*u+f*v*(1-u))/g*255),M=Math.round((l*u+m*v*(1-u))/g*255),q={r:_,g:S,b:M,a:Math.round(g*100)};return typeof t=="string"?Ca(q):q}function tm(t,o){if(typeof t!="string")throw new TypeError("Expected a string as color");if(o===void 0||o<-1||o>1)throw new TypeError("Expected offset to be between -1 and 1");const{r:i,g:r,b:s,a:l}=Kn(t),u=l!==void 0?l/100:0;return Ca({r:i,g:r,b:s,a:Math.round(Math.min(1,Math.max(0,u+o))*100)})}function nm(t){if(typeof t!="string")throw new TypeError("Expected a string as color");const o=document.createElement("div");o.className=`text-${t} invisible fixed no-pointer-events`,document.body.appendChild(o);const i=getComputedStyle(o).getPropertyValue("color");return o.remove(),Ca(Kn(i))}var aa={rgbToHex:Ca,hexToRgb:pu,hsvToRgb:Gf,rgbToHsv:Kf,textToRgb:Kn,lighten:Qf,luminosity:Xf,brightness:Jf,blend:em,changeAlpha:tm,getPaletteColor:nm};const om=X("div",{class:"q-space"});var vu=_t({name:"QSpace",setup(){return()=>om}}),tt=_t({name:"QItem",props:{...Jn,...md,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:o,emit:i}){const{proxy:{$q:r}}=Pt(),s=eo(t,r),{hasLink:l,linkAttrs:u,linkClass:d,linkTag:h,navigateOnClick:f}=pd(),m=H(null),v=H(null),g=k(()=>t.clickable===!0||l.value===!0||t.tag==="label"),_=k(()=>t.disable!==!0&&g.value===!0),S=k(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(s.value===!0?" q-item--dark":"")+(l.value===!0&&t.active===null?d.value:t.active===!0?` q-item--active${t.activeClass!==void 0?` ${t.activeClass}`:""}`:"")+(t.disable===!0?" disabled":"")+(_.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),M=k(()=>{if(t.insetLevel===void 0)return null;const B=r.lang.rtl===!0?"Right":"Left";return{["padding"+B]:16+t.insetLevel*56+"px"}});function q(B){_.value===!0&&(v.value!==null&&(B.qKeyEvent!==!0&&document.activeElement===m.value?v.value.focus():document.activeElement===v.value&&m.value.focus()),f(B))}function F(B){if(_.value===!0&&ga(B,[13,32])===!0){yn(B),B.qKeyEvent=!0;const z=new MouseEvent("click",B);z.qKeyEvent=!0,m.value.dispatchEvent(z)}i("keyup",B)}function ee(){const B=vd(o.default,[]);return _.value===!0&&B.unshift(X("div",{class:"q-focus-helper",tabindex:-1,ref:v})),B}return()=>{const B={ref:m,class:S.value,style:M.value,role:"listitem",onClick:q,onKeyup:F};return _.value===!0?(B.tabindex=t.tabindex||"0",Object.assign(B,u.value)):g.value===!0&&(B["aria-disabled"]="true"),X(h.value,B,ee())}}});const im=xe({__name:"KMapTooltip",props:{color:{},permanent:{type:Boolean},direction:{},rounded:{type:Boolean},showLeftbar:{type:Boolean},leftbarColor:{},bgColor:{},maxWidth:{}},emits:["click"],setup(t){var r;const o=t,i=dn({showLeftbar:(r=o.showLeftbar)!=null?r:!0,leftbarColor:o.leftbarColor||o.color,bgColor:o.bgColor||"white",maxWidth:o.maxWidth||250});return(s,l)=>(P(),R(A(zf),{options:{interactive:!1,permanent:s.permanent,direction:s.direction},style:{"z-index":"9999"}},{default:C(()=>[w(tt,{class:at(["row items-center no-wrap q-pa-none rounded-borders",[`bg-${i.bgColor}`,{"rounded-tooltip-item shadow-0":s.rounded}]]),style:St([{"min-height":"0"},[`max-width: ${i.maxWidth}px`]]),clickable:"",onClick:l[0]||(l[0]=u=>s.$emit("click"))},{default:C(()=>[i.showLeftbar?(P(),Y("div",{key:0,style:St([`background-color: ${i.leftbarColor}`,{width:"10px",height:"100%"}]),class:"absolute-left"},null,4)):V("",!0),O("div",{class:at(["column",[{"q-ml-md":i.showLeftbar},{"q-py-xs q-px-sm":s.rounded}]])},[ze(s.$slots,"default",{},void 0,!0)],2),w(vu),ze(s.$slots,"side",{},void 0,!0)]),_:3},8,["class","style"])]),_:3},8,["options"]))}});var am=Vs(im,[["__scopeId","data-v-a30b3996"]]);const $o=xe({__name:"KMapMarker",props:{coords:{},color:{},internalColor:{},tooltip:{type:[Boolean,Object]}},emits:["click"],setup(t){const o=t,i=k(()=>{var s;return(s=o.color)!=null&&s.startsWith("#")?o.color:aa.getPaletteColor(o.color||"primary")}),r=k(()=>{const s=o.internalColor||o.color;return s!=null&&s.startsWith("#")?s:aa.getPaletteColor(s||"primary")});return(s,l)=>s.coords?(P(),R(A(sf),{key:0,"lat-lng":s.coords,radius:5,fill:!0,color:r.value||i.value,fillColor:i.value,fillOpacity:1,weight:10,opacity:.25,pane:"markerPane",onClick:l[0]||(l[0]=u=>s.$emit("click"))},{default:C(()=>[s.tooltip?(P(),R(am,Qt(tn({key:0},typeof s.tooltip=="boolean"?{color:i.value}:{...s.tooltip,color:i.value})),{default:C(()=>[ze(s.$slots,"default")]),_:3},16)):V("",!0)]),_:3},8,["lat-lng","color","fillColor"])):V("",!0)}}),zo=H(null),fi=H(null),Yi=H(!1),vl=H([]),sm=H("edit");function kn(){const{zones:t}=_o(),o=k(()=>t.value.find(r=>r.id===zo.value)||null),i=k(()=>{var r;return(r=o.value)==null?void 0:r.polygons.find(s=>s.id===fi.value)});return ke([zo,fi],()=>(!zo.value||!fi.value)&&(Yi.value=!1)),ke([Yi,i],()=>{var r;return vl.value=((r=i.value)==null?void 0:r.vertices)||[]}),{selectedZoneId:zo,selectedZone:k({get:()=>o.value,set:r=>zo.value=(r==null?void 0:r.id)||null}),selectedPolygon:k({get:()=>i.value||null,set:r=>fi.value=(r==null?void 0:r.id)||null}),isEditingPolygon:k({get:()=>Yi.value&&Boolean(fi.value)&&Boolean(zo.value),set:r=>Yi.value=r}),editingPolygonTempVertices:vl,editingPolygonAction:sm}}const rm=["red","pink","lime","purple","orange","indigo","blue","light-blue","cyan","teal","green","light-green","deep-purple","amber","blue-grey","deep-orange","brown"];function lm(t){return function(){return t=(1103515245*t+12345)%2147483648,t/2147483648}}function um(t,o=42){const i=t.concat(t),r=lm(o);return i.sort(()=>.5-r()),i}function gl(t,o,i){let r=0;const s=t||"0";for(let d=0;d<s.length;d++)r+=s.charCodeAt(d);const l=Math.sin(r)*1e4;return Math.floor((l-Math.floor(l))*(i-o+1))+o}function Ho(t){const o=um(rm),i=gl(t,0,o.length-1),r=gl(t,6,10);return`${o[i]}-${r}`}const cm={key:0},dm={key:1},hm=xe({__name:"KMapPolygon",props:ut({map:{}},{modelValue:{required:!0}}),emits:ut(["click","drag"],["update:modelValue"]),setup(t,{emit:o}){const i=t,r=o,s=wt(t,"modelValue"),l=H(null),{isEditingPolygon:u,selectedPolygon:d,editingPolygonTempVertices:h,editingPolygonAction:f}=kn(),m=k(()=>{var D;return((D=d.value)==null?void 0:D.id)===s.value.id}),v=k(()=>u.value&&f.value==="edit");k(()=>u.value&&f.value==="move");const g=k(()=>u.value&&f.value==="remove"),_=k(()=>{const D=[],U=h.value,Z=($,j)=>{D.push([(U[$][0]+U[j][0])/2,(U[$][1]+U[j][1])/2])};for(let $=1;$<U.length;$++)Z($,$-1);return U.length>2&&Z(0,U.length-1),D}),S=H(!1),M=H(null),q=k(()=>({type:"FeatureCollection",features:[{type:"Feature",polygon:s.value,geometry:{type:"Polygon",coordinates:[(m.value&&u.value?h.value:s.value.vertices).map(U=>[U[1],U[0]])]}}]})),F=k(()=>({onEachFeature:(D,U)=>{const Z=aa.getPaletteColor(Ho(s.value.id));U.setStyle({color:Z,fillColor:Z,fillOpacity:m.value?.75:.2}),U.options.draggable=!0,U.on("click",$=>r("click",D)),U.on("mousedown",$=>{var j,ae,W;u.value&&f.value==="move"&&((W=(ae=(j=i.map)==null?void 0:j.leafletObject)==null?void 0:ae.dragging)==null||W.disable(),M.value=[$.latlng.lat,$.latlng.lng],S.value=!0)}),U.on("mouseup",$=>{var j,ae,W;(W=(ae=(j=i.map)==null?void 0:j.leafletObject)==null?void 0:ae.dragging)==null||W.enable(),M.value=null,S.value=!1}),U.on("mousemove",$=>{if(S.value&&M.value){let j=[$.latlng.lat,$.latlng.lng],ae=j[0]-M.value[0],W=j[1]-M.value[1];r("drag",{variation:[ae,W],currentPosition:j}),M.value=j}})}}));function ee(D,U){if(!u.value)return;const{lat:Z,lng:$}=D.target.getLatLng(),j=[...h.value];j[U]=[Z,$],h.value=j}function B(D,U){if(!u.value)return;const{lat:Z,lng:$}=D.target.getLatLng();h.value.splice(U+1,0,[Z,$])}function z(D){!g.value||(h.value=[...h.value.slice(0,D),...h.value.slice(D+1)])}return(D,U)=>(P(),Y(qe,null,[w(A(cf),{ref_key:"geojsonLayerRef",ref:l,geojson:q.value,options:F.value},null,8,["geojson","options"]),v.value||g.value?(P(),Y("div",cm,[(P(!0),Y(qe,null,Ue(A(h),(Z,$)=>(P(),R(A(ml),{draggable:v.value,key:$,"lat-lng":Z,onClick:j=>z($),onDragend:j=>ee(j,$)},{default:C(()=>[w(A(hl),{"icon-size":[18,18],"icon-anchor":[9,9],"icon-url":"polygon_vertex.png"})]),_:2},1032,["draggable","lat-lng","onClick","onDragend"]))),128))])):V("",!0),v.value?(P(),Y("div",dm,[(P(!0),Y(qe,null,Ue(_.value,(Z,$)=>(P(),R(A(ml),{draggable:v.value,key:$,"lat-lng":Z,onDragend:j=>B(j,$)},{default:C(()=>[w(A(hl),{"icon-size":[18,18],"icon-anchor":[9,9],"icon-url":"polygon_add_vertex_handler.png"})]),_:2},1032,["draggable","lat-lng","onDragend"]))),128))])):V("",!0)],64))}}),_l={enableHighAccuracy:!0,maximumAge:1*1e3*60,frequency:1*1e3*60,timeout:3e4},fm=H(null),mm=H(null);function Sa(){async function t(){return new Promise((i,r)=>{navigator.geolocation.getCurrentPosition(s=>i({data:s}),s=>r({error:s}),_l)})}async function o(){const i=await new Promise((s,l)=>navigator.geolocation.getCurrentPosition(s,l,_l));return{lat:i.coords.latitude,lng:i.coords.longitude,latlng:[i.coords.latitude,i.coords.longitude],date:new Date().toISOString()}}return{askForPermissions:t,getCurrentPosition:o,currentPosition:k(()=>fm.value),positionError:k(()=>mm.value)}}function pm(){const{companyProfile:t}=nn();function o(i){var s;const r=(s=t.value)==null?void 0:s.coordsRawFormatter;return r?r.map(({name:l,label:u})=>({name:l,label:u,value:`${Reflect.get(i,l)||""}`.replace("Paraguay / Paragu\xE1i","Paraguay")})):[]}return o}var sa={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,o){(function(i,r){r(o)})(oh,function(i){var r="1.9.4";function s(e){var n,a,c,p;for(a=1,c=arguments.length;a<c;a++){p=arguments[a];for(n in p)e[n]=p[n]}return e}var l=Object.create||function(){function e(){}return function(n){return e.prototype=n,new e}}();function u(e,n){var a=Array.prototype.slice;if(e.bind)return e.bind.apply(e,a.call(arguments,1));var c=a.call(arguments,2);return function(){return e.apply(n,c.length?c.concat(a.call(arguments)):arguments)}}var d=0;function h(e){return"_leaflet_id"in e||(e._leaflet_id=++d),e._leaflet_id}function f(e,n,a){var c,p,b,E;return E=function(){c=!1,p&&(b.apply(a,p),p=!1)},b=function(){c?p=arguments:(e.apply(a,arguments),setTimeout(E,n),c=!0)},b}function m(e,n,a){var c=n[1],p=n[0],b=c-p;return e===c&&a?e:((e-p)%b+b)%b+p}function v(){return!1}function g(e,n){if(n===!1)return e;var a=Math.pow(10,n===void 0?6:n);return Math.round(e*a)/a}function _(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(e){return _(e).split(/\s+/)}function M(e,n){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?l(e.options):{});for(var a in n)e.options[a]=n[a];return e.options}function q(e,n,a){var c=[];for(var p in e)c.push(encodeURIComponent(a?p.toUpperCase():p)+"="+encodeURIComponent(e[p]));return(!n||n.indexOf("?")===-1?"?":"&")+c.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function ee(e,n){return e.replace(F,function(a,c){var p=n[c];if(p===void 0)throw new Error("No value provided for variable "+a);return typeof p=="function"&&(p=p(n)),p})}var B=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function z(e,n){for(var a=0;a<e.length;a++)if(e[a]===n)return a;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Z=0;function $(e){var n=+new Date,a=Math.max(0,16-(n-Z));return Z=n+a,window.setTimeout(e,a)}var j=window.requestAnimationFrame||U("RequestAnimationFrame")||$,ae=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function W(e,n,a){if(a&&j===$)e.call(n);else return j.call(window,u(e,n))}function oe(e){e&&ae.call(window,e)}var re={__proto__:null,extend:s,create:l,bind:u,get lastId(){return d},stamp:h,throttle:f,wrapNum:m,falseFn:v,formatNum:g,trim:_,splitWords:S,setOptions:M,getParamString:q,template:ee,isArray:B,indexOf:z,emptyImageUrl:D,requestFn:j,cancelFn:ae,requestAnimFrame:W,cancelAnimFrame:oe};function ve(){}ve.extend=function(e){var n=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=n.__super__=this.prototype,c=l(a);c.constructor=n,n.prototype=c;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(n[p]=this[p]);return e.statics&&s(n,e.statics),e.includes&&(Se(e.includes),s.apply(null,[c].concat(e.includes))),s(c,e),delete c.statics,delete c.includes,c.options&&(c.options=a.options?l(a.options):{},s(c.options,e.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,E=c._initHooks.length;b<E;b++)c._initHooks[b].call(this)}},n},ve.include=function(e){var n=this.prototype.options;return s(this.prototype,e),e.options&&(this.prototype.options=n,this.mergeOptions(e.options)),this},ve.mergeOptions=function(e){return s(this.prototype.options,e),this},ve.addInitHook=function(e){var n=Array.prototype.slice.call(arguments,1),a=typeof e=="function"?e:function(){this[e].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function Se(e){if(!(typeof L=="undefined"||!L||!L.Mixin)){e=B(e)?e:[e];for(var n=0;n<e.length;n++)e[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(e,n,a){if(typeof e=="object")for(var c in e)this._on(c,e[c],n);else{e=S(e);for(var p=0,b=e.length;p<b;p++)this._on(e[p],n,a)}return this},off:function(e,n,a){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var c in e)this._off(c,e[c],n);else{e=S(e);for(var p=arguments.length===1,b=0,E=e.length;b<E;b++)p?this._off(e[b]):this._off(e[b],n,a)}return this},_on:function(e,n,a,c){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(e,n,a)===!1){a===this&&(a=void 0);var p={fn:n,ctx:a};c&&(p.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(p)}},_off:function(e,n,a){var c,p,b;if(!!this._events&&(c=this._events[e],!!c)){if(arguments.length===1){if(this._firingCount)for(p=0,b=c.length;p<b;p++)c[p].fn=v;delete this._events[e];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var E=this._listens(e,n,a);if(E!==!1){var N=c[E];this._firingCount&&(N.fn=v,this._events[e]=c=c.slice()),c.splice(E,1)}}},fire:function(e,n,a){if(!this.listens(e,a))return this;var c=s({},n,{type:e,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var p=this._events[e];if(p){this._firingCount=this._firingCount+1||1;for(var b=0,E=p.length;b<E;b++){var N=p[b],G=N.fn;N.once&&this.off(e,G,N.ctx),G.call(N.ctx||this,c)}this._firingCount--}}return a&&this._propagateEvent(c),this},listens:function(e,n,a,c){typeof e!="string"&&console.warn('"string" type argument expected');var p=n;typeof n!="function"&&(c=!!n,p=void 0,a=void 0);var b=this._events&&this._events[e];if(b&&b.length&&this._listens(e,p,a)!==!1)return!0;if(c){for(var E in this._eventParents)if(this._eventParents[E].listens(e,n,a,c))return!0}return!1},_listens:function(e,n,a){if(!this._events)return!1;var c=this._events[e]||[];if(!n)return!!c.length;a===this&&(a=void 0);for(var p=0,b=c.length;p<b;p++)if(c[p].fn===n&&c[p].ctx===a)return p;return!1},once:function(e,n,a){if(typeof e=="object")for(var c in e)this._on(c,e[c],n,!0);else{e=S(e);for(var p=0,b=e.length;p<b;p++)this._on(e[p],n,a,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[h(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[h(e)],this},_propagateEvent:function(e){for(var n in this._eventParents)this._eventParents[n].fire(e.type,s({layer:e.target,propagatedFrom:e.target},e),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var le=ve.extend(Ae);function ie(e,n,a){this.x=a?Math.round(e):e,this.y=a?Math.round(n):n}var Le=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(e){return this.clone()._add(de(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(de(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new ie(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new ie(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Le(this.x),this.y=Le(this.y),this},distanceTo:function(e){e=de(e);var n=e.x-this.x,a=e.y-this.y;return Math.sqrt(n*n+a*a)},equals:function(e){return e=de(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=de(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function de(e,n,a){return e instanceof ie?e:B(e)?new ie(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new ie(e.x,e.y):new ie(e,n,a)}function ce(e,n){if(!!e)for(var a=n?[e,n]:e,c=0,p=a.length;c<p;c++)this.extend(a[c])}ce.prototype={extend:function(e){var n,a;if(!e)return this;if(e instanceof ie||typeof e[0]=="number"||"x"in e)n=a=de(e);else if(e=_e(e),n=e.min,a=e.max,!n||!a)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=a.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(e){return de((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return de(this.min.x,this.max.y)},getTopRight:function(){return de(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var n,a;return typeof e[0]=="number"||e instanceof ie?e=de(e):e=_e(e),e instanceof ce?(n=e.min,a=e.max):n=a=e,n.x>=this.min.x&&a.x<=this.max.x&&n.y>=this.min.y&&a.y<=this.max.y},intersects:function(e){e=_e(e);var n=this.min,a=this.max,c=e.min,p=e.max,b=p.x>=n.x&&c.x<=a.x,E=p.y>=n.y&&c.y<=a.y;return b&&E},overlaps:function(e){e=_e(e);var n=this.min,a=this.max,c=e.min,p=e.max,b=p.x>n.x&&c.x<a.x,E=p.y>n.y&&c.y<a.y;return b&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var n=this.min,a=this.max,c=Math.abs(n.x-a.x)*e,p=Math.abs(n.y-a.y)*e;return _e(de(n.x-c,n.y-p),de(a.x+c,a.y+p))},equals:function(e){return e?(e=_e(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function _e(e,n){return!e||e instanceof ce?e:new ce(e,n)}function we(e,n){if(!!e)for(var a=n?[e,n]:e,c=0,p=a.length;c<p;c++)this.extend(a[c])}we.prototype={extend:function(e){var n=this._southWest,a=this._northEast,c,p;if(e instanceof pe)c=e,p=e;else if(e instanceof we){if(c=e._southWest,p=e._northEast,!c||!p)return this}else return e?this.extend(me(e)||Me(e)):this;return!n&&!a?(this._southWest=new pe(c.lat,c.lng),this._northEast=new pe(p.lat,p.lng)):(n.lat=Math.min(c.lat,n.lat),n.lng=Math.min(c.lng,n.lng),a.lat=Math.max(p.lat,a.lat),a.lng=Math.max(p.lng,a.lng)),this},pad:function(e){var n=this._southWest,a=this._northEast,c=Math.abs(n.lat-a.lat)*e,p=Math.abs(n.lng-a.lng)*e;return new we(new pe(n.lat-c,n.lng-p),new pe(a.lat+c,a.lng+p))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof pe||"lat"in e?e=me(e):e=Me(e);var n=this._southWest,a=this._northEast,c,p;return e instanceof we?(c=e.getSouthWest(),p=e.getNorthEast()):c=p=e,c.lat>=n.lat&&p.lat<=a.lat&&c.lng>=n.lng&&p.lng<=a.lng},intersects:function(e){e=Me(e);var n=this._southWest,a=this._northEast,c=e.getSouthWest(),p=e.getNorthEast(),b=p.lat>=n.lat&&c.lat<=a.lat,E=p.lng>=n.lng&&c.lng<=a.lng;return b&&E},overlaps:function(e){e=Me(e);var n=this._southWest,a=this._northEast,c=e.getSouthWest(),p=e.getNorthEast(),b=p.lat>n.lat&&c.lat<a.lat,E=p.lng>n.lng&&c.lng<a.lng;return b&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,n){return e?(e=Me(e),this._southWest.equals(e.getSouthWest(),n)&&this._northEast.equals(e.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Me(e,n){return e instanceof we?e:new we(e,n)}function pe(e,n,a){if(isNaN(e)||isNaN(n))throw new Error("Invalid LatLng object: ("+e+", "+n+")");this.lat=+e,this.lng=+n,a!==void 0&&(this.alt=+a)}pe.prototype={equals:function(e,n){if(!e)return!1;e=me(e);var a=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return a<=(n===void 0?1e-9:n)},toString:function(e){return"LatLng("+g(this.lat,e)+", "+g(this.lng,e)+")"},distanceTo:function(e){return Q.distance(this,me(e))},wrap:function(){return Q.wrapLatLng(this)},toBounds:function(e){var n=180*e/40075017,a=n/Math.cos(Math.PI/180*this.lat);return Me([this.lat-n,this.lng-a],[this.lat+n,this.lng+a])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function me(e,n,a){return e instanceof pe?e:B(e)&&typeof e[0]!="object"?e.length===3?new pe(e[0],e[1],e[2]):e.length===2?new pe(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new pe(e.lat,"lng"in e?e.lng:e.lon,e.alt):n===void 0?null:new pe(e,n,a)}var ge={latLngToPoint:function(e,n){var a=this.projection.project(e),c=this.scale(n);return this.transformation._transform(a,c)},pointToLatLng:function(e,n){var a=this.scale(n),c=this.transformation.untransform(e,a);return this.projection.unproject(c)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var n=this.projection.bounds,a=this.scale(e),c=this.transformation.transform(n.min,a),p=this.transformation.transform(n.max,a);return new ce(c,p)},infinite:!1,wrapLatLng:function(e){var n=this.wrapLng?m(e.lng,this.wrapLng,!0):e.lng,a=this.wrapLat?m(e.lat,this.wrapLat,!0):e.lat,c=e.alt;return new pe(a,n,c)},wrapLatLngBounds:function(e){var n=e.getCenter(),a=this.wrapLatLng(n),c=n.lat-a.lat,p=n.lng-a.lng;if(c===0&&p===0)return e;var b=e.getSouthWest(),E=e.getNorthEast(),N=new pe(b.lat-c,b.lng-p),G=new pe(E.lat-c,E.lng-p);return new we(N,G)}},Q=s({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(e,n){var a=Math.PI/180,c=e.lat*a,p=n.lat*a,b=Math.sin((n.lat-e.lat)*a/2),E=Math.sin((n.lng-e.lng)*a/2),N=b*b+Math.cos(c)*Math.cos(p)*E*E,G=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N));return this.R*G}}),K=6378137,Ee={R:K,MAX_LATITUDE:85.0511287798,project:function(e){var n=Math.PI/180,a=this.MAX_LATITUDE,c=Math.max(Math.min(a,e.lat),-a),p=Math.sin(c*n);return new ie(this.R*e.lng*n,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(e){var n=180/Math.PI;return new pe((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*n,e.x*n/this.R)},bounds:function(){var e=K*Math.PI;return new ce([-e,-e],[e,e])}()};function De(e,n,a,c){if(B(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=n,this._c=a,this._d=c}De.prototype={transform:function(e,n){return this._transform(e.clone(),n)},_transform:function(e,n){return n=n||1,e.x=n*(this._a*e.x+this._b),e.y=n*(this._c*e.y+this._d),e},untransform:function(e,n){return n=n||1,new ie((e.x/n-this._b)/this._a,(e.y/n-this._d)/this._c)}};function Ne(e,n,a,c){return new De(e,n,a,c)}var rt=s({},Q,{code:"EPSG:3857",projection:Ee,transformation:function(){var e=.5/(Math.PI*Ee.R);return Ne(e,.5,-e,.5)}()}),mt=s({},rt,{code:"EPSG:900913"});function Vt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ut(e,n){var a="",c,p,b,E,N,G;for(c=0,b=e.length;c<b;c++){for(N=e[c],p=0,E=N.length;p<E;p++)G=N[p],a+=(p?"L":"M")+G.x+" "+G.y;a+=n?J.svg?"z":"x":""}return a||"M0 0"}var pt=document.documentElement.style,jt="ActiveXObject"in window,fn=jt&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),he=fe("webkit"),Ce=fe("android"),ne=fe("android 2")||fe("android 3"),Te=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ie=Ce&&fe("Google")&&Te<537&&!("AudioNode"in window),Re=!!window.opera,Ve=!kt&&fe("chrome"),dt=fe("gecko")&&!he&&!Re&&!jt,Lt=!Ve&&fe("safari"),Sn=fe("phantom"),oo="OTransition"in pt,Po=navigator.platform.indexOf("Win")===0,mn=jt&&"transition"in pt,$t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,ki="MozPerspective"in pt,Ea=!window.L_DISABLE_3D&&(mn||$t||ki)&&!oo&&!Sn,Rt=typeof orientation!="undefined"||fe("mobile"),Rn=Rt&&he,Ci=Rt&&$t,io=!window.PointerEvent&&window.MSPointerEvent,Wo=!!(window.PointerEvent||io),Tn="ontouchstart"in window||!!window.TouchEvent,Yo=!window.L_NO_TOUCH&&(Tn||Wo),Go=Rt&&Re,Si=Rt&&dt,za=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ko=function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",v,n),window.removeEventListener("testPassiveEventSupport",v,n)}catch{}return e}(),Da=function(){return!!document.createElement("canvas").getContext}(),Qo=!!(document.createElementNS&&Vt("svg").createSVGRect),$a=!!Qo&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),T=!Qo&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}}(),I=navigator.platform.indexOf("Mac")===0,te=navigator.platform.indexOf("Linux")===0;function fe(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var J={ie:jt,ielt9:fn,edge:kt,webkit:he,android:Ce,android23:ne,androidStock:Ie,opera:Re,chrome:Ve,gecko:dt,safari:Lt,phantom:Sn,opera12:oo,win:Po,ie3d:mn,webkit3d:$t,gecko3d:ki,any3d:Ea,mobile:Rt,mobileWebkit:Rn,mobileWebkit3d:Ci,msPointer:io,pointer:Wo,touch:Yo,touchNative:Tn,mobileOpera:Go,mobileGecko:Si,retina:za,passiveEvents:Ko,canvas:Da,svg:Qo,vml:T,inlineSvg:$a,mac:I,linux:te},je=J.msPointer?"MSPointerDown":"pointerdown",Pe=J.msPointer?"MSPointerMove":"pointermove",$e=J.msPointer?"MSPointerUp":"pointerup",Qe=J.msPointer?"MSPointerCancel":"pointercancel",Ln={touchstart:je,touchmove:Pe,touchend:$e,touchcancel:Qe},fr={touchstart:cc,touchmove:Ti,touchend:Ti,touchcancel:Ti},ko={},mr=!1;function ac(e,n,a){return n==="touchstart"&&uc(),fr[n]?(a=fr[n].bind(this,a),e.addEventListener(Ln[n],a,!1),a):(console.warn("wrong event specified:",n),v)}function sc(e,n,a){if(!Ln[n]){console.warn("wrong event specified:",n);return}e.removeEventListener(Ln[n],a,!1)}function rc(e){ko[e.pointerId]=e}function lc(e){ko[e.pointerId]&&(ko[e.pointerId]=e)}function pr(e){delete ko[e.pointerId]}function uc(){mr||(document.addEventListener(je,rc,!0),document.addEventListener(Pe,lc,!0),document.addEventListener($e,pr,!0),document.addEventListener(Qe,pr,!0),mr=!0)}function Ti(e,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var a in ko)n.touches.push(ko[a]);n.changedTouches=[n],e(n)}}function cc(e,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&xt(n),Ti(e,n)}function dc(e){var n={},a,c;for(c in e)a=e[c],n[c]=a&&a.bind?a.bind(e):a;return e=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var hc=200;function fc(e,n){e.addEventListener("dblclick",n);var a=0,c;function p(b){if(b.detail!==1){c=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var E=br(b);if(!(E.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!E.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var N=Date.now();N-a<=hc?(c++,c===2&&n(dc(b))):c=1,a=N}}}return e.addEventListener("click",p),{dblclick:n,simDblclick:p}}function mc(e,n){e.removeEventListener("dblclick",n.dblclick),e.removeEventListener("click",n.simDblclick)}var Oa=Ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xo=Ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vr=Xo==="webkitTransition"||Xo==="OTransition"?Xo+"End":"transitionend";function gr(e){return typeof e=="string"?document.getElementById(e):e}function Jo(e,n){var a=e.style[n]||e.currentStyle&&e.currentStyle[n];if((!a||a==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(e,null);a=c?c[n]:null}return a==="auto"?null:a}function Ye(e,n,a){var c=document.createElement(e);return c.className=n||"",a&&a.appendChild(c),c}function lt(e){var n=e.parentNode;n&&n.removeChild(e)}function Li(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Co(e){var n=e.parentNode;n&&n.lastChild!==e&&n.appendChild(e)}function So(e){var n=e.parentNode;n&&n.firstChild!==e&&n.insertBefore(e,n.firstChild)}function qa(e,n){if(e.classList!==void 0)return e.classList.contains(n);var a=Mi(e);return a.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(a)}function Fe(e,n){if(e.classList!==void 0)for(var a=S(n),c=0,p=a.length;c<p;c++)e.classList.add(a[c]);else if(!qa(e,n)){var b=Mi(e);Ia(e,(b?b+" ":"")+n)}}function ht(e,n){e.classList!==void 0?e.classList.remove(n):Ia(e,_((" "+Mi(e)+" ").replace(" "+n+" "," ")))}function Ia(e,n){e.className.baseVal===void 0?e.className=n:e.className.baseVal=n}function Mi(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Wt(e,n){"opacity"in e.style?e.style.opacity=n:"filter"in e.style&&pc(e,n)}function pc(e,n){var a=!1,c="DXImageTransform.Microsoft.Alpha";try{a=e.filters.item(c)}catch{if(n===1)return}n=Math.round(n*100),a?(a.Enabled=n!==100,a.Opacity=n):e.style.filter+=" progid:"+c+"(opacity="+n+")"}function Ai(e){for(var n=document.documentElement.style,a=0;a<e.length;a++)if(e[a]in n)return e[a];return!1}function ao(e,n,a){var c=n||new ie(0,0);e.style[Oa]=(J.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(a?" scale("+a+")":"")}function vt(e,n){e._leaflet_pos=n,J.any3d?ao(e,n):(e.style.left=n.x+"px",e.style.top=n.y+"px")}function so(e){return e._leaflet_pos||new ie(0,0)}var ei,ti,Ra;if("onselectstart"in document)ei=function(){Oe(window,"selectstart",xt)},ti=function(){nt(window,"selectstart",xt)};else{var ni=Ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ei=function(){if(ni){var e=document.documentElement.style;Ra=e[ni],e[ni]="none"}},ti=function(){ni&&(document.documentElement.style[ni]=Ra,Ra=void 0)}}function Fa(){Oe(window,"dragstart",xt)}function Na(){nt(window,"dragstart",xt)}var Bi,Za;function Ha(e){for(;e.tabIndex===-1;)e=e.parentNode;!e.style||(Ei(),Bi=e,Za=e.style.outlineStyle,e.style.outlineStyle="none",Oe(window,"keydown",Ei))}function Ei(){!Bi||(Bi.style.outlineStyle=Za,Bi=void 0,Za=void 0,nt(window,"keydown",Ei))}function _r(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Va(e){var n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}var vc={__proto__:null,TRANSFORM:Oa,TRANSITION:Xo,TRANSITION_END:vr,get:gr,getStyle:Jo,create:Ye,remove:lt,empty:Li,toFront:Co,toBack:So,hasClass:qa,addClass:Fe,removeClass:ht,setClass:Ia,getClass:Mi,setOpacity:Wt,testProp:Ai,setTransform:ao,setPosition:vt,getPosition:so,get disableTextSelection(){return ei},get enableTextSelection(){return ti},disableImageDrag:Fa,enableImageDrag:Na,preventOutline:Ha,restoreOutline:Ei,getSizedParentNode:_r,getScale:Va};function Oe(e,n,a,c){if(n&&typeof n=="object")for(var p in n)ja(e,p,n[p],a);else{n=S(n);for(var b=0,E=n.length;b<E;b++)ja(e,n[b],a,c)}return this}var pn="_leaflet_events";function nt(e,n,a,c){if(arguments.length===1)yr(e),delete e[pn];else if(n&&typeof n=="object")for(var p in n)Wa(e,p,n[p],a);else if(n=S(n),arguments.length===2)yr(e,function(N){return z(n,N)!==-1});else for(var b=0,E=n.length;b<E;b++)Wa(e,n[b],a,c);return this}function yr(e,n){for(var a in e[pn]){var c=a.split(/\d/)[0];(!n||n(c))&&Wa(e,c,null,null,a)}}var Ua={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ja(e,n,a,c){var p=n+h(a)+(c?"_"+h(c):"");if(e[pn]&&e[pn][p])return this;var b=function(N){return a.call(c||e,N||window.event)},E=b;!J.touchNative&&J.pointer&&n.indexOf("touch")===0?b=ac(e,n,b):J.touch&&n==="dblclick"?b=fc(e,b):"addEventListener"in e?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?e.addEventListener(Ua[n]||n,b,J.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(b=function(N){N=N||window.event,Ga(e,N)&&E(N)},e.addEventListener(Ua[n],b,!1)):e.addEventListener(n,E,!1):e.attachEvent("on"+n,b),e[pn]=e[pn]||{},e[pn][p]=b}function Wa(e,n,a,c,p){p=p||n+h(a)+(c?"_"+h(c):"");var b=e[pn]&&e[pn][p];if(!b)return this;!J.touchNative&&J.pointer&&n.indexOf("touch")===0?sc(e,n,b):J.touch&&n==="dblclick"?mc(e,b):"removeEventListener"in e?e.removeEventListener(Ua[n]||n,b,!1):e.detachEvent("on"+n,b),e[pn][p]=null}function ro(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ya(e){return ja(e,"wheel",ro),this}function oi(e){return Oe(e,"mousedown touchstart dblclick contextmenu",ro),e._leaflet_disable_click=!0,this}function xt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function lo(e){return xt(e),ro(e),this}function br(e){if(e.composedPath)return e.composedPath();for(var n=[],a=e.target;a;)n.push(a),a=a.parentNode;return n}function wr(e,n){if(!n)return new ie(e.clientX,e.clientY);var a=Va(n),c=a.boundingClientRect;return new ie((e.clientX-c.left)/a.x-n.clientLeft,(e.clientY-c.top)/a.y-n.clientTop)}var gc=J.linux&&J.chrome?window.devicePixelRatio:J.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xr(e){return J.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/gc:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Ga(e,n){var a=n.relatedTarget;if(!a)return!0;try{for(;a&&a!==e;)a=a.parentNode}catch{return!1}return a!==e}var _c={__proto__:null,on:Oe,off:nt,stopPropagation:ro,disableScrollPropagation:Ya,disableClickPropagation:oi,preventDefault:xt,stop:lo,getPropagationPath:br,getMousePosition:wr,getWheelDelta:xr,isExternalTarget:Ga,addListener:Oe,removeListener:nt},Pr=le.extend({run:function(e,n,a,c){this.stop(),this._el=e,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=so(e),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(e){var n=+new Date-this._startTime,a=this._duration*1e3;n<a?this._runFrame(this._easeOut(n/a),e):(this._runFrame(1),this._complete())},_runFrame:function(e,n){var a=this._startPos.add(this._offset.multiplyBy(e));n&&a._round(),vt(this._el,a),this.fire("step")},_complete:function(){oe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),We=le.extend({options:{crs:rt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,n){n=M(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(me(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xo&&J.any3d&&!J.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,vr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,n,a){if(n=n===void 0?this._zoom:this._limitZoom(n),e=this._limitCenter(me(e),n,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=s({animate:a.animate},a.zoom),a.pan=s({animate:a.animate,duration:a.duration},a.pan));var c=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,n,a.zoom):this._tryAnimatedPan(e,a.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(e,n,a.pan&&a.pan.noMoveStart),this},setZoom:function(e,n){return this._loaded?this.setView(this.getCenter(),e,{zoom:n}):(this._zoom=e,this)},zoomIn:function(e,n){return e=e||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,n)},zoomOut:function(e,n){return e=e||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,n)},setZoomAround:function(e,n,a){var c=this.getZoomScale(n),p=this.getSize().divideBy(2),b=e instanceof ie?e:this.latLngToContainerPoint(e),E=b.subtract(p).multiplyBy(1-1/c),N=this.containerPointToLatLng(p.add(E));return this.setView(N,n,{zoom:a})},_getBoundsCenterZoom:function(e,n){n=n||{},e=e.getBounds?e.getBounds():Me(e);var a=de(n.paddingTopLeft||n.padding||[0,0]),c=de(n.paddingBottomRight||n.padding||[0,0]),p=this.getBoundsZoom(e,!1,a.add(c));if(p=typeof n.maxZoom=="number"?Math.min(n.maxZoom,p):p,p===1/0)return{center:e.getCenter(),zoom:p};var b=c.subtract(a).divideBy(2),E=this.project(e.getSouthWest(),p),N=this.project(e.getNorthEast(),p),G=this.unproject(E.add(N).divideBy(2).add(b),p);return{center:G,zoom:p}},fitBounds:function(e,n){if(e=Me(e),!e.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(e,n);return this.setView(a.center,a.zoom,n)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,n){return this.setView(e,this._zoom,{pan:n})},panBy:function(e,n){if(e=de(e).round(),n=n||{},!e.x&&!e.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,a,n.duration||.25,n.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,n,a){if(a=a||{},a.animate===!1||!J.any3d)return this.setView(e,n,a);this._stop();var c=this.project(this.getCenter()),p=this.project(e),b=this.getSize(),E=this._zoom;e=me(e),n=n===void 0?E:n;var N=Math.max(b.x,b.y),G=N*this.getZoomScale(E,n),se=p.distanceTo(c)||1,ye=1.42,Be=ye*ye;function He(gt){var Vi=gt?-1:1,sd=gt?G:N,rd=G*G-N*N+Vi*Be*Be*se*se,ld=2*sd*Be*se,ss=rd/ld,ol=Math.sqrt(ss*ss+1)-ss,ud=ol<1e-9?-18:Math.log(ol);return ud}function Mt(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function bt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Gt(gt){return Mt(gt)/bt(gt)}var Ot=He(0);function Eo(gt){return N*(bt(Ot)/bt(Ot+ye*gt))}function nd(gt){return N*(bt(Ot)*Gt(Ot+ye*gt)-Mt(Ot))/Be}function od(gt){return 1-Math.pow(1-gt,1.5)}var id=Date.now(),tl=(He(1)-Ot)/ye,ad=a.duration?1e3*a.duration:1e3*tl*.8;function nl(){var gt=(Date.now()-id)/ad,Vi=od(gt)*tl;gt<=1?(this._flyToFrame=W(nl,this),this._move(this.unproject(c.add(p.subtract(c).multiplyBy(nd(Vi)/se)),E),this.getScaleZoom(N/Eo(Vi),E),{flyTo:!0})):this._move(e,n)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),nl.call(this),this},flyToBounds:function(e,n){var a=this._getBoundsCenterZoom(e,n);return this.flyTo(a.center,a.zoom,n)},setMaxBounds:function(e){return e=Me(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var n=this.options.minZoom;return this.options.minZoom=e,this._loaded&&n!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var n=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&n!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,n){this._enforcingBounds=!0;var a=this.getCenter(),c=this._limitCenter(a,this._zoom,Me(e));return a.equals(c)||this.panTo(c,n),this._enforcingBounds=!1,this},panInside:function(e,n){n=n||{};var a=de(n.paddingTopLeft||n.padding||[0,0]),c=de(n.paddingBottomRight||n.padding||[0,0]),p=this.project(this.getCenter()),b=this.project(e),E=this.getPixelBounds(),N=_e([E.min.add(a),E.max.subtract(c)]),G=N.getSize();if(!N.contains(b)){this._enforcingBounds=!0;var se=b.subtract(N.getCenter()),ye=N.extend(b).getSize().subtract(G);p.x+=se.x<0?-ye.x:ye.x,p.y+=se.y<0?-ye.y:ye.y,this.panTo(this.unproject(p),n),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=s({animate:!1,pan:!0},e===!0?{animate:!0}:e);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),c=n.divideBy(2).round(),p=a.divideBy(2).round(),b=c.subtract(p);return!b.x&&!b.y?this:(e.animate&&e.pan?this.panBy(b):(e.pan&&this._rawPanBy(b),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=s({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=u(this._handleGeolocationResponse,this),a=u(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,a,e):navigator.geolocation.getCurrentPosition(n,a,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(!!this._container._leaflet_id){var n=e.code,a=e.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(e){if(!!this._container._leaflet_id){var n=e.coords.latitude,a=e.coords.longitude,c=new pe(n,a),p=c.toBounds(e.coords.accuracy*2),b=this._locateOptions;if(b.setView){var E=this.getBoundsZoom(p);this.setView(c,b.maxZoom?Math.min(E,b.maxZoom):E)}var N={latlng:c,bounds:p,timestamp:e.timestamp};for(var G in e.coords)typeof e.coords[G]=="number"&&(N[G]=e.coords[G]);this.fire("locationfound",N)}},addHandler:function(e,n){if(!n)return this;var a=this[e]=new n(this);return this._handlers.push(a),this.options[e]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(oe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)lt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,n){var a="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),c=Ye("div",a,n||this._mapPane);return e&&(this._panes[e]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),n=this.unproject(e.getBottomLeft()),a=this.unproject(e.getTopRight());return new we(n,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,n,a){e=Me(e),a=de(a||[0,0]);var c=this.getZoom()||0,p=this.getMinZoom(),b=this.getMaxZoom(),E=e.getNorthWest(),N=e.getSouthEast(),G=this.getSize().subtract(a),se=_e(this.project(N,c),this.project(E,c)).getSize(),ye=J.any3d?this.options.zoomSnap:1,Be=G.x/se.x,He=G.y/se.y,Mt=n?Math.max(Be,He):Math.min(Be,He);return c=this.getScaleZoom(Mt,c),ye&&(c=Math.round(c/(ye/100))*(ye/100),c=n?Math.ceil(c/ye)*ye:Math.floor(c/ye)*ye),Math.max(p,Math.min(b,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,n){var a=this._getTopLeftPoint(e,n);return new ce(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,n){var a=this.options.crs;return n=n===void 0?this._zoom:n,a.scale(e)/a.scale(n)},getScaleZoom:function(e,n){var a=this.options.crs;n=n===void 0?this._zoom:n;var c=a.zoom(e*a.scale(n));return isNaN(c)?1/0:c},project:function(e,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(me(e),n)},unproject:function(e,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(de(e),n)},layerPointToLatLng:function(e){var n=de(e).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(e){var n=this.project(me(e))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(me(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(Me(e))},distance:function(e,n){return this.options.crs.distance(me(e),me(n))},containerPointToLayerPoint:function(e){return de(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return de(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var n=this.containerPointToLayerPoint(de(e));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(e)))},mouseEventToContainerPoint:function(e){return wr(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var n=this._container=gr(e);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Oe(n,"scroll",this._onScroll,this),this._containerId=h(n)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&J.any3d,Fe(e,"leaflet-container"+(J.touch?" leaflet-touch":"")+(J.retina?" leaflet-retina":"")+(J.ielt9?" leaflet-oldie":"")+(J.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=Jo(e,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(e.markerPane,"leaflet-zoom-hide"),Fe(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,n,a){vt(this._mapPane,new ie(0,0));var c=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var p=this._zoom!==n;this._moveStart(p,a)._move(e,n)._moveEnd(p),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(e,n){return e&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(e,n,a,c){n===void 0&&(n=this._zoom);var p=this._zoom!==n;return this._zoom=n,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),c?a&&a.pinch&&this.fire("zoom",a):((p||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return oe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){vt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[h(this._container)]=this;var n=e?nt:Oe;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),J.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){oe(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,n){for(var a=[],c,p=n==="mouseout"||n==="mouseover",b=e.target||e.srcElement,E=!1;b;){if(c=this._targets[h(b)],c&&(n==="click"||n==="preclick")&&this._draggableMoved(c)){E=!0;break}if(c&&c.listens(n,!0)&&(p&&!Ga(b,e)||(a.push(c),p))||b===this._container)break;b=b.parentNode}return!a.length&&!E&&!p&&this.listens(n,!0)&&(a=[this]),a},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var n=e.target||e.srcElement;if(!(!this._loaded||n._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(n))){var a=e.type;a==="mousedown"&&Ha(n),this._fireDOMEvent(e,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,n,a){if(e.type==="click"){var c=s({},e);c.type="preclick",this._fireDOMEvent(c,c.type,a)}var p=this._findEventTargets(e,n);if(a){for(var b=[],E=0;E<a.length;E++)a[E].listens(n,!0)&&b.push(a[E]);p=b.concat(p)}if(!!p.length){n==="contextmenu"&&xt(e);var N=p[0],G={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var se=N.getLatLng&&(!N._radius||N._radius<=10);G.containerPoint=se?this.latLngToContainerPoint(N.getLatLng()):this.mouseEventToContainerPoint(e),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=se?N.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(E=0;E<p.length;E++)if(p[E].fire(n,G,!0),G.originalEvent._stopped||p[E].options.bubblingMouseEvents===!1&&z(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,n=this._handlers.length;e<n;e++)this._handlers[e].disable()},whenReady:function(e,n){return this._loaded?e.call(n||this,{target:this}):this.on("load",e,n),this},_getMapPanePos:function(){return so(this._mapPane)||new ie(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,n){var a=e&&n!==void 0?this._getNewPixelOrigin(e,n):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,n){var a=this.getSize()._divideBy(2);return this.project(e,n)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,n,a){var c=this._getNewPixelOrigin(a,n);return this.project(e,n)._subtract(c)},_latLngBoundsToNewLayerBounds:function(e,n,a){var c=this._getNewPixelOrigin(a,n);return _e([this.project(e.getSouthWest(),n)._subtract(c),this.project(e.getNorthWest(),n)._subtract(c),this.project(e.getSouthEast(),n)._subtract(c),this.project(e.getNorthEast(),n)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,n,a){if(!a)return e;var c=this.project(e,n),p=this.getSize().divideBy(2),b=new ce(c.subtract(p),c.add(p)),E=this._getBoundsOffset(b,a,n);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?e:this.unproject(c.add(E),n)},_limitOffset:function(e,n){if(!n)return e;var a=this.getPixelBounds(),c=new ce(a.min.add(e),a.max.add(e));return e.add(this._getBoundsOffset(c,n))},_getBoundsOffset:function(e,n,a){var c=_e(this.project(n.getNorthEast(),a),this.project(n.getSouthWest(),a)),p=c.min.subtract(e.min),b=c.max.subtract(e.max),E=this._rebound(p.x,-b.x),N=this._rebound(p.y,-b.y);return new ie(E,N)},_rebound:function(e,n){return e+n>0?Math.round(e-n)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(n))},_limitZoom:function(e){var n=this.getMinZoom(),a=this.getMaxZoom(),c=J.any3d?this.options.zoomSnap:1;return c&&(e=Math.round(e/c)*c),Math.max(n,Math.min(a,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,n){var a=this._getCenterOffset(e)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,n),!0)},_createAnimProxy:function(){var e=this._proxy=Ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(n){var a=Oa,c=this._proxy.style[a];ao(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),c===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),n=this.getZoom();ao(this._proxy,this.project(e,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,n,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(n),p=this._getCenterOffset(e)._divideBy(1-1/c);return a.animate!==!0&&!this.getSize().contains(p)?!1:(W(function(){this._moveStart(!0,a.noMoveStart||!1)._animateZoom(e,n,!0)},this),!0)},_animateZoom:function(e,n,a,c){!this._mapPane||(a&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=n,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:n,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yc(e,n){return new We(e,n)}var an=ve.extend({options:{position:"topright"},initialize:function(e){M(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var n=this._map;return n&&n.removeControl(this),this.options.position=e,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var n=this._container=this.onAdd(e),a=this.getPosition(),c=e._controlCorners[a];return Fe(n,"leaflet-control"),a.indexOf("bottom")!==-1?c.insertBefore(n,c.firstChild):c.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),ii=function(e){return new an(e)};We.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},n="leaflet-",a=this._controlContainer=Ye("div",n+"control-container",this._container);function c(p,b){var E=n+p+" "+n+b;e[p+b]=Ye("div",E,a)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)lt(this._controlCorners[e]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kr=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,n,a,c){return a<c?-1:c<a?1:0}},initialize:function(e,n,a){M(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in e)this._addLayer(e[c],c);for(c in n)this._addLayer(n[c],c,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return an.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,n){return this._addLayer(e,n),this._map?this._update():this},addOverlay:function(e,n){return this._addLayer(e,n,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var n=this._getLayer(h(e));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",n=this._container=Ye("div",e),a=this.options.collapsed;n.setAttribute("aria-haspopup",!0),oi(n),Ya(n);var c=this._section=Ye("section",e+"-list");a&&(this._map.on("click",this.collapse,this),Oe(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=Ye("a",e+"-toggle",n);p.href="#",p.title="Layers",p.setAttribute("role","button"),Oe(p,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){xt(b),this._expandSafely()}},this),a||this.expand(),this._baseLayersList=Ye("div",e+"-base",c),this._separator=Ye("div",e+"-separator",c),this._overlaysList=Ye("div",e+"-overlays",c),n.appendChild(c)},_getLayer:function(e){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&h(this._layers[n].layer)===e)return this._layers[n]},_addLayer:function(e,n,a){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:n,overlay:a}),this.options.sortLayers&&this._layers.sort(u(function(c,p){return this.options.sortFunction(c.layer,p.layer,c.name,p.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Li(this._baseLayersList),Li(this._overlaysList),this._layerControlInputs=[];var e,n,a,c,p=0;for(a=0;a<this._layers.length;a++)c=this._layers[a],this._addItem(c),n=n||c.overlay,e=e||!c.overlay,p+=c.overlay?0:1;return this.options.hideSingleBase&&(e=e&&p>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=n&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var n=this._getLayer(h(e.target)),a=n.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;a&&this._map.fire(a,n)},_createRadioElement:function(e,n){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(n?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=a,c.firstChild},_addItem:function(e){var n=document.createElement("label"),a=this._map.hasLayer(e.layer),c;e.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=a):c=this._createRadioElement("leaflet-base-layers_"+h(this),a),this._layerControlInputs.push(c),c.layerId=h(e.layer),Oe(c,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+e.name;var b=document.createElement("span");n.appendChild(b),b.appendChild(c),b.appendChild(p);var E=e.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,n,a,c=[],p=[];this._handlingClick=!0;for(var b=e.length-1;b>=0;b--)n=e[b],a=this._getLayer(n.layerId).layer,n.checked?c.push(a):n.checked||p.push(a);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])&&this._map.removeLayer(p[b]);for(b=0;b<c.length;b++)this._map.hasLayer(c[b])||this._map.addLayer(c[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,n,a,c=this._map.getZoom(),p=e.length-1;p>=0;p--)n=e[p],a=this._getLayer(n.layerId).layer,n.disabled=a.options.minZoom!==void 0&&c<a.options.minZoom||a.options.maxZoom!==void 0&&c>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Oe(e,"click",xt),this.expand();var n=this;setTimeout(function(){nt(e,"click",xt),n._preventClick=!1})}}),bc=function(e,n,a){return new kr(e,n,a)},Ka=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var n="leaflet-control-zoom",a=Ye("div",n+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,n+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,n+"-out",a,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,n,a,c,p){var b=Ye("a",a,c);return b.innerHTML=e,b.href="#",b.title=n,b.setAttribute("role","button"),b.setAttribute("aria-label",n),oi(b),Oe(b,"click",lo),Oe(b,"click",p,this),Oe(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var e=this._map,n="leaflet-disabled";ht(this._zoomInButton,n),ht(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(Fe(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(Fe(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});We.mergeOptions({zoomControl:!0}),We.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ka,this.addControl(this.zoomControl))});var wc=function(e){return new Ka(e)},Cr=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var n="leaflet-control-scale",a=Ye("div",n),c=this.options;return this._addScales(c,n+"-line",a),e.on(c.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),a},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,n,a){e.metric&&(this._mScale=Ye("div",n,a)),e.imperial&&(this._iScale=Ye("div",n,a))},_update:function(){var e=this._map,n=e.getSize().y/2,a=e.distance(e.containerPointToLatLng([0,n]),e.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(a)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var n=this._getRoundNum(e),a=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,a,n/e)},_updateImperial:function(e){var n=e*3.2808399,a,c,p;n>5280?(a=n/5280,c=this._getRoundNum(a),this._updateScale(this._iScale,c+" mi",c/a)):(p=this._getRoundNum(n),this._updateScale(this._iScale,p+" ft",p/n))},_updateScale:function(e,n,a){e.style.width=Math.round(this.options.maxWidth*a)+"px",e.innerHTML=n},_getRoundNum:function(e){var n=Math.pow(10,(Math.floor(e)+"").length-1),a=e/n;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,n*a}}),xc=function(e){return new Cr(e)},Pc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qa=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(J.inlineSvg?Pc+" ":"")+"Leaflet</a>"},initialize:function(e){M(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Ye("div","leaflet-control-attribution"),oi(this._container);for(var n in e._layers)e._layers[n].getAttribution&&this.addAttribution(e._layers[n].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(!!this._map){var e=[];for(var n in this._attributions)this._attributions[n]&&e.push(n);var a=[];this.options.prefix&&a.push(this.options.prefix),e.length&&a.push(e.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});We.mergeOptions({attributionControl:!0}),We.addInitHook(function(){this.options.attributionControl&&new Qa().addTo(this)});var kc=function(e){return new Qa(e)};an.Layers=kr,an.Zoom=Ka,an.Scale=Cr,an.Attribution=Qa,ii.layers=bc,ii.zoom=wc,ii.scale=xc,ii.attribution=kc;var vn=ve.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vn.addTo=function(e,n){return e.addHandler(n,this),this};var Cc={Events:Ae},Sr=J.touch?"touchstart mousedown":"mousedown",Fn=le.extend({options:{clickTolerance:3},initialize:function(e,n,a,c){M(this,c),this._element=e,this._dragStartTarget=n||e,this._preventOutline=a},enable:function(){this._enabled||(Oe(this._dragStartTarget,Sr,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Fn._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,Sr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!!this._enabled&&(this._moved=!1,!qa(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Fn._dragging===this&&this.finishDrag();return}if(!(Fn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Fn._dragging=this,this._preventOutline&&Ha(this._element),Fa(),ei(),!this._moving)){this.fire("down");var n=e.touches?e.touches[0]:e,a=_r(this._element);this._startPoint=new ie(n.clientX,n.clientY),this._startPos=so(this._element),this._parentScale=Va(a);var c=e.type==="mousedown";Oe(document,c?"mousemove":"touchmove",this._onMove,this),Oe(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(!!this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var n=e.touches&&e.touches.length===1?e.touches[0]:e,a=new ie(n.clientX,n.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,xt(e),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),vt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(e){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),Na(),ti();var n=this._moved&&this._moving;this._moving=!1,Fn._dragging=!1,n&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Tr(e,n,a){var c,p=[1,4,2,8],b,E,N,G,se,ye,Be,He;for(b=0,ye=e.length;b<ye;b++)e[b]._code=uo(e[b],n);for(N=0;N<4;N++){for(Be=p[N],c=[],b=0,ye=e.length,E=ye-1;b<ye;E=b++)G=e[b],se=e[E],G._code&Be?se._code&Be||(He=zi(se,G,Be,n,a),He._code=uo(He,n),c.push(He)):(se._code&Be&&(He=zi(se,G,Be,n,a),He._code=uo(He,n),c.push(He)),c.push(G));e=c}return e}function Lr(e,n){var a,c,p,b,E,N,G,se,ye;if(!e||e.length===0)throw new Error("latlngs not passed");Yt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Be=me([0,0]),He=Me(e),Mt=He.getNorthWest().distanceTo(He.getSouthWest())*He.getNorthEast().distanceTo(He.getNorthWest());Mt<1700&&(Be=Xa(e));var bt=e.length,Gt=[];for(a=0;a<bt;a++){var Ot=me(e[a]);Gt.push(n.project(me([Ot.lat-Be.lat,Ot.lng-Be.lng])))}for(N=G=se=0,a=0,c=bt-1;a<bt;c=a++)p=Gt[a],b=Gt[c],E=p.y*b.x-b.y*p.x,G+=(p.x+b.x)*E,se+=(p.y+b.y)*E,N+=E*3;N===0?ye=Gt[0]:ye=[G/N,se/N];var Eo=n.unproject(de(ye));return me([Eo.lat+Be.lat,Eo.lng+Be.lng])}function Xa(e){for(var n=0,a=0,c=0,p=0;p<e.length;p++){var b=me(e[p]);n+=b.lat,a+=b.lng,c++}return me([n/c,a/c])}var Sc={__proto__:null,clipPolygon:Tr,polygonCenter:Lr,centroid:Xa};function Mr(e,n){if(!n||!e.length)return e.slice();var a=n*n;return e=Mc(e,a),e=Lc(e,a),e}function Ar(e,n,a){return Math.sqrt(ai(e,n,a,!0))}function Tc(e,n,a){return ai(e,n,a)}function Lc(e,n){var a=e.length,c=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new c(a);p[0]=p[a-1]=1,Ja(e,p,n,0,a-1);var b,E=[];for(b=0;b<a;b++)p[b]&&E.push(e[b]);return E}function Ja(e,n,a,c,p){var b=0,E,N,G;for(N=c+1;N<=p-1;N++)G=ai(e[N],e[c],e[p],!0),G>b&&(E=N,b=G);b>a&&(n[E]=1,Ja(e,n,a,c,E),Ja(e,n,a,E,p))}function Mc(e,n){for(var a=[e[0]],c=1,p=0,b=e.length;c<b;c++)Ac(e[c],e[p])>n&&(a.push(e[c]),p=c);return p<b-1&&a.push(e[b-1]),a}var Br;function Er(e,n,a,c,p){var b=c?Br:uo(e,a),E=uo(n,a),N,G,se;for(Br=E;;){if(!(b|E))return[e,n];if(b&E)return!1;N=b||E,G=zi(e,n,N,a,p),se=uo(G,a),N===b?(e=G,b=se):(n=G,E=se)}}function zi(e,n,a,c,p){var b=n.x-e.x,E=n.y-e.y,N=c.min,G=c.max,se,ye;return a&8?(se=e.x+b*(G.y-e.y)/E,ye=G.y):a&4?(se=e.x+b*(N.y-e.y)/E,ye=N.y):a&2?(se=G.x,ye=e.y+E*(G.x-e.x)/b):a&1&&(se=N.x,ye=e.y+E*(N.x-e.x)/b),new ie(se,ye,p)}function uo(e,n){var a=0;return e.x<n.min.x?a|=1:e.x>n.max.x&&(a|=2),e.y<n.min.y?a|=4:e.y>n.max.y&&(a|=8),a}function Ac(e,n){var a=n.x-e.x,c=n.y-e.y;return a*a+c*c}function ai(e,n,a,c){var p=n.x,b=n.y,E=a.x-p,N=a.y-b,G=E*E+N*N,se;return G>0&&(se=((e.x-p)*E+(e.y-b)*N)/G,se>1?(p=a.x,b=a.y):se>0&&(p+=E*se,b+=N*se)),E=e.x-p,N=e.y-b,c?E*E+N*N:new ie(p,b)}function Yt(e){return!B(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]!="undefined"}function zr(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Yt(e)}function Dr(e,n){var a,c,p,b,E,N,G,se;if(!e||e.length===0)throw new Error("latlngs not passed");Yt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var ye=me([0,0]),Be=Me(e),He=Be.getNorthWest().distanceTo(Be.getSouthWest())*Be.getNorthEast().distanceTo(Be.getNorthWest());He<1700&&(ye=Xa(e));var Mt=e.length,bt=[];for(a=0;a<Mt;a++){var Gt=me(e[a]);bt.push(n.project(me([Gt.lat-ye.lat,Gt.lng-ye.lng])))}for(a=0,c=0;a<Mt-1;a++)c+=bt[a].distanceTo(bt[a+1])/2;if(c===0)se=bt[0];else for(a=0,b=0;a<Mt-1;a++)if(E=bt[a],N=bt[a+1],p=E.distanceTo(N),b+=p,b>c){G=(b-c)/p,se=[N.x-G*(N.x-E.x),N.y-G*(N.y-E.y)];break}var Ot=n.unproject(de(se));return me([Ot.lat+ye.lat,Ot.lng+ye.lng])}var Bc={__proto__:null,simplify:Mr,pointToSegmentDistance:Ar,closestPointOnSegment:Tc,clipSegment:Er,_getEdgeIntersection:zi,_getBitCode:uo,_sqClosestPointOnSegment:ai,isFlat:Yt,_flat:zr,polylineCenter:Dr},es={project:function(e){return new ie(e.lng,e.lat)},unproject:function(e){return new pe(e.y,e.x)},bounds:new ce([-180,-90],[180,90])},ts={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var n=Math.PI/180,a=this.R,c=e.lat*n,p=this.R_MINOR/a,b=Math.sqrt(1-p*p),E=b*Math.sin(c),N=Math.tan(Math.PI/4-c/2)/Math.pow((1-E)/(1+E),b/2);return c=-a*Math.log(Math.max(N,1e-10)),new ie(e.lng*n*a,c)},unproject:function(e){for(var n=180/Math.PI,a=this.R,c=this.R_MINOR/a,p=Math.sqrt(1-c*c),b=Math.exp(-e.y/a),E=Math.PI/2-2*Math.atan(b),N=0,G=.1,se;N<15&&Math.abs(G)>1e-7;N++)se=p*Math.sin(E),se=Math.pow((1-se)/(1+se),p/2),G=Math.PI/2-2*Math.atan(b*se)-E,E+=G;return new pe(E*n,e.x*n/a)}},Ec={__proto__:null,LonLat:es,Mercator:ts,SphericalMercator:Ee},zc=s({},Q,{code:"EPSG:3395",projection:ts,transformation:function(){var e=.5/(Math.PI*ts.R);return Ne(e,.5,-e,.5)}()}),$r=s({},Q,{code:"EPSG:4326",projection:es,transformation:Ne(1/180,1,-1/180,.5)}),Dc=s({},ge,{projection:es,transformation:Ne(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,n){var a=n.lng-e.lng,c=n.lat-e.lat;return Math.sqrt(a*a+c*c)},infinite:!0});ge.Earth=Q,ge.EPSG3395=zc,ge.EPSG3857=rt,ge.EPSG900913=mt,ge.EPSG4326=$r,ge.Simple=Dc;var sn=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[h(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[h(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var n=e.target;if(!!n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var a=this.getEvents();n.on(a,this),this.once("remove",function(){n.off(a,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});We.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var n=h(e);return this._layers[n]?this:(this._layers[n]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var n=h(e);return this._layers[n]?(this._loaded&&e.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return h(e)in this._layers},eachLayer:function(e,n){for(var a in this._layers)e.call(n,this._layers[a]);return this},_addLayers:function(e){e=e?B(e)?e:[e]:[];for(var n=0,a=e.length;n<a;n++)this.addLayer(e[n])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[h(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var n=h(e);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,n=-1/0,a=this._getZoomSpan();for(var c in this._zoomBoundLayers){var p=this._zoomBoundLayers[c].options;e=p.minZoom===void 0?e:Math.min(e,p.minZoom),n=p.maxZoom===void 0?n:Math.max(n,p.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=e===1/0?void 0:e,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var To=sn.extend({initialize:function(e,n){M(this,n),this._layers={};var a,c;if(e)for(a=0,c=e.length;a<c;a++)this.addLayer(e[a])},addLayer:function(e){var n=this.getLayerId(e);return this._layers[n]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var n=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(e){var n=typeof e=="number"?e:this.getLayerId(e);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var n=Array.prototype.slice.call(arguments,1),a,c;for(a in this._layers)c=this._layers[a],c[e]&&c[e].apply(c,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,n){for(var a in this._layers)e.call(n,this._layers[a]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return h(e)}}),$c=function(e,n){return new To(e,n)},Mn=To.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),To.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),To.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new we;for(var n in this._layers){var a=this._layers[n];e.extend(a.getBounds?a.getBounds():a.getLatLng())}return e}}),Oc=function(e,n){return new Mn(e,n)},Lo=ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){M(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,n){var a=this._getIconUrl(e);if(!a){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(a,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(c,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(e,n){var a=this.options,c=a[n+"Size"];typeof c=="number"&&(c=[c,c]);var p=de(c),b=de(n==="shadow"&&a.shadowAnchor||a.iconAnchor||p&&p.divideBy(2,!0));e.className="leaflet-marker-"+n+" "+(a.className||""),b&&(e.style.marginLeft=-b.x+"px",e.style.marginTop=-b.y+"px"),p&&(e.style.width=p.x+"px",e.style.height=p.y+"px")},_createImg:function(e,n){return n=n||document.createElement("img"),n.src=e,n},_getIconUrl:function(e){return J.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function qc(e){return new Lo(e)}var si=Lo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof si.imagePath!="string"&&(si.imagePath=this._detectIconPath()),(this.options.imagePath||si.imagePath)+Lo.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var n=function(a,c,p){var b=c.exec(a);return b&&b[p]};return e=n(e,/^url\((['"])?(.+)\1\)$/,2),e&&n(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Ye("div","leaflet-default-icon-path",document.body),n=Jo(e,"background-image")||Jo(e,"backgroundImage");if(document.body.removeChild(e),n=this._stripUrl(n),n)return n;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Or=vn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Fn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var n=this._marker,a=n._map,c=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,b=so(n._icon),E=a.getPixelBounds(),N=a.getPixelOrigin(),G=_e(E.min._subtract(N).add(p),E.max._subtract(N).subtract(p));if(!G.contains(b)){var se=de((Math.max(G.max.x,b.x)-G.max.x)/(E.max.x-G.max.x)-(Math.min(G.min.x,b.x)-G.min.x)/(E.min.x-G.min.x),(Math.max(G.max.y,b.y)-G.max.y)/(E.max.y-G.max.y)-(Math.min(G.min.y,b.y)-G.min.y)/(E.min.y-G.min.y)).multiplyBy(c);a.panBy(se,{animate:!1}),this._draggable._newPos._add(se),this._draggable._startPos._add(se),vt(n._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=W(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(oe(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,e)))},_onDrag:function(e){var n=this._marker,a=n._shadow,c=so(n._icon),p=n._map.layerPointToLatLng(c);a&&vt(a,c),n._latlng=p,e.latlng=p,e.oldLatLng=this._oldLatLng,n.fire("move",e).fire("drag",e)},_onDragEnd:function(e){oe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Di=sn.extend({options:{icon:new si,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,n){M(this,n),this._latlng=me(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var n=this._latlng;return this._latlng=me(e),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=e.icon.createIcon(this._icon),c=!1;a!==this._icon&&(this._icon&&this._removeIcon(),c=!0,e.title&&(a.title=e.title),a.tagName==="IMG"&&(a.alt=e.alt||"")),Fe(a,n),e.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(a,"focus",this._panOnFocus,this);var p=e.icon.createShadow(this._shadow),b=!1;p!==this._shadow&&(this._removeShadow(),b=!0),p&&(Fe(p,n),p.alt=""),this._shadow=p,e.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&b&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&vt(this._icon,e),this._shadow&&vt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(n)},_initInteraction:function(){if(!!this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Or)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Or(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Wt(this._icon,e),this._shadow&&Wt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(!!e){var n=this.options.icon.options,a=n.iconSize?de(n.iconSize):de(0,0),c=n.iconAnchor?de(n.iconAnchor):de(0,0);e.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:a.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ic(e,n){return new Di(e,n)}var Nn=sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return M(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$i=Nn.extend({options:{fill:!0,radius:10},initialize:function(e,n){M(this,n),this._latlng=me(e),this._radius=this.options.radius},setLatLng:function(e){var n=this._latlng;return this._latlng=me(e),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var n=e&&e.radius||this._radius;return Nn.prototype.setStyle.call(this,e),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,n=this._radiusY||e,a=this._clickTolerance(),c=[e+a,n+a];this._pxBounds=new ce(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rc(e,n){return new $i(e,n)}var ns=$i.extend({initialize:function(e,n,a){if(typeof n=="number"&&(n=s({},a,{radius:n})),M(this,n),this._latlng=me(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Nn.prototype.setStyle,_project:function(){var e=this._latlng.lng,n=this._latlng.lat,a=this._map,c=a.options.crs;if(c.distance===Q.distance){var p=Math.PI/180,b=this._mRadius/Q.R/p,E=a.project([n+b,e]),N=a.project([n-b,e]),G=E.add(N).divideBy(2),se=a.unproject(G).lat,ye=Math.acos((Math.cos(b*p)-Math.sin(n*p)*Math.sin(se*p))/(Math.cos(n*p)*Math.cos(se*p)))/p;(isNaN(ye)||ye===0)&&(ye=b/Math.cos(Math.PI/180*n)),this._point=G.subtract(a.getPixelOrigin()),this._radius=isNaN(ye)?0:G.x-a.project([se,e-ye]).x,this._radiusY=G.y-E.y}else{var Be=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(Be).x}this._updateBounds()}});function Fc(e,n,a){return new ns(e,n,a)}var An=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,n){M(this,n),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var n=1/0,a=null,c=ai,p,b,E=0,N=this._parts.length;E<N;E++)for(var G=this._parts[E],se=1,ye=G.length;se<ye;se++){p=G[se-1],b=G[se];var Be=c(e,p,b,!0);Be<n&&(n=Be,a=c(e,p,b))}return a&&(a.distance=Math.sqrt(n)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,n){return n=n||this._defaultShape(),e=me(e),n.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new we,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Yt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var n=[],a=Yt(e),c=0,p=e.length;c<p;c++)a?(n[c]=me(e[c]),this._bounds.extend(n[c])):n[c]=this._convertLatLngs(e[c]);return n},_project:function(){var e=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),n=new ie(e,e);!this._rawPxBounds||(this._pxBounds=new ce([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(e,n,a){var c=e[0]instanceof pe,p=e.length,b,E;if(c){for(E=[],b=0;b<p;b++)E[b]=this._map.latLngToLayerPoint(e[b]),a.extend(E[b]);n.push(E)}else for(b=0;b<p;b++)this._projectLatlngs(e[b],n,a)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,a,c,p,b,E,N,G;for(a=0,p=0,b=this._rings.length;a<b;a++)for(G=this._rings[a],c=0,E=G.length;c<E-1;c++)N=Er(G[c],G[c+1],e,c,!0),N&&(n[p]=n[p]||[],n[p].push(N[0]),(N[1]!==G[c+1]||c===E-2)&&(n[p].push(N[1]),p++))}},_simplifyPoints:function(){for(var e=this._parts,n=this.options.smoothFactor,a=0,c=e.length;a<c;a++)e[a]=Mr(e[a],n)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,n){var a,c,p,b,E,N,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,b=this._parts.length;a<b;a++)for(N=this._parts[a],c=0,E=N.length,p=E-1;c<E;p=c++)if(!(!n&&c===0)&&Ar(e,N[p],N[c])<=G)return!0;return!1}});function Nc(e,n){return new An(e,n)}An._flat=zr;var Mo=An.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var n=An.prototype._convertLatLngs.call(this,e),a=n.length;return a>=2&&n[0]instanceof pe&&n[0].equals(n[a-1])&&n.pop(),n},_setLatLngs:function(e){An.prototype._setLatLngs.call(this,e),Yt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Yt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,n=this.options.weight,a=new ie(n,n);if(e=new ce(e.min.subtract(a),e.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,p=this._rings.length,b;c<p;c++)b=Tr(this._rings[c],e,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var n=!1,a,c,p,b,E,N,G,se;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(b=0,G=this._parts.length;b<G;b++)for(a=this._parts[b],E=0,se=a.length,N=se-1;E<se;N=E++)c=a[E],p=a[N],c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(n=!n);return n||An.prototype._containsPoint.call(this,e,!0)}});function Zc(e,n){return new Mo(e,n)}var Bn=Mn.extend({initialize:function(e,n){M(this,n),this._layers={},e&&this.addData(e)},addData:function(e){var n=B(e)?e:e.features,a,c,p;if(n){for(a=0,c=n.length;a<c;a++)p=n[a],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var b=this.options;if(b.filter&&!b.filter(e))return this;var E=Oi(e,b);return E?(E.feature=Ri(e),E.defaultOptions=E.options,this.resetStyle(E),b.onEachFeature&&b.onEachFeature(e,E),this.addLayer(E)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=s({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(n){this._setLayerStyle(n,e)},this)},_setLayerStyle:function(e,n){e.setStyle&&(typeof n=="function"&&(n=n(e.feature)),e.setStyle(n))}});function Oi(e,n){var a=e.type==="Feature"?e.geometry:e,c=a?a.coordinates:null,p=[],b=n&&n.pointToLayer,E=n&&n.coordsToLatLng||os,N,G,se,ye;if(!c&&!a)return null;switch(a.type){case"Point":return N=E(c),qr(b,e,N,n);case"MultiPoint":for(se=0,ye=c.length;se<ye;se++)N=E(c[se]),p.push(qr(b,e,N,n));return new Mn(p);case"LineString":case"MultiLineString":return G=qi(c,a.type==="LineString"?0:1,E),new An(G,n);case"Polygon":case"MultiPolygon":return G=qi(c,a.type==="Polygon"?1:2,E),new Mo(G,n);case"GeometryCollection":for(se=0,ye=a.geometries.length;se<ye;se++){var Be=Oi({geometry:a.geometries[se],type:"Feature",properties:e.properties},n);Be&&p.push(Be)}return new Mn(p);case"FeatureCollection":for(se=0,ye=a.features.length;se<ye;se++){var He=Oi(a.features[se],n);He&&p.push(He)}return new Mn(p);default:throw new Error("Invalid GeoJSON object.")}}function qr(e,n,a,c){return e?e(n,a):new Di(a,c&&c.markersInheritOptions&&c)}function os(e){return new pe(e[1],e[0],e[2])}function qi(e,n,a){for(var c=[],p=0,b=e.length,E;p<b;p++)E=n?qi(e[p],n-1,a):(a||os)(e[p]),c.push(E);return c}function is(e,n){return e=me(e),e.alt!==void 0?[g(e.lng,n),g(e.lat,n),g(e.alt,n)]:[g(e.lng,n),g(e.lat,n)]}function Ii(e,n,a,c){for(var p=[],b=0,E=e.length;b<E;b++)p.push(n?Ii(e[b],Yt(e[b])?0:n-1,a,c):is(e[b],c));return!n&&a&&p.length>0&&p.push(p[0].slice()),p}function Ao(e,n){return e.feature?s({},e.feature,{geometry:n}):Ri(n)}function Ri(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var as={toGeoJSON:function(e){return Ao(this,{type:"Point",coordinates:is(this.getLatLng(),e)})}};Di.include(as),ns.include(as),$i.include(as),An.include({toGeoJSON:function(e){var n=!Yt(this._latlngs),a=Ii(this._latlngs,n?1:0,!1,e);return Ao(this,{type:(n?"Multi":"")+"LineString",coordinates:a})}}),Mo.include({toGeoJSON:function(e){var n=!Yt(this._latlngs),a=n&&!Yt(this._latlngs[0]),c=Ii(this._latlngs,a?2:n?1:0,!0,e);return n||(c=[c]),Ao(this,{type:(a?"Multi":"")+"Polygon",coordinates:c})}}),To.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(a){n.push(a.toGeoJSON(e).geometry.coordinates)}),Ao(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(e){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(e);var a=n==="GeometryCollection",c=[];return this.eachLayer(function(p){if(p.toGeoJSON){var b=p.toGeoJSON(e);if(a)c.push(b.geometry);else{var E=Ri(b);E.type==="FeatureCollection"?c.push.apply(c,E.features):c.push(E)}}}),a?Ao(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Ir(e,n){return new Bn(e,n)}var Hc=Ir,Fi=sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,n,a){this._url=e,this._bounds=Me(n),M(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Co(this._image),this},bringToBack:function(){return this._map&&So(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=Me(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",n=this._image=e?this._url:Ye("img");if(Fe(n,"leaflet-image-layer"),this._zoomAnimated&&Fe(n,"leaflet-zoom-animated"),this.options.className&&Fe(n,this.options.className),n.onselectstart=v,n.onmousemove=v,n.onload=u(this.fire,this,"load"),n.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;ao(this._image,a,n)},_reset:function(){var e=this._image,n=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=n.getSize();vt(e,n.min),e.style.width=a.x+"px",e.style.height=a.y+"px"},_updateOpacity:function(){Wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Vc=function(e,n,a){return new Fi(e,n,a)},Rr=Fi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",n=this._image=e?this._url:Ye("video");if(Fe(n,"leaflet-image-layer"),this._zoomAnimated&&Fe(n,"leaflet-zoom-animated"),this.options.className&&Fe(n,this.options.className),n.onselectstart=v,n.onmousemove=v,n.onloadeddata=u(this.fire,this,"load"),e){for(var a=n.getElementsByTagName("source"),c=[],p=0;p<a.length;p++)c.push(a[p].src);this._url=a.length>0?c:[n.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var E=Ye("source");E.src=this._url[b],n.appendChild(E)}}});function Uc(e,n,a){return new Rr(e,n,a)}var Fr=Fi.extend({_initImage:function(){var e=this._image=this._url;Fe(e,"leaflet-image-layer"),this._zoomAnimated&&Fe(e,"leaflet-zoom-animated"),this.options.className&&Fe(e,this.options.className),e.onselectstart=v,e.onmousemove=v}});function jc(e,n,a){return new Fr(e,n,a)}var gn=sn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,n){e&&(e instanceof pe||B(e))?(this._latlng=me(e),M(this,n)):(M(this,e),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Wt(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Wt(this._container,0),this._removeTimeout=setTimeout(u(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=me(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Co(this._container),this},bringToBack:function(){return this._map&&So(this._container),this},_prepareOpen:function(e){var n=this._source;if(!n._map)return!1;if(n instanceof Mn){n=null;var a=this._source._layers;for(var c in a)if(a[c]._map){n=a[c];break}if(!n)return!1;this._source=n}if(!e)if(n.getCenter)e=n.getCenter();else if(n.getLatLng)e=n.getLatLng();else if(n.getBounds)e=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var e=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")e.innerHTML=n;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var e=this._map.latLngToLayerPoint(this._latlng),n=de(this.options.offset),a=this._getAnchor();this._zoomAnimated?vt(this._container,e.add(a)):n=n.add(e).add(a);var c=this._containerBottom=-n.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=c+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});We.include({_initOverlay:function(e,n,a,c){var p=n;return p instanceof e||(p=new e(c).setContent(n)),a&&p.setLatLng(a),p}}),sn.include({_initOverlay:function(e,n,a,c){var p=a;return p instanceof e?(M(p,c),p._source=this):(p=n&&!c?n:new e(c,this),p.setContent(a)),p}});var Ni=gn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,gn.prototype.openOn.call(this,e)},onAdd:function(e){gn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",ro))},onRemove:function(e){gn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",ro))},getEvents:function(){var e=gn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",n=this._container=Ye("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=Ye("div",e+"-content-wrapper",n);if(this._contentNode=Ye("div",e+"-content",a),oi(n),Ya(this._contentNode),Oe(n,"contextmenu",ro),this._tipContainer=Ye("div",e+"-tip-container",n),this._tip=Ye("div",e+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Ye("a",e+"-close-button",n);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(c,"click",function(p){xt(p),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,n=e.style;n.width="",n.whiteSpace="nowrap";var a=e.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),n.width=a+1+"px",n.whiteSpace="",n.height="";var c=e.offsetHeight,p=this.options.maxHeight,b="leaflet-popup-scrolled";p&&c>p?(n.height=p+"px",Fe(e,b)):ht(e,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),a=this._getAnchor();vt(this._container,n.add(a))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,n=parseInt(Jo(this._container,"marginBottom"),10)||0,a=this._container.offsetHeight+n,c=this._containerWidth,p=new ie(this._containerLeft,-a-this._containerBottom);p._add(so(this._container));var b=e.layerPointToContainerPoint(p),E=de(this.options.autoPanPadding),N=de(this.options.autoPanPaddingTopLeft||E),G=de(this.options.autoPanPaddingBottomRight||E),se=e.getSize(),ye=0,Be=0;b.x+c+G.x>se.x&&(ye=b.x+c-se.x+G.x),b.x-ye-N.x<0&&(ye=b.x-N.x),b.y+a+G.y>se.y&&(Be=b.y+a-se.y+G.y),b.y-Be-N.y<0&&(Be=b.y-N.y),(ye||Be)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([ye,Be]))}},_getAnchor:function(){return de(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Wc=function(e,n){return new Ni(e,n)};We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(e,n,a){return this._initOverlay(Ni,e,n,a).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),sn.include({bindPopup:function(e,n){return this._popup=this._initOverlay(Ni,this._popup,e,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Mn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){lo(e);var n=e.layer||e.target;if(this._popup._source===n&&!(n instanceof Nn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=n,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Zi=gn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){gn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){gn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=gn.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",n=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ye("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var n,a,c=this._map,p=this._container,b=c.latLngToContainerPoint(c.getCenter()),E=c.layerPointToContainerPoint(e),N=this.options.direction,G=p.offsetWidth,se=p.offsetHeight,ye=de(this.options.offset),Be=this._getAnchor();N==="top"?(n=G/2,a=se):N==="bottom"?(n=G/2,a=0):N==="center"?(n=G/2,a=se/2):N==="right"?(n=0,a=se/2):N==="left"?(n=G,a=se/2):E.x<b.x?(N="right",n=0,a=se/2):(N="left",n=G+(ye.x+Be.x)*2,a=se/2),e=e.subtract(de(n,a,!0)).add(ye).add(Be),ht(p,"leaflet-tooltip-right"),ht(p,"leaflet-tooltip-left"),ht(p,"leaflet-tooltip-top"),ht(p,"leaflet-tooltip-bottom"),Fe(p,"leaflet-tooltip-"+N),vt(p,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Wt(this._container,e)},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(n)},_getAnchor:function(){return de(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yc=function(e,n){return new Zi(e,n)};We.include({openTooltip:function(e,n,a){return this._initOverlay(Zi,e,n,a).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),sn.include({bindTooltip:function(e,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zi,this._tooltip,e,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var n=e?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[n](a),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Mn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var n=typeof e.getElement=="function"&&e.getElement();n&&(Oe(n,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Oe(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var n=typeof e.getElement=="function"&&e.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var n=e.latlng,a,c;this._tooltip.options.sticky&&e.originalEvent&&(a=this._map.mouseEventToContainerPoint(e.originalEvent),c=this._map.containerPointToLayerPoint(a),n=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(n)}});var Nr=Lo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var n=e&&e.tagName==="DIV"?e:document.createElement("div"),a=this.options;if(a.html instanceof Element?(Li(n),n.appendChild(a.html)):n.innerHTML=a.html!==!1?a.html:"",a.bgPos){var c=de(a.bgPos);n.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function Gc(e){return new Nr(e)}Lo.Default=si;var ri=sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:J.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){M(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),lt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Co(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(So(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof ie?e:new ie(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var n=this.getPane().children,a=-e(-1/0,1/0),c=0,p=n.length,b;c<p;c++)b=n[c].style.zIndex,n[c]!==this._container&&b&&(a=e(a,+b));isFinite(a)&&(this.options.zIndex=a+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!J.ielt9){Wt(this._container,this.options.opacity);var e=+new Date,n=!1,a=!1;for(var c in this._tiles){var p=this._tiles[c];if(!(!p.current||!p.loaded)){var b=Math.min(1,(e-p.loaded)/200);Wt(p.el,b),b<1?n=!0:(p.active?a=!0:this._onOpaqueTile(p),p.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),n&&(oe(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,n=this.options.maxZoom;if(e!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===e?(this._levels[a].el.style.zIndex=n-Math.abs(e-a),this._onUpdateLevel(a)):(lt(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var c=this._levels[e],p=this._map;return c||(c=this._levels[e]={},c.el=Ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=n,c.origin=p.project(p.unproject(p.getPixelOrigin()),e).round(),c.zoom=e,this._setZoomTransform(c,p.getCenter(),p.getZoom()),v(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(!!this._map){var e,n,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)n=this._tiles[e],n.retain=n.current;for(e in this._tiles)if(n=this._tiles[e],n.current&&!n.active){var c=n.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var n in this._tiles)this._tiles[n].coords.z===e&&this._removeTile(n)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)lt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,n,a,c){var p=Math.floor(e/2),b=Math.floor(n/2),E=a-1,N=new ie(+p,+b);N.z=+E;var G=this._tileCoordsToKey(N),se=this._tiles[G];return se&&se.active?(se.retain=!0,!0):(se&&se.loaded&&(se.retain=!0),E>c?this._retainParent(p,b,E,c):!1)},_retainChildren:function(e,n,a,c){for(var p=2*e;p<2*e+2;p++)for(var b=2*n;b<2*n+2;b++){var E=new ie(p,b);E.z=a+1;var N=this._tileCoordsToKey(E),G=this._tiles[N];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);a+1<c&&this._retainChildren(p,b,a+1,c)}},_resetView:function(e){var n=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var n=this.options;return n.minNativeZoom!==void 0&&e<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<e?n.maxNativeZoom:e},_setView:function(e,n,a,c){var p=Math.round(n);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var b=this.options.updateWhenZooming&&p!==this._tileZoom;(!c||b)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(e),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(e,n)},_setZoomTransforms:function(e,n){for(var a in this._levels)this._setZoomTransform(this._levels[a],e,n)},_setZoomTransform:function(e,n,a){var c=this._map.getZoomScale(a,e.zoom),p=e.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(n,a)).round();J.any3d?ao(e.el,p,c):vt(e.el,p)},_resetGrid:function(){var e=this._map,n=e.options.crs,a=this._tileSize=this.getTileSize(),c=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,n.wrapLng[0]],c).x/a.x),Math.ceil(e.project([0,n.wrapLng[1]],c).x/a.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([n.wrapLat[0],0],c).y/a.x),Math.ceil(e.project([n.wrapLat[1],0],c).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var n=this._map,a=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),c=n.getZoomScale(a,this._tileZoom),p=n.project(e,this._tileZoom).floor(),b=n.getSize().divideBy(c*2);return new ce(p.subtract(b),p.add(b))},_update:function(e){var n=this._map;if(!!n){var a=this._clampZoom(n.getZoom());if(e===void 0&&(e=n.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(e),p=this._pxBoundsToTileRange(c),b=p.getCenter(),E=[],N=this.options.keepBuffer,G=new ce(p.getBottomLeft().subtract([N,-N]),p.getTopRight().add([N,-N]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var se in this._tiles){var ye=this._tiles[se].coords;(ye.z!==this._tileZoom||!G.contains(new ie(ye.x,ye.y)))&&(this._tiles[se].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(e,a);return}for(var Be=p.min.y;Be<=p.max.y;Be++)for(var He=p.min.x;He<=p.max.x;He++){var Mt=new ie(He,Be);if(Mt.z=this._tileZoom,!!this._isValidTile(Mt)){var bt=this._tiles[this._tileCoordsToKey(Mt)];bt?bt.current=!0:E.push(Mt)}}if(E.sort(function(Ot,Eo){return Ot.distanceTo(b)-Eo.distanceTo(b)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gt=document.createDocumentFragment();for(He=0;He<E.length;He++)this._addTile(E[He],Gt);this._level.el.appendChild(Gt)}}}},_isValidTile:function(e){var n=this._map.options.crs;if(!n.infinite){var a=this._globalTileRange;if(!n.wrapLng&&(e.x<a.min.x||e.x>a.max.x)||!n.wrapLat&&(e.y<a.min.y||e.y>a.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(e);return Me(this.options.bounds).overlaps(c)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var n=this._map,a=this.getTileSize(),c=e.scaleBy(a),p=c.add(a),b=n.unproject(c,e.z),E=n.unproject(p,e.z);return[b,E]},_tileCoordsToBounds:function(e){var n=this._tileCoordsToNwSe(e),a=new we(n[0],n[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var n=e.split(":"),a=new ie(+n[0],+n[1]);return a.z=+n[2],a},_removeTile:function(e){var n=this._tiles[e];!n||(lt(n.el),delete this._tiles[e],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Fe(e,"leaflet-tile");var n=this.getTileSize();e.style.width=n.x+"px",e.style.height=n.y+"px",e.onselectstart=v,e.onmousemove=v,J.ielt9&&this.options.opacity<1&&Wt(e,this.options.opacity)},_addTile:function(e,n){var a=this._getTilePos(e),c=this._tileCoordsToKey(e),p=this.createTile(this._wrapCoords(e),u(this._tileReady,this,e));this._initTile(p),this.createTile.length<2&&W(u(this._tileReady,this,e,null,p)),vt(p,a),this._tiles[c]={el:p,coords:e,current:!0},n.appendChild(p),this.fire("tileloadstart",{tile:p,coords:e})},_tileReady:function(e,n,a){n&&this.fire("tileerror",{error:n,tile:a,coords:e});var c=this._tileCoordsToKey(e);a=this._tiles[c],a&&(a.loaded=+new Date,this._map._fadeAnimated?(Wt(a.el,0),oe(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),n||(Fe(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var n=new ie(this._wrapX?m(e.x,this._wrapX):e.x,this._wrapY?m(e.y,this._wrapY):e.y);return n.z=e.z,n},_pxBoundsToTileRange:function(e){var n=this.getTileSize();return new ce(e.min.unscaleBy(n).floor(),e.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Kc(e){return new ri(e)}var Bo=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,n){this._url=e,n=M(this,n),n.detectRetina&&J.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,n){return this._url===e&&n===void 0&&(n=!0),this._url=e,n||this.redraw(),this},createTile:function(e,n){var a=document.createElement("img");return Oe(a,"load",u(this._tileOnLoad,this,n,a)),Oe(a,"error",u(this._tileOnError,this,n,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(e),a},getTileUrl:function(e){var n={r:J.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-e.y;this.options.tms&&(n.y=a),n["-y"]=a}return ee(this._url,s(n,this.options))},_tileOnLoad:function(e,n){J.ielt9?setTimeout(u(e,this,null,n),0):e(null,n)},_tileOnError:function(e,n,a){var c=this.options.errorTileUrl;c&&n.getAttribute("src")!==c&&(n.src=c),e(a,n)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,n=this.options.maxZoom,a=this.options.zoomReverse,c=this.options.zoomOffset;return a&&(e=n-e),e+c},_getSubdomain:function(e){var n=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var e,n;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(n=this._tiles[e].el,n.onload=v,n.onerror=v,!n.complete)){n.src=D;var a=this._tiles[e].coords;lt(n),delete this._tiles[e],this.fire("tileabort",{tile:n,coords:a})}},_removeTile:function(e){var n=this._tiles[e];if(!!n)return n.el.setAttribute("src",D),ri.prototype._removeTile.call(this,e)},_tileReady:function(e,n,a){if(!(!this._map||a&&a.getAttribute("src")===D))return ri.prototype._tileReady.call(this,e,n,a)}});function Zr(e,n){return new Bo(e,n)}var Hr=Bo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,n){this._url=e;var a=s({},this.defaultWmsParams);for(var c in n)c in this.options||(a[c]=n[c]);n=M(this,n);var p=n.detectRetina&&J.retina?2:1,b=this.getTileSize();a.width=b.x*p,a.height=b.y*p,this.wmsParams=a},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,Bo.prototype.onAdd.call(this,e)},getTileUrl:function(e){var n=this._tileCoordsToNwSe(e),a=this._crs,c=_e(a.project(n[0]),a.project(n[1])),p=c.min,b=c.max,E=(this._wmsVersion>=1.3&&this._crs===$r?[p.y,p.x,b.y,b.x]:[p.x,p.y,b.x,b.y]).join(","),N=Bo.prototype.getTileUrl.call(this,e);return N+q(this.wmsParams,N,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(e,n){return s(this.wmsParams,e),n||this.redraw(),this}});function Qc(e,n){return new Hr(e,n)}Bo.WMS=Hr,Zr.wms=Qc;var En=sn.extend({options:{padding:.1},initialize:function(e){M(this,e),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,n){var a=this._map.getZoomScale(n,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,n),b=c.multiplyBy(-a).add(p).subtract(this._map._getNewPixelOrigin(e,n));J.any3d?ao(this._container,b,a):vt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,n=this._map.getSize(),a=this._map.containerPointToLayerPoint(n.multiplyBy(-e)).round();this._bounds=new ce(a,a.add(n.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vr=En.extend({options:{tolerance:0},getEvents:function(){var e=En.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){En.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Oe(e,"mousemove",this._onMouseMove,this),Oe(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){oe(this._redrawRequest),delete this._ctx,lt(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var n in this._layers)e=this._layers[n],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var e=this._bounds,n=this._container,a=e.getSize(),c=J.retina?2:1;vt(n,e.min),n.width=c*a.x,n.height=c*a.y,n.style.width=a.x+"px",n.style.height=a.y+"px",J.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){En.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[h(e)]=e;var n=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var n=e._order,a=n.next,c=n.prev;a?a.prev=c:this._drawLast=c,c?c.next=a:this._drawFirst=a,delete e._order,delete this._layers[h(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var n=e.options.dashArray.split(/[, ]+/),a=[],c,p;for(p=0;p<n.length;p++){if(c=Number(n[p]),isNaN(c))return;a.push(c)}e.options._dashArray=a}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){!this._map||(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var n=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(e._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(e._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var n=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,n=this._redrawBounds;if(this._ctx.save(),n){var a=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)e=c.layer,(!n||e._pxBounds&&e._pxBounds.intersects(n))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,n){if(!!this._drawing){var a,c,p,b,E=e._parts,N=E.length,G=this._ctx;if(!!N){for(G.beginPath(),a=0;a<N;a++){for(c=0,p=E[a].length;c<p;c++)b=E[a][c],G[c?"lineTo":"moveTo"](b.x,b.y);n&&G.closePath()}this._fillStroke(G,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var n=e._point,a=this._ctx,c=Math.max(Math.round(e._radius),1),p=(Math.max(Math.round(e._radiusY),1)||c)/c;p!==1&&(a.save(),a.scale(1,p)),a.beginPath(),a.arc(n.x,n.y/p,c,0,Math.PI*2,!1),p!==1&&a.restore(),this._fillStroke(a,e)}},_fillStroke:function(e,n){var a=n.options;a.fill&&(e.globalAlpha=a.fillOpacity,e.fillStyle=a.fillColor||a.color,e.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(e.setLineDash&&e.setLineDash(n.options&&n.options._dashArray||[]),e.globalAlpha=a.opacity,e.lineWidth=a.weight,e.strokeStyle=a.color,e.lineCap=a.lineCap,e.lineJoin=a.lineJoin,e.stroke())},_onClick:function(e){for(var n=this._map.mouseEventToLayerPoint(e),a,c,p=this._drawFirst;p;p=p.next)a=p.layer,a.options.interactive&&a._containsPoint(n)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(a))&&(c=a);this._fireEvent(c?[c]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,n)}},_handleMouseOut:function(e){var n=this._hoveredLayer;n&&(ht(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,n){if(!this._mouseHoverThrottled){for(var a,c,p=this._drawFirst;p;p=p.next)a=p.layer,a.options.interactive&&a._containsPoint(n)&&(c=a);c!==this._hoveredLayer&&(this._handleMouseOut(e),c&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([c],e,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,n,a){this._map._fireDOMEvent(n,a||n.type,e)},_bringToFront:function(e){var n=e._order;if(!!n){var a=n.next,c=n.prev;if(a)a.prev=c;else return;c?c.next=a:a&&(this._drawFirst=a),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(e)}},_bringToBack:function(e){var n=e._order;if(!!n){var a=n.next,c=n.prev;if(c)c.next=a;else return;a?a.prev=c:c&&(this._drawLast=c),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(e)}}});function Ur(e){return J.canvas?new Vr(e):null}var li=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Xc={_initContainer:function(){this._container=Ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(En.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var n=e._container=li("shape");Fe(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",e._path=li("path"),n.appendChild(e._path),this._updateStyle(e),this._layers[h(e)]=e},_addPath:function(e){var n=e._container;this._container.appendChild(n),e.options.interactive&&e.addInteractiveTarget(n)},_removePath:function(e){var n=e._container;lt(n),e.removeInteractiveTarget(n),delete this._layers[h(e)]},_updateStyle:function(e){var n=e._stroke,a=e._fill,c=e.options,p=e._container;p.stroked=!!c.stroke,p.filled=!!c.fill,c.stroke?(n||(n=e._stroke=li("stroke")),p.appendChild(n),n.weight=c.weight+"px",n.color=c.color,n.opacity=c.opacity,c.dashArray?n.dashStyle=B(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=c.lineCap.replace("butt","flat"),n.joinstyle=c.lineJoin):n&&(p.removeChild(n),e._stroke=null),c.fill?(a||(a=e._fill=li("fill")),p.appendChild(a),a.color=c.fillColor||c.color,a.opacity=c.fillOpacity):a&&(p.removeChild(a),e._fill=null)},_updateCircle:function(e){var n=e._point.round(),a=Math.round(e._radius),c=Math.round(e._radiusY||a);this._setPath(e,e._empty()?"M0 0":"AL "+n.x+","+n.y+" "+a+","+c+" 0,"+65535*360)},_setPath:function(e,n){e._path.v=n},_bringToFront:function(e){Co(e._container)},_bringToBack:function(e){So(e._container)}},Hi=J.vml?li:Vt,ui=En.extend({_initContainer:function(){this._container=Hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var e=this._bounds,n=e.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,a.setAttribute("width",n.x),a.setAttribute("height",n.y)),vt(a,e.min),a.setAttribute("viewBox",[e.min.x,e.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(e){var n=e._path=Hi("path");e.options.className&&Fe(n,e.options.className),e.options.interactive&&Fe(n,"leaflet-interactive"),this._updateStyle(e),this._layers[h(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){lt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[h(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var n=e._path,a=e.options;!n||(a.stroke?(n.setAttribute("stroke",a.color),n.setAttribute("stroke-opacity",a.opacity),n.setAttribute("stroke-width",a.weight),n.setAttribute("stroke-linecap",a.lineCap),n.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?n.setAttribute("stroke-dasharray",a.dashArray):n.removeAttribute("stroke-dasharray"),a.dashOffset?n.setAttribute("stroke-dashoffset",a.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),a.fill?(n.setAttribute("fill",a.fillColor||a.color),n.setAttribute("fill-opacity",a.fillOpacity),n.setAttribute("fill-rule",a.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(e,n){this._setPath(e,Ut(e._parts,n))},_updateCircle:function(e){var n=e._point,a=Math.max(Math.round(e._radius),1),c=Math.max(Math.round(e._radiusY),1)||a,p="a"+a+","+c+" 0 1,0 ",b=e._empty()?"M0 0":"M"+(n.x-a)+","+n.y+p+a*2+",0 "+p+-a*2+",0 ";this._setPath(e,b)},_setPath:function(e,n){e._path.setAttribute("d",n)},_bringToFront:function(e){Co(e._path)},_bringToBack:function(e){So(e._path)}});J.vml&&ui.include(Xc);function jr(e){return J.svg||J.vml?new ui(e):null}We.include({getRenderer:function(e){var n=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var n=this._paneRenderers[e];return n===void 0&&(n=this._createRenderer({pane:e}),this._paneRenderers[e]=n),n},_createRenderer:function(e){return this.options.preferCanvas&&Ur(e)||jr(e)}});var Wr=Mo.extend({initialize:function(e,n){Mo.prototype.initialize.call(this,this._boundsToLatLngs(e),n)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=Me(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Jc(e,n){return new Wr(e,n)}ui.create=Hi,ui.pointsToPath=Ut,Bn.geometryToLayer=Oi,Bn.coordsToLatLng=os,Bn.coordsToLatLngs=qi,Bn.latLngToCoords=is,Bn.latLngsToCoords=Ii,Bn.getFeature=Ao,Bn.asFeature=Ri,We.mergeOptions({boxZoom:!0});var Yr=vn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ei(),Fa(),this._startPoint=this._map.mouseEventToContainerPoint(e),Oe(document,{contextmenu:lo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Ye("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var n=new ce(this._point,this._startPoint),a=n.getSize();vt(this._box,n.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(lt(this._box),ht(this._container,"leaflet-crosshair")),ti(),Na(),nt(document,{contextmenu:lo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var n=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});We.addInitHook("addHandler","boxZoom",Yr),We.mergeOptions({doubleClickZoom:!0});var Gr=vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var n=this._map,a=n.getZoom(),c=n.options.zoomDelta,p=e.originalEvent.shiftKey?a-c:a+c;n.options.doubleClickZoom==="center"?n.setZoom(p):n.setZoomAround(e.containerPoint,p)}});We.addInitHook("addHandler","doubleClickZoom",Gr),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kr=vn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Fn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=Me(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var n=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(n),this._prunePositions(n)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,n){return e-(e-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;e.x<n.min.x&&(e.x=this._viscousLimit(e.x,n.min.x)),e.y<n.min.y&&(e.y=this._viscousLimit(e.y,n.min.y)),e.x>n.max.x&&(e.x=this._viscousLimit(e.x,n.max.x)),e.y>n.max.y&&(e.y=this._viscousLimit(e.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,n=Math.round(e/2),a=this._initialWorldOffset,c=this._draggable._newPos.x,p=(c-n+a)%e+n-a,b=(c+n+a)%e-n-a,E=Math.abs(p+a)<Math.abs(b+a)?p:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(e){var n=this._map,a=n.options,c=!a.inertia||e.noInertia||this._times.length<2;if(n.fire("dragend",e),c)n.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,E=a.easeLinearity,N=p.multiplyBy(E/b),G=N.distanceTo([0,0]),se=Math.min(a.inertiaMaxSpeed,G),ye=N.multiplyBy(se/G),Be=se/(a.inertiaDeceleration*E),He=ye.multiplyBy(-Be/2).round();!He.x&&!He.y?n.fire("moveend"):(He=n._limitOffset(He,n.options.maxBounds),W(function(){n.panBy(He,{duration:Be,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});We.addInitHook("addHandler","dragging",Kr),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qr=vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Oe(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,n=document.documentElement,a=e.scrollTop||n.scrollTop,c=e.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(c,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var n=this._panKeys={},a=this.keyCodes,c,p;for(c=0,p=a.left.length;c<p;c++)n[a.left[c]]=[-1*e,0];for(c=0,p=a.right.length;c<p;c++)n[a.right[c]]=[e,0];for(c=0,p=a.down.length;c<p;c++)n[a.down[c]]=[0,e];for(c=0,p=a.up.length;c<p;c++)n[a.up[c]]=[0,-1*e]},_setZoomDelta:function(e){var n=this._zoomKeys={},a=this.keyCodes,c,p;for(c=0,p=a.zoomIn.length;c<p;c++)n[a.zoomIn[c]]=e;for(c=0,p=a.zoomOut.length;c<p;c++)n[a.zoomOut[c]]=-e},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=e.keyCode,a=this._map,c;if(n in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(c=this._panKeys[n],e.shiftKey&&(c=de(c).multiplyBy(3)),a.options.maxBounds&&(c=a._limitOffset(de(c),a.options.maxBounds)),a.options.worldCopyJump){var p=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(c)));a.panTo(p)}else a.panBy(c)}else if(n in this._zoomKeys)a.setZoom(a.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;lo(e)}}});We.addInitHook("addHandler","keyboard",Qr),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xr=vn.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var n=xr(e),a=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var c=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),lo(e)},_performZoom:function(){var e=this._map,n=e.getZoom(),a=this._map.options.zoomSnap||0;e._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,b=a?Math.ceil(p/a)*a:p,E=e._limitZoom(n+(this._delta>0?b:-b))-n;this._delta=0,this._startTime=null,E&&(e.options.scrollWheelZoom==="center"?e.setZoom(n+E):e.setZoomAround(this._lastMousePos,n+E))}});We.addInitHook("addHandler","scrollWheelZoom",Xr);var ed=600;We.mergeOptions({tapHold:J.touchNative&&J.safari&&J.mobile,tapTolerance:15});var Jr=vn.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var n=e.touches[0];this._startPos=this._newPos=new ie(n.clientX,n.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",xt),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),ed),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){nt(document,"touchend",xt),nt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(e){var n=e.touches[0];this._newPos=new ie(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,n){var a=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});a._simulated=!0,n.target.dispatchEvent(a)}});We.addInitHook("addHandler","tapHold",Jr),We.mergeOptions({touchZoom:J.touch,bounceAtZoomLimits:!0});var el=vn.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(!(!e.touches||e.touches.length!==2||n._animatingZoom||this._zooming)){var a=n.mouseEventToContainerPoint(e.touches[0]),c=n.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(a.add(c)._divideBy(2))),this._startDist=a.distanceTo(c),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),xt(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var n=this._map,a=n.mouseEventToContainerPoint(e.touches[0]),c=n.mouseEventToContainerPoint(e.touches[1]),p=a.distanceTo(c)/this._startDist;if(this._zoom=n.getScaleZoom(p,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&p<1||this._zoom>n.getMaxZoom()&&p>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var b=a._add(c)._divideBy(2)._subtract(this._centerPoint);if(p===1&&b.x===0&&b.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),oe(this._animRequest);var E=u(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(E,this,!0),xt(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,oe(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});We.addInitHook("addHandler","touchZoom",el),We.BoxZoom=Yr,We.DoubleClickZoom=Gr,We.Drag=Kr,We.Keyboard=Qr,We.ScrollWheelZoom=Xr,We.TapHold=Jr,We.TouchZoom=el,i.Bounds=ce,i.Browser=J,i.CRS=ge,i.Canvas=Vr,i.Circle=ns,i.CircleMarker=$i,i.Class=ve,i.Control=an,i.DivIcon=Nr,i.DivOverlay=gn,i.DomEvent=_c,i.DomUtil=vc,i.Draggable=Fn,i.Evented=le,i.FeatureGroup=Mn,i.GeoJSON=Bn,i.GridLayer=ri,i.Handler=vn,i.Icon=Lo,i.ImageOverlay=Fi,i.LatLng=pe,i.LatLngBounds=we,i.Layer=sn,i.LayerGroup=To,i.LineUtil=Bc,i.Map=We,i.Marker=Di,i.Mixin=Cc,i.Path=Nn,i.Point=ie,i.PolyUtil=Sc,i.Polygon=Mo,i.Polyline=An,i.Popup=Ni,i.PosAnimation=Pr,i.Projection=Ec,i.Rectangle=Wr,i.Renderer=En,i.SVG=ui,i.SVGOverlay=Fr,i.TileLayer=Bo,i.Tooltip=Zi,i.Transformation=De,i.Util=re,i.VideoOverlay=Rr,i.bind=u,i.bounds=_e,i.canvas=Ur,i.circle=Fc,i.circleMarker=Rc,i.control=ii,i.divIcon=Gc,i.extend=s,i.featureGroup=Oc,i.geoJSON=Ir,i.geoJson=Hc,i.gridLayer=Kc,i.icon=qc,i.imageOverlay=Vc,i.latLng=me,i.latLngBounds=Me,i.layerGroup=$c,i.map=yc,i.marker=Ic,i.point=de,i.polygon=Zc,i.polyline=Nc,i.popup=Wc,i.rectangle=Jc,i.setOptions=M,i.stamp=h,i.svg=jr,i.svgOverlay=jc,i.tileLayer=Zr,i.tooltip=Yc,i.transformation=Ne,i.version=r,i.videoOverlay=Uc;var td=window.L;i.noConflict=function(){return window.L=td,this},window.L=i})})(sa,sa.exports);var Xe=sa.exports,vm=nh({__proto__:null,default:Xe},[sa.exports]);function gm(){Xe.Curve=Xe.Path.extend({options:{},initialize:function(t,o){Xe.setOptions(this,o),this._setPath(t)},setLatLngs:function(t){return this.setPath(t)},getLatLngs:function(){return this.getPath()},_updateBounds:function(){const t=this._clickTolerance(),o=new Xe.Point(t,t);this._pxBounds=new Xe.Bounds([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},getPath:function(){return this._coords},setPath:function(t){return this._setPath(t),this.redraw()},getBounds:function(){return this._bounds},_setPath:function(t){this._coords=t,this._bounds=this._computeBounds()},_computeBounds:function(){const t=new Xe.LatLngBounds;let o,i,r;for(let m=0;m<this._coords.length;m++)if(r=this._coords[m],typeof r=="string"||r instanceof String)i=r;else if(i=="H")t.extend([o.lat,r[0]]),o=new Xe.latLng(o.lat,r[0]);else if(i=="V")t.extend([r[0],o.lng]),o=new Xe.latLng(r[0],o.lng);else if(i=="C"){var s=new Xe.latLng(r[0],r[1]);r=this._coords[++m];var l=new Xe.latLng(r[0],r[1]);r=this._coords[++m];var u=new Xe.latLng(r[0],r[1]);t.extend(s),t.extend(l),t.extend(u),u.controlPoint1=s,u.controlPoint2=l,o=u}else if(i=="S"){var l=new Xe.latLng(r[0],r[1]);r=this._coords[++m];var u=new Xe.latLng(r[0],r[1]),s=o;if(o.controlPoint2){var d=o.lat-o.controlPoint2.lat,h=o.lng-o.controlPoint2.lng;s=new Xe.latLng(o.lat+d,o.lng+h)}t.extend(s),t.extend(l),t.extend(u),u.controlPoint1=s,u.controlPoint2=l,o=u}else if(i=="Q"){var f=new Xe.latLng(r[0],r[1]);r=this._coords[++m];var u=new Xe.latLng(r[0],r[1]);t.extend(f),t.extend(u),u.controlPoint=f,o=u}else if(i=="T"){var u=new Xe.latLng(r[0],r[1]),f=o;if(o.controlPoint){var d=o.lat-o.controlPoint.lat,h=o.lng-o.controlPoint.lng;f=new Xe.latLng(o.lat+d,o.lng+h)}t.extend(f),t.extend(u),u.controlPoint=f,o=u}else t.extend(r),o=new Xe.latLng(r[0],r[1]);return t},getCenter:function(){return this._bounds.getCenter()},_update:function(){!this._map||this._updatePath()},_updatePath:function(){this._usingCanvas?this._updateCurveCanvas():this._updateCurveSvg()},_project:function(){let t,o,i,r;this._points=[];for(let s=0;s<this._coords.length;s++)if(t=this._coords[s],typeof t=="string"||t instanceof String)this._points.push(t),i=t;else{switch(t.length){case 2:r=this._map.latLngToLayerPoint(t),o=t;break;case 1:i=="H"?(r=this._map.latLngToLayerPoint([o[0],t[0]]),o=[o[0],t[0]]):(r=this._map.latLngToLayerPoint([t[0],o[1]]),o=[t[0],o[1]]);break}this._points.push(r)}if(this._bounds.isValid()){const s=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),l=this._map.latLngToLayerPoint(this._bounds.getSouthEast());this._rawPxBounds=new Xe.Bounds(s,l),this._updateBounds()}},_curvePointsToPath:function(t){let o,i,r="";for(let s=0;s<t.length;s++)if(o=t[s],typeof o=="string"||o instanceof String)i=o,r+=i;else switch(i){case"H":r+=o.x+" ";break;case"V":r+=o.y+" ";break;default:r+=o.x+","+o.y+" ";break}return r||"M0 0"},beforeAdd:function(t){Xe.Path.prototype.beforeAdd.call(this,t),this._usingCanvas=this._renderer instanceof Xe.Canvas,this._usingCanvas&&(this._pathSvgElement=document.createElementNS("http://www.w3.org/2000/svg","path"))},onAdd:function(t){if(this._usingCanvas&&(this._canvasSetDashArray=!this.options.dashArray),Xe.Path.prototype.onAdd.call(this,t),this._usingCanvas)this.options.animate&&typeof TWEEN=="object"?(this._normalizeCanvasAnimationOptions(),this._tweenedObject={offset:this._pathSvgElement.getTotalLength()},this._tween=new TWEEN.Tween(this._tweenedObject).to({offset:0},this.options.animate.duration).delay(this.options.animate.delay).repeat(this.options.animate.iterations-1).onComplete(function(o){return function(){o._canvasAnimating=!1}}(this)).start(),this._canvasAnimating=!0,this._animateCanvas()):this._canvasAnimating=!1;else if(this.options.animate&&this._path.animate){const o=this._svgSetDashArray();this._path.animate([{strokeDashoffset:o},{strokeDashoffset:0}],this.options.animate)}},_updateCurveSvg:function(){this._renderer._setPath(this,this._curvePointsToPath(this._points)),this.options.animate&&this._svgSetDashArray()},_svgSetDashArray:function(){const t=this._path,o=t.getTotalLength();return this.options.dashArray||(t.style.strokeDasharray=o+" "+o),o},_containsPoint:function(t){return this._bounds.isValid()?this._bounds.contains(this._map.layerPointToLatLng(t)):!1},_normalizeCanvasAnimationOptions:function(){const t={delay:0,duration:0,iterations:1};typeof this.options.animate=="number"?t.duration=this.options.animate:(this.options.animate.duration&&(t.duration=this.options.animate.duration),this.options.animate.delay&&(t.delay=this.options.animate.delay),this.options.animate.iterations&&(t.iterations=this.options.animate.iterations)),this.options.animate=t},_updateCurveCanvas:function(){const t=this._curvePointsToPath(this._points);this._pathSvgElement.setAttribute("d",t),this.options.animate&&typeof TWEEN=="object"&&this._canvasSetDashArray&&(this.options.dashArray=this._pathSvgElement.getTotalLength()+"",this._renderer._updateDashArray(this)),this._curveFillStroke(new Path2D(t),this._renderer._ctx)},_animateCanvas:function(){TWEEN.update(),this._renderer._updatePaths(),this._canvasAnimating&&(this._animationFrameId=Xe.Util.requestAnimFrame(this._animateCanvas,this))},_curveFillStroke:function(t,o){o.lineDashOffset=this._canvasAnimating?this._tweenedObject.offset:0;const i=this.options;i.fill&&(o.globalAlpha=i.fillOpacity,o.fillStyle=i.fillColor||i.color,o.fill(t,i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(o.setLineDash&&o.setLineDash(this.options&&this.options._dashArray||[]),o.globalAlpha=i.opacity,o.lineWidth=i.weight,o.strokeStyle=i.color,o.lineCap=i.lineCap,o.lineJoin=i.lineJoin,o.stroke(t))},trace:function(t){if(this._map===void 0||this._map===null)return[];t=t.filter(function(f){return f>=0&&f<=1});let o,i,r,s,l,u,d,h=[];for(let f=0;f<this._points.length;f++)if(o=this._points[f],typeof o=="string"||o instanceof String)i=o,i=="Z"&&(h=h.concat(this._linearTrace(t,s,r)));else switch(i){case"M":r=o,s=o;break;case"L":case"H":case"V":h=h.concat(this._linearTrace(t,s,o)),s=o;break;case"C":l=o,u=this._points[++f],d=this._points[++f],h=h.concat(this._cubicTrace(t,s,l,u,d)),s=d;break;case"S":l=this._reflectPoint(u,s),u=o,d=this._points[++f],h=h.concat(this._cubicTrace(t,s,l,u,d)),s=d;break;case"Q":l=o,u=this._points[++f],h=h.concat(this._quadraticTrace(t,s,l,u)),s=u;break;case"T":l=this._reflectPoint(l,s),u=o,h=h.concat(this._quadraticTrace(t,s,l,u)),s=u;break}return h},_linearTrace:function(t,o,i){return t.map(r=>{const s=this._singleLinearTrace(r,o.x,i.x),l=this._singleLinearTrace(r,o.y,i.y);return this._map.layerPointToLatLng([s,l])})},_quadraticTrace:function(t,o,i,r){return t.map(s=>{const l=this._singleQuadraticTrace(s,o.x,i.x,r.x),u=this._singleQuadraticTrace(s,o.y,i.y,r.y);return this._map.layerPointToLatLng([l,u])})},_cubicTrace:function(t,o,i,r,s){return t.map(l=>{const u=this._singleCubicTrace(l,o.x,i.x,r.x,s.x),d=this._singleCubicTrace(l,o.y,i.y,r.y,s.y);return this._map.layerPointToLatLng([u,d])})},_singleLinearTrace:function(t,o,i){return o+t*(i-o)},_singleQuadraticTrace:function(t,o,i,r){const s=1-t;return Math.pow(s,2)*o+2*s*t*i+Math.pow(t,2)*r},_singleCubicTrace:function(t,o,i,r,s){const l=1-t;return Math.pow(l,3)*o+3*Math.pow(l,2)*t*i+3*l*Math.pow(t,2)*r+Math.pow(t,3)*s},_reflectPoint:function(t,o){return x=o.x+(o.x-t.x),y=o.y+(o.y-t.y),Xe.point(x,y)}}),Xe.curve=function(t,o){return new Xe.Curve(t,o)}}function gu(t,o=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(!(o instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(o).getPropertyValue(`--q-${t}`).trim()||null}const yl=H(!1),co=H(null);function _m(t){yl.value||(gm(),yl.value=!0);function o(r,s){if(!r||r.length!==2||!s||s.length!==2)return[];const l=[r[0],r[1]],u=[s[0],s[1]],d=u[1]-l[1],h=u[0]-l[0],f=Math.sqrt(Math.pow(d,2)+Math.pow(h,2)),m=Math.atan2(h,d),v=3.14/10,g=f/2/Math.cos(v),_=m+v,S=g*Math.cos(_)+(typeof l[1]=="string"?parseFloat(l[1]):l[1]),M=g*Math.sin(_)+(typeof l[0]=="string"?parseFloat(l[0]):l[0]);return[l,[M,S],u]}function i(r,s){const[l,u,d]=o(r,s);if(!l||!u||!d){co.value&&(co.value.setPath([]),co.value=null);return}const f={color:gu("primary"),weight:4},m=["M",l,"Q",u,d];return co.value?co.value.setPath(m):co.value=L.curve(m,f).addTo(t.value.leafletObject),co.value}return{drawCurve:i}}function It(){return et(gd)}/*! Capacitor: https://capacitorjs.com/ - MIT License */const ym=t=>{const o=new Map;o.set("web",{name:"web"});const i=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:o},r=(l,u)=>{i.platforms.set(l,u)},s=l=>{i.platforms.has(l)&&(i.currentPlatform=i.platforms.get(l))};return i.addPlatform=r,i.setPlatform=s,i},bm=t=>t.CapacitorPlatforms=ym(t),_u=bm(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});_u.addPlatform;_u.setPlatform;var Ro;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ro||(Ro={}));class ms extends Error{constructor(o,i,r){super(o),this.message=o,this.code=i,this.data=r}}const wm=t=>{var o,i;return t!=null&&t.androidBridge?"android":!((i=(o=t==null?void 0:t.webkit)===null||o===void 0?void 0:o.messageHandlers)===null||i===void 0)&&i.bridge?"ios":"web"},xm=t=>{var o,i,r,s,l;const u=t.CapacitorCustomPlatform||null,d=t.Capacitor||{},h=d.Plugins=d.Plugins||{},f=t.CapacitorPlatforms,m=()=>u!==null?u.name:wm(t),v=((o=f==null?void 0:f.currentPlatform)===null||o===void 0?void 0:o.getPlatform)||m,g=()=>v()!=="web",_=((i=f==null?void 0:f.currentPlatform)===null||i===void 0?void 0:i.isNativePlatform)||g,S=Z=>{const $=z.get(Z);return!!($!=null&&$.platforms.has(v())||F(Z))},M=((r=f==null?void 0:f.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||S,q=Z=>{var $;return($=d.PluginHeaders)===null||$===void 0?void 0:$.find(j=>j.name===Z)},F=((s=f==null?void 0:f.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||q,ee=Z=>t.console.error(Z),B=(Z,$,j)=>Promise.reject(`${j} does not have an implementation of "${$}".`),z=new Map,D=(Z,$={})=>{const j=z.get(Z);if(j)return console.warn(`Capacitor plugin "${Z}" already registered. Cannot register plugins twice.`),j.proxy;const ae=v(),W=F(Z);let oe;const re=async()=>(!oe&&ae in $?oe=typeof $[ae]=="function"?oe=await $[ae]():oe=$[ae]:u!==null&&!oe&&"web"in $&&(oe=typeof $.web=="function"?oe=await $.web():oe=$.web),oe),ve=(de,ce)=>{var _e,we;if(W){const Me=W==null?void 0:W.methods.find(pe=>ce===pe.name);if(Me)return Me.rtype==="promise"?pe=>d.nativePromise(Z,ce.toString(),pe):(pe,me)=>d.nativeCallback(Z,ce.toString(),pe,me);if(de)return(_e=de[ce])===null||_e===void 0?void 0:_e.bind(de)}else{if(de)return(we=de[ce])===null||we===void 0?void 0:we.bind(de);throw new ms(`"${Z}" plugin is not implemented on ${ae}`,Ro.Unimplemented)}},Se=de=>{let ce;const _e=(...we)=>{const Me=re().then(pe=>{const me=ve(pe,de);if(me){const ge=me(...we);return ce=ge==null?void 0:ge.remove,ge}else throw new ms(`"${Z}.${de}()" is not implemented on ${ae}`,Ro.Unimplemented)});return de==="addListener"&&(Me.remove=async()=>ce()),Me};return _e.toString=()=>`${de.toString()}() { [capacitor code] }`,Object.defineProperty(_e,"name",{value:de,writable:!1,configurable:!1}),_e},Ae=Se("addListener"),le=Se("removeListener"),ie=(de,ce)=>{const _e=Ae({eventName:de},ce),we=async()=>{const pe=await _e;le({eventName:de,callbackId:pe},ce)},Me=new Promise(pe=>_e.then(()=>pe({remove:we})));return Me.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await we()},Me},Le=new Proxy({},{get(de,ce){switch(ce){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return W?ie:Ae;case"removeListener":return le;default:return Se(ce)}}});return h[Z]=Le,z.set(Z,{name:Z,proxy:Le,platforms:new Set([...Object.keys($),...W?[ae]:[]])}),Le},U=((l=f==null?void 0:f.currentPlatform)===null||l===void 0?void 0:l.registerPlugin)||D;return d.convertFileSrc||(d.convertFileSrc=Z=>Z),d.getPlatform=v,d.handleError=ee,d.isNativePlatform=_,d.isPluginAvailable=M,d.pluginMethodNoop=B,d.registerPlugin=U,d.Exception=ms,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},Pm=t=>t.Capacitor=xm(t),ra=Pm(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),Js=ra.registerPlugin;ra.Plugins;class yu{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,i){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(i);const s=this.windowListeners[o];s&&!s.registered&&this.addWindowListener(s);const l=async()=>this.removeListener(o,i),u=Promise.resolve({remove:l});return Object.defineProperty(u,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await l()}}),u}async removeAllListeners(){this.listeners={};for(const o in this.windowListeners)this.removeWindowListener(this.windowListeners[o]);this.windowListeners={}}notifyListeners(o,i){const r=this.listeners[o];r&&r.forEach(s=>s(i))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,i){this.windowListeners[i]={registered:!1,windowEventName:o,pluginEventName:i,handler:r=>{this.notifyListeners(i,r)}}}unimplemented(o="not implemented"){return new ra.Exception(o,Ro.Unimplemented)}unavailable(o="not available"){return new ra.Exception(o,Ro.Unavailable)}async removeListener(o,i){const r=this.listeners[o];if(!r)return;const s=r.indexOf(i);this.listeners[o].splice(s,1),this.listeners[o].length||this.removeWindowListener(this.windowListeners[o])}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){!o||(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const bl=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),wl=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class km extends yu{async getCookies(){const o=document.cookie,i={};return o.split(";").forEach(r=>{if(r.length<=0)return;let[s,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=wl(s).trim(),l=wl(l).trim(),i[s]=l}),i}async setCookie(o){try{const i=bl(o.key),r=bl(o.value),s=`; expires=${(o.expires||"").replace("expires=","")}`,l=(o.path||"/").replace("path=",""),u=o.url!=null&&o.url.length>0?`domain=${o.url}`:"";document.cookie=`${i}=${r||""}${s}; path=${l}; ${u};`}catch(i){return Promise.reject(i)}}async deleteCookie(o){try{document.cookie=`${o.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}}async clearCookies(){try{const o=document.cookie.split(";")||[];for(const i of o)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(o){return Promise.reject(o)}}async clearAllCookies(){try{await this.clearCookies()}catch(o){return Promise.reject(o)}}}Js("CapacitorCookies",{web:()=>new km});const Cm=async t=>new Promise((o,i)=>{const r=new FileReader;r.onload=()=>{const s=r.result;o(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>i(s),r.readAsDataURL(t)}),Sm=(t={})=>{const o=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,l,u)=>(s[l]=t[o[u]],s),{})},Tm=(t,o=!0)=>t?Object.entries(t).reduce((r,s)=>{const[l,u]=s;let d,h;return Array.isArray(u)?(h="",u.forEach(f=>{d=o?encodeURIComponent(f):f,h+=`${l}=${d}&`}),h.slice(0,-1)):(d=o?encodeURIComponent(u):u,h=`${l}=${d}`),`${r}&${h}`},"").substr(1):null,Lm=(t,o={})=>{const i=Object.assign({method:t.method||"GET",headers:t.headers},o),s=Sm(t.headers)["content-type"]||"";if(typeof t.data=="string")i.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[u,d]of Object.entries(t.data||{}))l.set(u,d);i.body=l.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const l=new FormData;if(t.data instanceof FormData)t.data.forEach((d,h)=>{l.append(h,d)});else for(const d of Object.keys(t.data))l.append(d,t.data[d]);i.body=l;const u=new Headers(i.headers);u.delete("content-type"),i.headers=u}else(s.includes("application/json")||typeof t.data=="object")&&(i.body=JSON.stringify(t.data));return i};class Mm extends yu{async request(o){const i=Lm(o,o.webFetchExtra),r=Tm(o.params,o.shouldEncodeUrlParams),s=r?`${o.url}?${r}`:o.url,l=await fetch(s,i),u=l.headers.get("content-type")||"";let{responseType:d="text"}=l.ok?o:{};u.includes("application/json")&&(d="json");let h,f;switch(d){case"arraybuffer":case"blob":f=await l.blob(),h=await Cm(f);break;case"json":h=await l.json();break;case"document":case"text":default:h=await l.text()}const m={};return l.headers.forEach((v,g)=>{m[g]=v}),{data:h,headers:m,status:l.status,url:l.url}}async get(o){return this.request(Object.assign(Object.assign({},o),{method:"GET"}))}async post(o){return this.request(Object.assign(Object.assign({},o),{method:"POST"}))}async put(o){return this.request(Object.assign(Object.assign({},o),{method:"PUT"}))}async patch(o){return this.request(Object.assign(Object.assign({},o),{method:"PATCH"}))}async delete(o){return this.request(Object.assign(Object.assign({},o),{method:"DELETE"}))}}Js("CapacitorHttp",{web:()=>new Mm});const Am=Js("Geolocation",{web:()=>qt(()=>import("./web.833a21b9.js"),["assets/web.833a21b9.js","assets/index.dbf76095.js","assets/index.e86d9c2e.css","assets/QForm.36f05080.js","assets/user.hook.8e71458c.js","assets/plugin-vue_export-helper.b5e96e53.js","assets/ErrorNotFound.1cc3a5cd.js"]).then(t=>new t.GeolocationWeb)});function bo(){const{getLocalData:t}=Pn("tasks"),o=Tt();async function i(){return await new Promise(m=>setTimeout(m,2e3,t()))}const{data:r,isLoading:s,error:l,isError:u,refetch:d,isRefetching:h}=xi(["tasks"],i,{refetchOnWindowFocus:!1,staleTime:_a,initialData:t(),initialDataUpdatedAt:0,enabled:k(()=>o.value.hasListTasksPermission())});return{tasks:k(()=>r.value||[]),tasksError:k(()=>{var m,v;return(v=(m=l.value)==null?void 0:m.response)==null?void 0:v.data}),isGettingTasks:s,isRefetchingTasks:h,isGettingTasksError:u,refetchTasks:d}}function Bm(t){const o=It(),{getCurrentPosition:i}=Sa(),r=un(["tasks"]);async function s({transition:f,data:m}){var ee;let v=null;try{const B=await Am.getCurrentPosition({timeout:5e3,maximumAge:12e4});v=[B.coords.latitude,B.coords.longitude]}catch{}try{v=(await i()).latlng}catch{}v||await new Promise((B,z)=>{o.dialog({title:"No fue posible obtener las coordenadas del dispositivo",message:"\xBFDesea completar la tarea de todas formas?",cancel:"Cancelar",ok:"Completar",persistent:!0}).onCancel(()=>z("Task action canceled by user.")).onOk(()=>B(null))});const g=Gn(),_=new Date().toISOString(),S=Qs().find(B=>B.id===t.value.flow),M={...S==null?void 0:S.steps.find(B=>B.name===f.name),createdAt:_,updatedAt:_,datetime:_,task:g,data:m},q=[...((ee=t.value)==null?void 0:ee.statusLogs)||[],M],F=r({...t.value,statusLogs:q,currentStatus:M});return await new Promise(B=>setTimeout(B,2e3,F))}const{mutateAsync:l,isLoading:u,isError:d,error:h}=xn(s);return{invokeAction:l,isInvokingAction:k(()=>u.value),isCreatingActionError:k(()=>d.value),invokeActionError:k(()=>h.value)}}function er(){const t=un(["tasks"]),{getLocalData:o}=Pn("tasks");async function i(d){var m;const f={...(m=o())==null?void 0:m.find(v=>v.id===d.id),...d};return t(f),f}const{mutateAsync:r,isLoading:s,isError:l,error:u}=xn(i);return{updateTask:r,isUpdatingTask:k(()=>s.value),isUpdatingTaskError:k(()=>l.value),updateTaskError:k(()=>u.value)}}function Em(){const{data:t,isLoading:o,error:i,isError:r,refetch:s}=xi(["tasks-flows"],()=>new Promise(u=>setTimeout(u,200,Qs())),{refetchOnWindowFocus:!1});return{tasksFlows:k(()=>t.value||[]),tasksFlowsError:k(()=>{var u,d;return(d=(u=i.value)==null?void 0:u.response)==null?void 0:d.data}),isGettingTasksFlows:o,isGettingTasksFlowsError:r,refetchTasksFlows:s}}function zm(){const t=un(["tasks"]),{getLocalData:o}=Pn("addresses");async function i(d){var S,M,q;const h=(S=Qs().filter(F=>F.id===d.flow))==null?void 0:S[0],f=new Date().toISOString(),m=Gn(),v=((q=(M=o())==null?void 0:M.filter(F=>F.id===d.contactAddress))==null?void 0:q[0])||void 0,g={...h.steps[0],createdAt:f,updatedAt:f,datetime:f,task:m},_={...d,createdAt:f,contactAddress:v,currentStatus:g,id:m,isActive:!0,isExpired:!1,updatedAt:f,statusLogs:[g]};return t(_),_}const{mutateAsync:r,isLoading:s,isError:l,error:u}=xn(i);return{createTask:r,isCreatingTask:k(()=>s.value),isCreatingTaskError:k(()=>l.value),createTaskError:k(()=>{var d,h;return(h=(d=u.value)==null?void 0:d.response)==null?void 0:h.data})}}const Gi=H(null),Ki=H(null);function bn(){const{addresses:t}=no(),{tasks:o}=bo(),i=It(),r=k({get:()=>{var h;return((h=t.value)==null?void 0:h.find(f=>f.id===Gi.value))||null},set:h=>{Gi.value=(h==null?void 0:h.id)||null,Ki.value=(h==null?void 0:h.id)||null}}),s=k({get:()=>{var h;return((h=t.value)==null?void 0:h.find(f=>f.id===Ki.value))||(i.platform.is.mobile&&t.value?t.value[0]:null)},set:h=>{Ki.value=(h==null?void 0:h.id)||null}});function l(h){return h?o.value.filter(f=>{var m;return((m=f.contactAddress)==null?void 0:m.id)===h.id}):[]}function u(h){return l(h).map(f=>f.order).filter(Boolean)}const d=k(()=>l(r.value));return{bottomDrawerSelectedAddress:s,selectedAddressId:k({get:()=>Gi.value,set:h=>{Gi.value=h,h&&(Ki.value=h)}}),selectedAddress:r,selectedAddressTasks:d,getAddressOrders:u,getAddressTasks:l}}function bi(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),_d.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const bu={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function wu({showing:t,avoidEmit:o,configureAnchorEl:i}){const{props:r,proxy:s,emit:l}=Pt(),u=H(null);let d=null;function h(_){return u.value===null?!1:_===void 0||_.touches===void 0||_.touches.length<=1}const f={};i===void 0&&(Object.assign(f,{hide(_){s.hide(_)},toggle(_){s.toggle(_),_.qAnchorHandled=!0},toggleKey(_){ga(_,13)===!0&&f.toggle(_)},contextClick(_){s.hide(_),qo(_),ft(()=>{s.show(_),_.qAnchorHandled=!0})},prevent:qo,mobileTouch(_){if(f.mobileCleanup(_),h(_)!==!0)return;s.hide(_),u.value.classList.add("non-selectable");const S=_.target;Jt(f,"anchor",[[S,"touchmove","mobileCleanup","passive"],[S,"touchend","mobileCleanup","passive"],[S,"touchcancel","mobileCleanup","passive"],[u.value,"contextmenu","prevent","notPassive"]]),d=setTimeout(()=>{d=null,s.show(_),_.qAnchorHandled=!0},300)},mobileCleanup(_){u.value.classList.remove("non-selectable"),d!==null&&(clearTimeout(d),d=null),t.value===!0&&_!==void 0&&bi()}}),i=function(_=r.contextMenu){if(r.noParentEvent===!0||u.value===null)return;let S;_===!0?s.$q.platform.is.mobile===!0?S=[[u.value,"touchstart","mobileTouch","passive"]]:S=[[u.value,"mousedown","hide","passive"],[u.value,"contextmenu","contextClick","notPassive"]]:S=[[u.value,"click","toggle","passive"],[u.value,"keyup","toggleKey","passive"]],Jt(f,"anchor",S)});function m(){zn(f,"anchor")}function v(_){for(u.value=_;u.value.classList.contains("q-anchor--skip");)u.value=u.value.parentNode;i()}function g(){if(r.target===!1||r.target===""||s.$el.parentNode===null)u.value=null;else if(r.target===!0)v(s.$el.parentNode);else{let _=r.target;if(typeof r.target=="string")try{_=document.querySelector(r.target)}catch{_=void 0}_!=null?(u.value=_.$el||_,i()):(u.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return ke(()=>r.contextMenu,_=>{u.value!==null&&(m(),i(_))}),ke(()=>r.target,()=>{u.value!==null&&m(),g()}),ke(()=>r.noParentEvent,_=>{u.value!==null&&(_===!0?m():i())}),yt(()=>{g(),o!==!0&&r.modelValue===!0&&u.value===null&&l("update:modelValue",!1)}),zt(()=>{d!==null&&clearTimeout(d),m()}),{anchorEl:u,canShow:h,anchorEvents:f}}function xu(t,o){const i=H(null);let r;function s(d,h){const f=`${h!==void 0?"add":"remove"}EventListener`,m=h!==void 0?h:r;d!==window&&d[f]("scroll",m,Cs.passive),window[f]("scroll",m,Cs.passive),r=h}function l(){i.value!==null&&(s(i.value),i.value=null)}const u=ke(()=>t.noParentEvent,()=>{i.value!==null&&(l(),o())});return zt(u),{localScrollTarget:i,unconfigureScrollTarget:l,changeScrollEvent:s}}const{notPassiveCapture:la}=Cs,mo=[];function ua(t){const o=t.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let i=il.length-1;for(;i>=0;){const r=il[i].$;if(r.type.name==="QTooltip"){i--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;i--}for(let r=mo.length-1;r>=0;r--){const s=mo[r];if((s.anchorEl.value===null||s.anchorEl.value.contains(o)===!1)&&(o===document.body||s.innerRef.value!==null&&s.innerRef.value.contains(o)===!1))t.qClickOutside=!0,s.onClickOutside(t);else return}}function Pu(t){mo.push(t),mo.length===1&&(document.addEventListener("mousedown",ua,la),document.addEventListener("touchstart",ua,la))}function ca(t){const o=mo.findIndex(i=>i===t);o>-1&&(mo.splice(o,1),mo.length===0&&(document.removeEventListener("mousedown",ua,la),document.removeEventListener("touchstart",ua,la)))}let xl,Pl;function da(t){const o=t.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ku(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const Ms={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{Ms[`${t}#ltr`]=t,Ms[`${t}#rtl`]=t});function ha(t,o){const i=t.split(" ");return{vertical:i[0],horizontal:Ms[`${i[1]}#${o===!0?"rtl":"ltr"}`]}}function Dm(t,o){let{top:i,left:r,right:s,bottom:l,width:u,height:d}=t.getBoundingClientRect();return o!==void 0&&(i-=o[1],r-=o[0],l+=o[1],s+=o[0],u+=o[0],d+=o[1]),{top:i,bottom:l,height:d,left:r,right:s,width:u,middle:r+(s-r)/2,center:i+(l-i)/2}}function $m(t,o,i){let{top:r,left:s}=t.getBoundingClientRect();return r+=o.top,s+=o.left,i!==void 0&&(r+=i[1],s+=i[0]),{top:r,bottom:r+1,height:1,left:s,right:s+1,width:1,middle:s,center:r}}function Om(t,o){return{top:0,center:o/2,bottom:o,left:0,middle:t/2,right:t}}function kl(t,o,i,r){return{top:t[i.vertical]-o[r.vertical],left:t[i.horizontal]-o[r.horizontal]}}function tr(t,o=0){if(t.targetEl===null||t.anchorEl===null||o>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{tr(t,o+1)},10);return}const{targetEl:i,offset:r,anchorEl:s,anchorOrigin:l,selfOrigin:u,absoluteOffset:d,fit:h,cover:f,maxHeight:m,maxWidth:v}=t;if(ln.is.ios===!0&&window.visualViewport!==void 0){const U=document.body.style,{offsetLeft:Z,offsetTop:$}=window.visualViewport;Z!==xl&&(U.setProperty("--q-pe-left",Z+"px"),xl=Z),$!==Pl&&(U.setProperty("--q-pe-top",$+"px"),Pl=$)}const{scrollLeft:g,scrollTop:_}=i,S=d===void 0?Dm(s,f===!0?[0,0]:r):$m(s,d,r);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:v||"100vw",maxHeight:m||"100vh",visibility:"visible"});const{offsetWidth:M,offsetHeight:q}=i,{elWidth:F,elHeight:ee}=h===!0||f===!0?{elWidth:Math.max(S.width,M),elHeight:f===!0?Math.max(S.height,q):q}:{elWidth:M,elHeight:q};let B={maxWidth:v,maxHeight:m};(h===!0||f===!0)&&(B.minWidth=S.width+"px",f===!0&&(B.minHeight=S.height+"px")),Object.assign(i.style,B);const z=Om(F,ee);let D=kl(S,z,l,u);if(d===void 0||r===void 0)ps(D,S,z,l,u);else{const{top:U,left:Z}=D;ps(D,S,z,l,u);let $=!1;if(D.top!==U){$=!0;const j=2*r[1];S.center=S.top-=j,S.bottom-=j+2}if(D.left!==Z){$=!0;const j=2*r[0];S.middle=S.left-=j,S.right-=j+2}$===!0&&(D=kl(S,z,l,u),ps(D,S,z,l,u))}B={top:D.top+"px",left:D.left+"px"},D.maxHeight!==void 0&&(B.maxHeight=D.maxHeight+"px",S.height>D.maxHeight&&(B.minHeight=B.maxHeight)),D.maxWidth!==void 0&&(B.maxWidth=D.maxWidth+"px",S.width>D.maxWidth&&(B.minWidth=B.maxWidth)),Object.assign(i.style,B),i.scrollTop!==_&&(i.scrollTop=_),i.scrollLeft!==g&&(i.scrollLeft=g)}function ps(t,o,i,r,s){const l=i.bottom,u=i.right,d=yd(),h=window.innerHeight-d,f=document.body.clientWidth;if(t.top<0||t.top+l>h)if(s.vertical==="center")t.top=o[r.vertical]>h/2?Math.max(0,h-l):0,t.maxHeight=Math.min(l,h);else if(o[r.vertical]>h/2){const m=Math.min(h,r.vertical==="center"?o.center:r.vertical===s.vertical?o.bottom:o.top);t.maxHeight=Math.min(l,m),t.top=Math.max(0,m-l)}else t.top=Math.max(0,r.vertical==="center"?o.center:r.vertical===s.vertical?o.top:o.bottom),t.maxHeight=Math.min(l,h-t.top);if(t.left<0||t.left+u>f)if(t.maxWidth=Math.min(u,f),s.horizontal==="middle")t.left=o[r.horizontal]>f/2?Math.max(0,f-u):0;else if(o[r.horizontal]>f/2){const m=Math.min(f,r.horizontal==="middle"?o.middle:r.horizontal===s.horizontal?o.right:o.left);t.maxWidth=Math.min(u,m),t.left=Math.max(0,m-t.maxWidth)}else t.left=Math.max(0,r.horizontal==="middle"?o.middle:r.horizontal===s.horizontal?o.left:o.right),t.maxWidth=Math.min(u,f-t.left)}var Un=_t({name:"QTooltip",inheritAttrs:!1,props:{...bu,...Os,...qs,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:da},self:{type:String,default:"top middle",validator:da},offset:{type:Array,default:()=>[14,14],validator:ku},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Is],setup(t,{slots:o,emit:i,attrs:r}){let s,l;const u=Pt(),{proxy:{$q:d}}=u,h=H(null),f=H(!1),m=k(()=>ha(t.anchor,d.lang.rtl)),v=k(()=>ha(t.self,d.lang.rtl)),g=k(()=>t.persistent!==!0),{registerTick:_,removeTick:S}=vi(),{registerTimeout:M}=yi(),{transitionProps:q,transitionStyle:F}=Zl(t),{localScrollTarget:ee,changeScrollEvent:B,unconfigureScrollTarget:z}=xu(t,de),{anchorEl:D,canShow:U,anchorEvents:Z}=wu({showing:f,configureAnchorEl:Le}),{show:$,hide:j}=Rs({showing:f,canShow:U,handleShow:re,handleHide:ve,hideOnRouteChange:g,processOnMount:!0});Object.assign(Z,{delayShow:le,delayHide:ie});const{showPortal:ae,hidePortal:W,renderPortal:oe}=Hl(u,h,_e,"tooltip");if(d.platform.is.mobile===!0){const we={anchorEl:D,innerRef:h,onClickOutside(pe){return j(pe),pe.target.classList.contains("q-dialog__backdrop")&&yn(pe),!0}},Me=k(()=>t.modelValue===null&&t.persistent!==!0&&f.value===!0);ke(Me,pe=>{(pe===!0?Pu:ca)(we)}),zt(()=>{ca(we)})}function re(we){ae(),_(()=>{l=new MutationObserver(()=>Ae()),l.observe(h.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),Ae(),de()}),s===void 0&&(s=ke(()=>d.screen.width+"|"+d.screen.height+"|"+t.self+"|"+t.anchor+"|"+d.lang.rtl,Ae)),M(()=>{ae(!0),i("show",we)},t.transitionDuration)}function ve(we){S(),W(),Se(),M(()=>{W(!0),i("hide",we)},t.transitionDuration)}function Se(){l!==void 0&&(l.disconnect(),l=void 0),s!==void 0&&(s(),s=void 0),z(),zn(Z,"tooltipTemp")}function Ae(){tr({targetEl:h.value,offset:t.offset,anchorEl:D.value,anchorOrigin:m.value,selfOrigin:v.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function le(we){if(d.platform.is.mobile===!0){bi(),document.body.classList.add("non-selectable");const Me=D.value,pe=["touchmove","touchcancel","touchend","click"].map(me=>[Me,me,"delayHide","passiveCapture"]);Jt(Z,"tooltipTemp",pe)}M(()=>{$(we)},t.delay)}function ie(we){d.platform.is.mobile===!0&&(zn(Z,"tooltipTemp"),bi(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),M(()=>{j(we)},t.hideDelay)}function Le(){if(t.noParentEvent===!0||D.value===null)return;const we=d.platform.is.mobile===!0?[[D.value,"touchstart","delayShow","passive"]]:[[D.value,"mouseenter","delayShow","passive"],[D.value,"mouseleave","delayHide","passive"]];Jt(Z,"anchor",we)}function de(){if(D.value!==null||t.scrollTarget!==void 0){ee.value=Vl(D.value,t.scrollTarget);const we=t.noParentEvent===!0?Ae:j;B(ee.value,we)}}function ce(){return f.value===!0?X("div",{...r,ref:h,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,F.value],role:"tooltip"},Dt(o.default)):null}function _e(){return X(Vn,q.value,ce)}return zt(Se),Object.assign(u.proxy,{updatePosition:Ae}),oe}}),Cn=_t({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:o}){const i=k(()=>parseInt(t.lines,10)),r=k(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(i.value===1?" ellipsis":"")),s=k(()=>t.lines!==void 0&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null);return()=>X("div",{style:s.value,class:r.value},Dt(o.default))}});const qm={class:"relative-position full-width"},Im={class:"row items-center full-width"},Rm={class:"q-ml-md text-h6 text-weight-bold"},Fm={class:"text-grey-8 q-mt-xs",style:{"line-height":"16px"}},Nm={key:2,class:"q-pb-xs"},Zm=xe({__name:"AddressedItem",props:{title:{},subtitle:{},name:{},colorName:{},sutitleLines:{},hideAddress:{type:Boolean},isSelected:{type:Boolean}},setup(t){const o=t,i=H(),r=H(),s=H(0),l=H();function u(){if(i.value&&r.value){l.value=i.value.getBoundingClientRect();const f=r.value.getBoundingClientRect(),m=l.value.height/2+f.height/2-16;return s.value=m,m}return 0}function d(){i.value&&r.value&&u()}const h=k(()=>Ho(o.colorName||o.name||o.title));return(f,m)=>(P(),R(tt,{class:"q-pa-none full-width",style:{"min-height":"0"}},{default:C(()=>{var v;return[ze(f.$slots,"top"),O("div",qm,[O("div",{ref_key:"customerNameRef",ref:i,class:"address-customer-name text-subtitle2 row no-wrap items-center q-gutter-x-sm"},[w(oa,{onResize:d}),w(Dn,{size:"13px","font-size":"13px",color:h.value,"text-color":"white",style:{"z-index":"100",margin:"4px 0 0 14px"}},null,8,["color"]),O("div",Im,[ze(f.$slots,"title",{value:f.title},()=>[O("div",Rm,ue(f.title),1)])])],512),!f.hideAddress&&f.subtitle?(P(),Y("div",{key:0,class:"absolute",style:St([{left:"12px","z-index":"10"},`top: ${(((v=l.value)==null?void 0:v.height)/2||0)+10}px`])},[O("div",{class:"v-line bg-transparent",style:St([{width:"0"},[`border-right: 2px dotted ${A(gu)("primary")}`,`height: ${s.value||5}px`]])},null,4)],4)):V("",!0),!f.hideAddress&&f.subtitle?(P(),Y("div",{key:1,ref_key:"addressDescriptionRef",ref:r,class:"address-description row no-wrap items-center q-gutter-x-sm"},[w(Dn,{size:"26px","font-size":"13px",icon:"radio_button_checked",style:{"margin-right":"1px"},"text-color":h.value},null,8,["text-color"]),w(Cn,{lines:f.sutitleLines},{default:C(()=>[O("div",Fm,[ze(f.$slots,"subtitle",{value:f.subtitle},()=>[Ze(ue(f.subtitle),1)])])]),_:3},8,["lines"])],512)):(P(),Y("div",Nm)),ze(f.$slots,"default")]),ze(f.$slots,"bottom")]}),_:3}))}});var it=_t({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:o}){const i=k(()=>`q-item__section column q-item__section--${t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main"}`+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>X("div",{class:i.value},Dt(o.default))}}),Bt=_t({name:"QList",props:{...Jn,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:o}){const i=Pt(),r=eo(t,i.proxy.$q),s=k(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>X(t.tag,{class:s.value},Dt(o.default))}}),nr=_t({name:"QMenu",inheritAttrs:!1,props:{...bu,...Os,...Jn,...qs,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:da},self:{type:String,validator:da},offset:{type:Array,validator:ku},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Is,"click","escapeKey"],setup(t,{slots:o,emit:i,attrs:r}){let s=null,l,u,d;const h=Pt(),{proxy:f}=h,{$q:m}=f,v=H(null),g=H(!1),_=k(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),S=eo(t,m),{registerTick:M,removeTick:q}=vi(),{registerTimeout:F}=yi(),{transitionProps:ee,transitionStyle:B}=Zl(t),{localScrollTarget:z,changeScrollEvent:D,unconfigureScrollTarget:U}=xu(t,we),{anchorEl:Z,canShow:$}=wu({showing:g}),{hide:j}=Rs({showing:g,canShow:$,handleShow:de,handleHide:ce,hideOnRouteChange:_,processOnMount:!0}),{showPortal:ae,hidePortal:W,renderPortal:oe}=Hl(h,v,Q,"menu"),re={anchorEl:Z,innerRef:v,onClickOutside(K){if(t.persistent!==!0&&g.value===!0)return j(K),(K.type==="touchstart"||K.target.classList.contains("q-dialog__backdrop"))&&yn(K),!0}},ve=k(()=>ha(t.anchor||(t.cover===!0?"center middle":"bottom start"),m.lang.rtl)),Se=k(()=>t.cover===!0?ve.value:ha(t.self||"top start",m.lang.rtl)),Ae=k(()=>(t.square===!0?" q-menu--square":"")+(S.value===!0?" q-menu--dark q-dark":"")),le=k(()=>t.autoClose===!0?{onClick:Me}:{}),ie=k(()=>g.value===!0&&t.persistent!==!0);ke(ie,K=>{K===!0?(Pd(me),Pu(re)):(al(me),ca(re))});function Le(){Ul(()=>{let K=v.value;K&&K.contains(document.activeElement)!==!0&&(K=K.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||K.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||K.querySelector("[autofocus], [data-autofocus]")||K,K.focus({preventScroll:!0}))})}function de(K){if(s=t.noRefocus===!1?document.activeElement:null,bd(pe),ae(),we(),l=void 0,K!==void 0&&(t.touchPosition||t.contextMenu)){const Ee=Io(K);if(Ee.left!==void 0){const{top:De,left:Ne}=Z.value.getBoundingClientRect();l={left:Ee.left-Ne,top:Ee.top-De}}}u===void 0&&(u=ke(()=>m.screen.width+"|"+m.screen.height+"|"+t.self+"|"+t.anchor+"|"+m.lang.rtl,ge)),t.noFocus!==!0&&document.activeElement.blur(),M(()=>{ge(),t.noFocus!==!0&&Le()}),F(()=>{m.platform.is.ios===!0&&(d=t.autoClose,v.value.click()),ge(),ae(!0),i("show",K)},t.transitionDuration)}function ce(K){q(),W(),_e(!0),s!==null&&(K===void 0||K.qClickOutside!==!0)&&(((K&&K.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),F(()=>{W(!0),i("hide",K)},t.transitionDuration)}function _e(K){l=void 0,u!==void 0&&(u(),u=void 0),(K===!0||g.value===!0)&&(wd(pe),U(),ca(re),al(me)),K!==!0&&(s=null)}function we(){(Z.value!==null||t.scrollTarget!==void 0)&&(z.value=Vl(Z.value,t.scrollTarget),D(z.value,ge))}function Me(K){d!==!0?(xd(f,K),i("click",K)):d=!1}function pe(K){ie.value===!0&&t.noFocus!==!0&&kd(v.value,K.target)!==!0&&Le()}function me(K){i("escapeKey"),j(K)}function ge(){tr({targetEl:v.value,offset:t.offset,anchorEl:Z.value,anchorOrigin:ve.value,selfOrigin:Se.value,absoluteOffset:l,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function Q(){return X(Vn,ee.value,()=>g.value===!0?X("div",{role:"menu",...r,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+Ae.value,r.class],style:[r.style,B.value],...le.value},Dt(o.default)):null)}return zt(_e),Object.assign(f,{focus:Le,updatePosition:ge}),oe}});const st=xe({__name:"ResponsiveMenu",props:ut({minWidth:{default:200},maxWidth:{default:360},maximized:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},position:{default:"bottom"},menuOffset:{},fit:{type:Boolean},parentId:{},mode:{default:"responsive"},autoshow:{type:Boolean,default:!0},padding:{type:Boolean}},{modelValue:{local:!0,default:!1}}),emits:ut(["open","close"],["update:modelValue"]),setup(t,{emit:o}){const i=t,r=wt(t,"modelValue",{local:!0}),s=o,l=It(),u=k(()=>l.screen.width>l.screen.sizes.sm&&i.mode!=="dialog"),d=H(),h=H();function f(){!i.autoshow||u.value||(r.value=!r.value)}return ke(d,()=>{var g,_;let m=(_=(g=d.value)==null?void 0:g.$el)==null?void 0:_.parentElement;if(!m)return;let v=m.getBoundingClientRect();for(;m&&(v.width===0||m.height===0)&&m.id!==i.parentId;)m=m.parentElement,v=m.getBoundingClientRect();!m||m.onclick!==f&&(m.onclick=f)}),ke(r,()=>{r.value?s("open"):s("close")}),(m,v)=>u.value?(P(),R(nr,{key:0,ref:g=>h.value=g,fit:m.fit,class:at({"shadow-0":!m.shadow}),style:St([[m.maximized?void 0:`max-width: ${m.maxWidth}px;`,`min-width: ${m.minWidth}px;`],{border:"1px solid #e2e2e2"}]),"max-width":m.maximized?void 0:`${m.maxWidth}px`,offset:m.menuOffset,modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=g=>r.value=g),"max-height":"90vh"},{default:C(()=>[ze(m.$slots,"default",{isFloatingMenu:!0,isDialog:!1,close:()=>r.value=!1})]),_:3},8,["fit","class","style","max-width","offset","modelValue"])):(P(),R(jl,{key:1,ref:g=>d.value=g,modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=g=>r.value=g),position:m.position,maximized:m.maximized},{default:C(()=>[O("div",{class:at({"q-pa-sm":m.padding})},[w(hn,{style:St([{width:"100%","border-radius":"8px"},[m.maximized?void 0:`max-width: ${m.maxWidth}px;`,m.padding?"border-radius: 16px":"",`min-width: ${m.minWidth}px`]]),class:"full-height full-width"},{default:C(()=>[ze(m.$slots,"default",{isFloatingMenu:!1,isDialog:!0,close:()=>r.value=!1})]),_:3},8,["style"])],2)]),_:3},8,["modelValue","position","maximized"]))}}),Hm={class:"row no-wrap q-gutter-x-xs scroll"},Vm={class:"row no-wrap q-gutter-x-sm items-center"},Um={key:1},jm={class:"row items-center no-wrap"},Wm=O("div",{class:"text-caption"},"+2",-1),Cu=xe({__name:"HorizontalOptions",props:{options:{},max:{default:2}},setup(t){const o=t,i=H(null),r=k(()=>o.options.length>o.max?o.options.slice(0,o.max-1):o.options),s=k(()=>o.options.length>o.max?o.options.slice(o.max-1).filter(Boolean):[]);async function l(u){if(!!u.onClick)if(u.onClick.constructor.name==="AsyncFunction"){i.value=u.name;try{await u.onClick()}catch{}finally{i.value=null}}else u.onClick()}return(u,d)=>(P(),Y("div",Hm,[(P(!0),Y(qe,null,Ue(r.value,(h,f)=>(P(),Y("div",{key:h==null?void 0:h.name,style:St(f===0?"flex-grow: 1":"")},[h?(P(),R(be,tn({key:0,"no-caps":"",flat:"",rounded:"",align:"left",outline:f!==0,color:h.color||(f===0?"primary":"grey-9")},h.btnProps,{class:"full-width q-pl-xs q-pr-sm",onClick:m=>{m.stopPropagation(),l(h)},loading:i.value===h.name,disable:Boolean(i.value)&&i.value!==h.name}),{default:C(()=>[O("div",Vm,[h.icon?(P(),R(Ge,{key:0,name:h.icon},null,8,["name"])):V("",!0),h.label?(P(),Y("div",Um,ue(h.label),1)):V("",!0)])]),_:2},1040,["outline","color","onClick","loading","disable"])):V("",!0)],4))),128)),s.value.length>0?(P(),R(be,{key:0,flat:"",rounded:"",color:"primary",onClick:d[0]||(d[0]=h=>h.stopPropagation()),id:"h-options-more"},{default:C(()=>[O("div",jm,[Wm,w(Ge,{name:"more_vert"})]),w(st,{maximized:"","parent-id":"h-options-more"},{default:C(({close:h})=>[w(Bt,null,{default:C(()=>[w(Cn,{caption:"",class:"q-pa-sm q-mt-sm"},{default:C(()=>[Ze(" M\xE1s opciones ")]),_:1}),(P(!0),Y(qe,null,Ue(s.value,f=>At((P(),R(tt,{clickable:"",key:f==null?void 0:f.name,loading:i.value===f.name,disable:Boolean(i.value)&&i.value!==f.name,onClick:m=>{m.stopPropagation(),f?l(f).then(h):h()}},{default:C(()=>[w(it,null,{default:C(()=>[Ze(ue(f==null?void 0:f.label),1)]),_:2},1024)]),_:2},1032,["loading","disable","onClick"])),[[Yn]])),128))]),_:2},1024)]),_:1})]),_:1})):V("",!0)]))}}),Ym={class:"row full-width q-pl-md items-center justify-between q-mt-xs no-wrap"},Gm={key:0,class:"q-ml-xs"},Km={class:"row"},Qm={key:0,class:"column q-mt-sm text-grey-9"},Xm={key:0,class:"q-mt-xs q-ml-xs",style:{"margin-left":"33px"}},Jm={class:"row items-center"},ep={class:"row q-gutter-x-xs"},tp={class:"text-caption text-grey-9 text-weight-medium"},np={class:"row q-gutter-x-xs"},op={class:"text-caption text-grey-9 text-weight-medium"},ip={key:1,class:"q-mt-sm q-pt-xs"},Ta=xe({__name:"ContactAddressItem",props:{dark:{type:[Boolean,null]},square:{type:Boolean},flat:{type:Boolean},bordered:{type:Boolean},tag:{},address:{},showActionsIndices:{},flatOptions:{type:Boolean},options:{},sutitleLines:{},hideTasks:{type:Boolean},hideAddress:{type:Boolean},isSelected:{type:Boolean},fillNewSaleBtn:{type:Boolean},showAllSubtitleLines:{type:Boolean},hideContactInfo:{type:Boolean}},setup(t){const o=t,{selectedAddress:i}=bn(),{tasks:r}=bo(),s=It(),l=k(()=>{const d=r.value.filter(m=>{var v;return((v=m.contactAddress)==null?void 0:v.id)===o.address.id}),h=d.filter(m=>m.currentStatus.type==="p"),f=d.filter(m=>m.currentStatus.type==="c");return{pending:h,completed:f}}),u=k(()=>[{name:"navigate",label:s.screen.width<320?"M\xE1s":"M\xE1s detalles",onClick:()=>i.value=o.address}].filter((d,h)=>Boolean(d)&&(o.showActionsIndices?o.showActionsIndices.includes(h):!0)));return(d,h)=>{var f;return P(),R(Zm,{title:d.address.description||"",subtitle:((f=d.address.coords)==null?void 0:f.address)||"",sutitleLines:d.sutitleLines,"hide-address":d.hideAddress,"is-selected":d.isSelected},{title:C(({value:m})=>[O("div",Ym,[O("div",{class:at(["text-h6 text-weight-bold",{"text-grey-4":!m}]),style:{"line-height":"22px"}},ue(m||"Sin descripci\xF3n"),3),d.hideTasks?V("",!0):(P(),Y("div",Gm,[O("div",Km,[l.value.pending.length>0?(P(),R(Nt,{key:0,color:"orange-9",class:"flex flex-center",style:{"border-radius":"12px",height:"19px"}},{default:C(()=>[Ze(ue(l.value.pending.length)+" ",1),w(Ge,{name:"hourglass_top"}),w(Un,null,{default:C(()=>[Ze(ue(l.value.pending.length)+" "+ue(l.value.pending.length===1?"tarea pendiente":"tareas pendientes"),1)]),_:1})]),_:1})):l.value.completed.length>0?(P(),R(Nt,{key:1,color:"green","text-color":"white",style:{"border-radius":"12px",height:"19px"}},{default:C(()=>[Ze(ue(l.value.completed.length)+" ",1),w(Ge,{name:"check"}),w(Un,null,{default:C(()=>[Ze(" Todas las tareas completadas ")]),_:1})]),_:1})):V("",!0)])]))])]),subtitle:C(({value:m})=>[m?(P(),Y("div",Qm,[w(Cn,{class:"text-caption",style:{"line-height":"15px"},lines:d.showAllSubtitleLines?void 0:2},{default:C(()=>[Ze(ue(m),1)]),_:2},1032,["lines"])])):V("",!0)]),default:C(()=>{var m,v,g;return[!d.hideContactInfo&&d.address.contact?(P(),Y("div",Xm,[O("div",Jm,[O("div",ep,[w(Ge,{name:"o_person",size:"18px",class:"text-grey-7"}),O("div",tp,ue((m=d.address.contact)==null?void 0:m.fullName),1)]),w(Ke,{spaced:"",vertical:"",inset:""}),O("div",np,[w(Ge,{name:"o_badge",size:"18px",class:"text-grey-7"}),O("div",op,ue((v=d.address.contact)==null?void 0:v.document),1)])])])):V("",!0),d.isSelected&&!((g=d.options)!=null&&g.hideActions)&&u.value.length>0?(P(),Y("div",ip,[w(Cu,{options:u.value},null,8,["options"])])):V("",!0)]}),_:1},8,["title","subtitle","sutitleLines","hide-address","is-selected"])}}}),ap=xe({__name:"BaseSearcher",props:ut({label:{},originData:{},searchProps:{}},{modelValue:{local:!0,default:""},filteredData:{default:[]}}),emits:["update:modelValue","update:filteredData"],setup(t){const o=t,i=wt(t,"modelValue",{local:!0}),r=wt(t,"filteredData");function s(){i.value===""?r.value=o.originData:r.value=o.originData.filter(l=>o.searchProps.some(u=>(typeof u=="string"?`${Reflect.get(l,u)}`:u(l)||"").toLowerCase().includes(i.value.toLowerCase())))}return ke(i,s),ke(()=>o.originData,s),yt(s),(l,u)=>(P(),R(to,{dense:"",borderless:"",modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=d=>i.value=d),type:"text",placeholder:l.label||"Buscar",class:"q-my-md bg-grey-2 q-px-sm rounded-borders",debounce:700},$n({prepend:C(()=>[w(Ge,{name:"search"})]),_:2},[i.value?{name:"append",fn:C(()=>[w(be,{flat:"",dense:"",round:"",icon:"close",onClick:u[0]||(u[0]=d=>i.value="")})]),key:"0"}:void 0]),1032,["modelValue","placeholder"]))}});function Cl(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const o=parseInt(t,10);return isNaN(o)?0:o}var La=Fs({name:"close-popup",beforeMount(t,{value:o}){const i={depth:Cl(o),handler(r){i.depth!==0&&setTimeout(()=>{const s=Cd(t);s!==void 0&&Sd(s,r,i.depth)})},handlerKey(r){ga(r,13)===!0&&i.handler(r)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:o,oldValue:i}){o!==i&&(t.__qclosepopup.depth=Cl(o))},beforeUnmount(t){const o=t.__qclosepopup;t.removeEventListener("click",o.handler),t.removeEventListener("keyup",o.handlerKey),delete t.__qclosepopup}});const Ma=xe({__name:"ResponsiveMenuOptions",props:ut({title:{},menuProps:{},listProps:{},itemProps:{},options:{}},{modelValue:{local:!0,default:!1}}),emits:["update:modelValue"],setup(t){const o=wt(t,"modelValue",{local:!0});return(i,r)=>(P(),R(st,tn(i.menuProps,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=s=>o.value=s)}),{default:C(()=>[w(Bt,Qt(rn(i.listProps)),{default:C(()=>[i.title?(P(),R(Cn,{key:0,caption:"",class:"q-pa-sm"},{default:C(()=>[Ze(ue(i.title),1)]),_:1})):V("",!0),(P(!0),Y(qe,null,Ue(i.options,s=>At((P(),R(tt,tn({key:s.name,clickable:""},i.itemProps,{onClick:l=>s.onClick?s.onClick():void 0}),{default:C(()=>[w(it,{avatar:"",style:{"min-width":"0"}},{default:C(()=>[w(Ge,{color:s.color||"grey-8",name:s.icon},null,8,["color","name"])]),_:2},1024),w(it,{class:at(`text-${s.color||"grey-8"}`)},{default:C(()=>[Ze(ue(s.label),1)]),_:2},1032,["class"])]),_:2},1040,["onClick"])),[[Yn],[La]])),128))]),_:1},16)]),_:1},16,["modelValue"]))}}),sp=["width","height","color"],rp=Td('<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="6"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="4"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>',2),lp=[rp],Su=xe({__name:"TailSpinner",props:{size:{default:"20px"},color:{default:"grey"}},setup(t){return(o,i)=>(P(),Y("svg",{class:at(["q-spinner",`text-${o.color}`]),width:o.size,height:o.size,color:o.color,viewBox:"-6 -6 48 48",xmlns:"http://www.w3.org/2000/svg"},lp,10,sp))}}),up={class:"column bg-grey-2 rounded-borders q-pa-md flex flex-center text-grey-7"},cp={class:"text-subtitle2"},Tu=xe({__name:"EmptyListMessage",props:{title:{}},setup(t){return(o,i)=>(P(),Y("div",up,[w(Ge,{name:"o_info",size:"34px"}),O("div",cp,[ze(o.$slots,"default",{title:o.title},()=>[Ze(" No hay registros disponibles ")])])]))}}),dp={class:"column q-px-md q-py-xs"},hp={class:"row justify-between items-center"},fp={class:"row items-center"},mp={key:1,class:"text-h5"},pp={class:"q-ml-sm text-weight-light"},vp={key:0,class:"row items-center q-gutter-xs",style:{"margin-bottom":"-10px"}},gp={class:"text-caption text-grey-7"},_p={key:1,class:"row items-center"},yp={key:2,class:"column"},bp=O("div",{class:"text-caption text-grey-6"},"Filtros",-1),wp={class:"row q-gutter-sm"},xp={class:"text-weight-medium"},Pp={key:1,class:"q-pa-md"},kp={key:2,class:"column"},Cp=10,Qn=xe({__name:"BaseList",props:ut({filter:{},addBtn:{type:[Boolean,String,Object]},addDialogProps:{},addBtnOut:{type:Boolean},dense:{type:Boolean},separator:{type:Boolean},elements:{},titleSingular:{},titlePlural:{},search:{},filters:{},alwaysShowSelected:{type:Boolean,default:!0},pageName:{},limitElements:{default:4},multiSelect:{type:Boolean},loading:{type:Boolean},selectedItems:{},initialFiltersData:{},onClose:{}},{selected:{required:!1,local:!0,default:null}}),emits:ut(["select","select-many","select-filter","filter-change"],["update:selected"]),setup(t,{emit:o}){const i=t,r=o,s=wt(t,"selected",{local:!0}),l=k(()=>{var $;return(i.filters||i.search)&&((($=S.value)==null?void 0:$.length)||0)>0}),u=H(!1),d=H(0),h=k(()=>i.limitElements+d.value*Cp),f=k({get:()=>h.value>=q.value.length,set:$=>!$&&(d.value=0)}),m=k(()=>{var j;return i.multiSelect||!s.value||!i.alwaysShowSelected?!0:(((j=q.value)==null?void 0:j.map(ae=>D(ae)).indexOf(D(s.value)))||-1)<M.value.length}),v=H(!1),g=H(i.initialFiltersData||{}),_=H(Object.keys(i.initialFiltersData||{})),S=k(()=>{var $;return(i.filter?($=i.elements)==null?void 0:$.filter(i.filter):i.elements)||[]}),M=k(()=>{let $=S.value;return i.filters&&i.filters.filterProps.length>0&&($=$.filter(j=>{var ae;return(ae=i.filters)==null?void 0:ae.filterProps.every(W=>W.itemIsVisible(Reflect.get(j,W.fieldName),Reflect.get(g.value,W.name||W.fieldName)))})),$}),q=H(M.value);ke(M,()=>{q.value=M.value}),ke(q,()=>{f.value=!1,r("filter-change",q.value)});const F=k(()=>q.value.slice(0,m.value?h.value:h.value-1)),{selectedPageName:ee}=Pi();function B($){var j;return i.multiSelect?(j=i.selectedItems)==null?void 0:j.some(ae=>D(ae)===D($)):s!=null&&s.value?D($)===D(s.value):!1}function z($){_.value=_.value.filter(j=>j!==$),g.value[$]=void 0}function D($){return Reflect.get($,"id")}const U=It();async function Z($){var j,ae;if(U.platform.is.mobile||i.pageName&&(ee.value=i.pageName),i.multiSelect){const oe=((j=i.selectedItems)==null?void 0:j.some(re=>D(re)===D($)))||!1?(ae=i.selectedItems)==null?void 0:ae.filter(re=>D(re)!==D($)):[...i.selectedItems||[],$];r("select-many",oe||[])}else r("select",$),s.value=$}return($,j)=>(P(),R(hn,{class:"q-pa-none shadow-0"},{default:C(()=>[w(ct,{class:"q-px-none q-pt-none"},{default:C(()=>{var ae,W;return[O("div",dp,[O("div",hp,[O("div",fp,[$.onClose?(P(),R(be,{key:0,dense:"",round:"",flat:"",color:"grey-7",icon:"arrow_back",class:"q-mr-sm",onClick:$.onClose},null,8,["onClick"])):V("",!0),$.titleSingular?(P(),Y("div",mp,[O("strong",null,ue(((ae=M.value)==null?void 0:ae.length)||0),1),O("span",pp,ue(((W=M.value)==null?void 0:W.length)===1?$.titleSingular||"":$.titlePlural||($.titleSingular?`${$.titleSingular}s`:"")),1)])):V("",!0)]),$.addBtn||$.addBtnOut?(P(),R(be,tn({key:0,flat:"",dense:"",rounded:"","no-caps":"",color:"primary",icon:"add",label:typeof $.addBtn=="string"?$.addBtn:$.titleSingular||void 0},typeof $.addBtn!="string"&&typeof $.addBtn!="boolean"?$.addBtn:void 0,{id:"add-elem-btn",onClick:j[1]||(j[1]=oe=>u.value=!0)}),{default:C(()=>{var oe;return[$.addBtnOut&&u.value?ze($.$slots,"add-btn",{key:0,showAddDialog:u.value}):u.value?(P(),R(st,tn({key:1,modelValue:u.value,"onUpdate:modelValue":j[0]||(j[0]=re=>u.value=re),mode:"dialog",position:"standard"},$.addDialogProps,{"parent-id":"add-elem-btn","min-width":(oe=$.addDialogProps)!=null&&oe.maximized?void 0:400}),{default:C(()=>[ze($.$slots,"add-btn",{showAddDialog:u.value,close:()=>u.value=!1})]),_:3},16,["modelValue","min-width"])):V("",!0)]}),_:3},16,["label"])):V("",!0)]),$.loading?(P(),Y("div",vp,[w(Su,{size:"13px"}),O("div",gp," Cargando "+ue($.titlePlural||`${$.titleSingular}s`),1)])):V("",!0),l.value?(P(),Y("div",_p,[$.search?(P(),R(ap,{key:0,"origin-data":M.value,filteredData:q.value,"onUpdate:filteredData":j[2]||(j[2]=oe=>q.value=oe),label:$.search.label,searchProps:$.search.searchProps,class:"flex q-mr-sm",style:{"flex-grow":"1"}},null,8,["origin-data","filteredData","label","searchProps"])):V("",!0),$.filters?(P(),R(be,{key:1,dense:"",flat:"",icon:"o_filter_alt",color:"grey-5",class:"q-pa-sm bg-grey-2",id:"base-list-filter-btn"},{default:C(()=>{var oe,re,ve;return[w(Ma,{title:(oe=$.filters)==null?void 0:oe.label,"menu-props":{parentId:"base-list-filter-btn",maximized:!0},modelValue:v.value,"onUpdate:modelValue":j[3]||(j[3]=Se=>v.value=Se),options:(ve=(re=$.filters)==null?void 0:re.filterProps.filter(Se=>!_.value.includes(Se.name||Se.fieldName)))==null?void 0:ve.map((Se,Ae)=>({icon:Se.icon||"",label:Se.fieldLabel,name:Se.name||Se.fieldName,color:"grey-7",onClick:()=>{$.$emit("select-filter",Se.name||Se.fieldName),v.value=!1,_.value.push(Se.name||Se.fieldName)}}))},null,8,["title","modelValue","options"])]}),_:1})):V("",!0)])):V("",!0),$.filters&&_.value.length>0?(P(),Y("div",yp,[bp,O("div",wp,[(P(!0),Y(qe,null,Ue($.filters.filterProps.filter(oe=>_.value.includes(oe.name||oe.fieldName)),oe=>(P(),R(tt,{dense:"",clickable:"",id:"active-filters-list-item",key:oe.name||oe.fieldName,class:"q-px-sm text-caption row items-center rounded-borders bg-grey-1 text-grey-8"},{default:C(()=>[O("div",null,[O("span",null,ue(oe.fieldLabel)+": ",1),O("span",xp,ue(oe.label?oe.label(g.value[oe.name||oe.fieldName]):""),1)]),w(be,{flat:"",dense:"",round:"",icon:"close",size:"9px",onClick:re=>z(oe.name||oe.fieldName)},null,8,["onClick"]),w(st,{"parent-id":"active-filters-list-item","max-width":500},{default:C(({close:re})=>[ze($.$slots,`filter-${oe.name||oe.fieldName}`,{selected:k({get:()=>g.value[oe.name||oe.fieldName],set:ve=>g.value[oe.name||oe.fieldName]=ve}),close:re}),w(Ke,{spaced:""}),w(be,{"no-caps":"",flat:"",dense:"",color:"red",icon:"close",label:"Remover filtro",class:"q-mx-sm q-mb-sm q-pa-sm rounded-borders",onClick:ve=>z(oe.name||oe.fieldName)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])])):V("",!0)]),q.value.length>0?(P(),R(Bt,{key:0},{default:C(()=>[$.separator&&!$.multiSelect&&s.value&&!m.value&&!f.value?(P(),R(Ke,{key:0})):V("",!0),!$.multiSelect&&s.value&&!m.value&&!f.value?(P(),R(tt,{key:1,clickable:"",class:at({"bg-grey-3":B(s.value),"q-ma-sm":!$.dense,"q-pa-none":$.dense}),style:{"border-radius":"8px"},onClick:j[4]||(j[4]=oe=>Z(s.value))},{default:C(()=>[ze($.$slots,"item",{item:s.value,isSelected:!0})]),_:3},8,["class"])):V("",!0),(P(!0),Y(qe,null,Ue(F.value,(oe,re)=>(P(),Y("div",{key:D(oe)},[$.separator&&re>0?(P(),R(Ke,{key:0})):V("",!0),w(tt,{clickable:"",onClick:ve=>Z(oe),class:at([{"bg-grey-3":B(oe)},$.dense?"q-pa-none q-ma-md":"q-ma-sm"]),style:{"border-radius":"8px","min-height":"0px"}},{default:C(()=>[ze($.$slots,"item",{item:oe,isSelected:B(oe),index:re,items:q.value})]),_:2},1032,["onClick","class"])]))),128))]),_:3})):(P(),Y("div",Pp,[w(Tu,null,{default:C(()=>{var oe,re;return[O("div",null," No hay "+ue(((oe=$.titlePlural)==null?void 0:oe.toLowerCase())||`${(re=$.titleSingular)==null?void 0:re.toLowerCase()}s`)+" disponibles ",1)]}),_:1})])),q.value.length>$.limitElements?(P(),Y("div",kp,[w(be,{flat:"","no-caps":"",color:"primary",label:f.value?"Ver menos":"Ver m\xE1s",onClick:j[5]||(j[5]=oe=>f.value?f.value=!1:d.value++)},null,8,["label"])])):V("",!0)]}),_:3}),ze($.$slots,"default")]),_:3}))}});let Sp=0;const Tp=["click","keydown"],Lp={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Sp++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Mp(t,o,i,r){const s=et(Wl,Kt);if(s===Kt)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Kt;const{proxy:l}=Pt(),u=H(null),d=H(null),h=H(null),f=k(()=>t.disable===!0||t.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),m=k(()=>s.currentModel.value===t.name),v=k(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(m.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(r!==void 0?r.linkClass.value:"")),g=k(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),_=k(()=>t.disable===!0||s.hasFocus.value===!0||m.value===!1&&s.hasActiveTab.value===!0?-1:t.tabindex||0);function S(B,z){if(z!==!0&&u.value!==null&&u.value.focus(),t.disable===!0){r!==void 0&&r.hasRouterLink.value===!0&&yn(B);return}if(r===void 0){s.updateModel({name:t.name}),i("click",B);return}if(r.hasRouterLink.value===!0){const D=(U={})=>{let Z;const $=U.to===void 0||Yl(U.to,t.to)===!0?s.avoidRouteWatcher=Gl():null;return r.navigateToRouterLink(B,{...U,returnRouterError:!0}).catch(j=>{Z=j}).then(j=>{if($===s.avoidRouteWatcher&&(s.avoidRouteWatcher=!1,Z===void 0&&(j===void 0||j.message.startsWith("Avoided redundant navigation")===!0)&&s.updateModel({name:t.name})),U.returnRouterError===!0)return Z!==void 0?Promise.reject(Z):j})};i("click",B,D),B.defaultPrevented!==!0&&D();return}i("click",B)}function M(B){ga(B,[13,32])?S(B,!0):Ns(B)!==!0&&B.keyCode>=35&&B.keyCode<=40&&B.altKey!==!0&&B.metaKey!==!0&&s.onKbdNavigate(B.keyCode,l.$el)===!0&&yn(B),i("keydown",B)}function q(){const B=s.tabProps.value.narrowIndicator,z=[],D=X("div",{ref:h,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});t.icon!==void 0&&z.push(X(Ge,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&z.push(X("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&z.push(t.alertIcon!==void 0?X(Ge,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):X("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),B===!0&&z.push(D);const U=[X("div",{class:"q-focus-helper",tabindex:-1,ref:u}),X("div",{class:g.value},$s(o.default,z))];return B===!1&&U.push(D),U}const F={name:k(()=>t.name),rootRef:d,tabIndicatorRef:h,routeData:r};zt(()=>{s.unregisterTab(F)}),yt(()=>{s.registerTab(F)});function ee(B,z){const D={ref:d,class:v.value,tabindex:_.value,role:"tab","aria-selected":m.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:S,onKeydown:M,...z};return At(X(B,D,q()),[[Yn,f.value]])}return{renderTab:ee,$tabs:s}}var Et=_t({name:"QTab",props:Lp,emits:Tp,setup(t,{slots:o,emit:i}){const{renderTab:r}=Mp(t,o,i);return()=>r("div")}});let Lu=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(o),t.scrollLeft=-1e3,Lu=t.scrollLeft>=0,t.remove()}function Ap(t,o,i){const r=i===!0?["left","right"]:["top","bottom"];return`absolute-${o===!0?r[0]:r[1]}${t?` text-${t}`:""}`}const Bp=["left","center","right","justify"];var wo=_t({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>Bp.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:o,emit:i}){const{proxy:r}=Pt(),{$q:s}=r,{registerTick:l}=vi(),{registerTick:u}=vi(),{registerTick:d}=vi(),{registerTimeout:h,removeTimeout:f}=yi(),{registerTimeout:m,removeTimeout:v}=yi(),g=H(null),_=H(null),S=H(t.modelValue),M=H(!1),q=H(!0),F=H(!1),ee=H(!1),B=[],z=H(0),D=H(!1);let U=null,Z=null,$;const j=k(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:Ap(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),ae=k(()=>{const he=z.value,Ce=S.value;for(let ne=0;ne<he;ne++)if(B[ne].name.value===Ce)return!0;return!1}),W=k(()=>`q-tabs__content--align-${M.value===!0?"left":ee.value===!0?"justify":t.align}`),oe=k(()=>`q-tabs row no-wrap items-center q-tabs--${M.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),re=k(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+W.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),ve=k(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Se=k(()=>t.vertical!==!0&&s.lang.rtl===!0),Ae=k(()=>Lu===!1&&Se.value===!0);ke(Se,_e),ke(()=>t.modelValue,he=>{le({name:he,setCurrent:!0,skipEmit:!0})}),ke(()=>t.outsideArrows,ie);function le({name:he,setCurrent:Ce,skipEmit:ne}){S.value!==he&&(ne!==!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",he),(Ce===!0||t["onUpdate:modelValue"]===void 0)&&(de(S.value,he),S.value=he))}function ie(){l(()=>{Le({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function Le(he){if(ve.value===void 0||_.value===null)return;const Ce=he[ve.value.container],ne=Math.min(_.value[ve.value.scroll],Array.prototype.reduce.call(_.value.children,(Ie,Re)=>Ie+(Re[ve.value.content]||0),0)),Te=Ce>0&&ne>Ce;M.value=Te,Te===!0&&u(_e),ee.value=Ce<parseInt(t.breakpoint,10)}function de(he,Ce){const ne=he!=null&&he!==""?B.find(Ie=>Ie.name.value===he):null,Te=Ce!=null&&Ce!==""?B.find(Ie=>Ie.name.value===Ce):null;if(ne&&Te){const Ie=ne.tabIndicatorRef.value,Re=Te.tabIndicatorRef.value;U!==null&&(clearTimeout(U),U=null),Ie.style.transition="none",Ie.style.transform="none",Re.style.transition="none",Re.style.transform="none";const Ve=Ie.getBoundingClientRect(),dt=Re.getBoundingClientRect();Re.style.transform=t.vertical===!0?`translate3d(0,${Ve.top-dt.top}px,0) scale3d(1,${dt.height?Ve.height/dt.height:1},1)`:`translate3d(${Ve.left-dt.left}px,0,0) scale3d(${dt.width?Ve.width/dt.width:1},1,1)`,d(()=>{U=setTimeout(()=>{U=null,Re.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Re.style.transform="none"},70)})}Te&&M.value===!0&&ce(Te.rootRef.value)}function ce(he){const{left:Ce,width:ne,top:Te,height:Ie}=_.value.getBoundingClientRect(),Re=he.getBoundingClientRect();let Ve=t.vertical===!0?Re.top-Te:Re.left-Ce;if(Ve<0){_.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Ve),_e();return}Ve+=t.vertical===!0?Re.height-Ie:Re.width-ne,Ve>0&&(_.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Ve),_e())}function _e(){const he=_.value;if(he===null)return;const Ce=he.getBoundingClientRect(),ne=t.vertical===!0?he.scrollTop:Math.abs(he.scrollLeft);Se.value===!0?(q.value=Math.ceil(ne+Ce.width)<he.scrollWidth-1,F.value=ne>0):(q.value=ne>0,F.value=t.vertical===!0?Math.ceil(ne+Ce.height)<he.scrollHeight:Math.ceil(ne+Ce.width)<he.scrollWidth)}function we(he){Z!==null&&clearInterval(Z),Z=setInterval(()=>{K(he)===!0&&me()},5)}function Me(){we(Ae.value===!0?Number.MAX_SAFE_INTEGER:0)}function pe(){we(Ae.value===!0?0:Number.MAX_SAFE_INTEGER)}function me(){Z!==null&&(clearInterval(Z),Z=null)}function ge(he,Ce){const ne=Array.prototype.filter.call(_.value.children,dt=>dt===Ce||dt.matches&&dt.matches(".q-tab.q-focusable")===!0),Te=ne.length;if(Te===0)return;if(he===36)return ce(ne[0]),ne[0].focus(),!0;if(he===35)return ce(ne[Te-1]),ne[Te-1].focus(),!0;const Ie=he===(t.vertical===!0?38:37),Re=he===(t.vertical===!0?40:39),Ve=Ie===!0?-1:Re===!0?1:void 0;if(Ve!==void 0){const dt=Se.value===!0?-1:1,Lt=ne.indexOf(Ce)+Ve*dt;return Lt>=0&&Lt<Te&&(ce(ne[Lt]),ne[Lt].focus({preventScroll:!0})),!0}}const Q=k(()=>Ae.value===!0?{get:he=>Math.abs(he.scrollLeft),set:(he,Ce)=>{he.scrollLeft=-Ce}}:t.vertical===!0?{get:he=>he.scrollTop,set:(he,Ce)=>{he.scrollTop=Ce}}:{get:he=>he.scrollLeft,set:(he,Ce)=>{he.scrollLeft=Ce}});function K(he){const Ce=_.value,{get:ne,set:Te}=Q.value;let Ie=!1,Re=ne(Ce);const Ve=he<Re?-1:1;return Re+=Ve*5,Re<0?(Ie=!0,Re=0):(Ve===-1&&Re<=he||Ve===1&&Re>=he)&&(Ie=!0,Re=he),Te(Ce,Re),_e(),Ie}function Ee(he,Ce){for(const ne in he)if(he[ne]!==Ce[ne])return!1;return!0}function De(){let he=null,Ce={matchedLen:0,queryDiff:9999,hrefLen:0};const ne=B.filter(Ve=>Ve.routeData!==void 0&&Ve.routeData.hasRouterLink.value===!0),{hash:Te,query:Ie}=r.$route,Re=Object.keys(Ie).length;for(const Ve of ne){const dt=Ve.routeData.exact.value===!0;if(Ve.routeData[dt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Lt,query:Sn,matched:oo,href:Po}=Ve.routeData.resolvedLink.value,mn=Object.keys(Sn).length;if(dt===!0){if(Lt!==Te||mn!==Re||Ee(Ie,Sn)===!1)continue;he=Ve.name.value;break}if(Lt!==""&&Lt!==Te||mn!==0&&Ee(Sn,Ie)===!1)continue;const $t={matchedLen:oo.length,queryDiff:Re-mn,hrefLen:Po.length-Lt.length};if($t.matchedLen>Ce.matchedLen){he=Ve.name.value,Ce=$t;continue}else if($t.matchedLen!==Ce.matchedLen)continue;if($t.queryDiff<Ce.queryDiff)he=Ve.name.value,Ce=$t;else if($t.queryDiff!==Ce.queryDiff)continue;$t.hrefLen>Ce.hrefLen&&(he=Ve.name.value,Ce=$t)}he===null&&B.some(Ve=>Ve.routeData===void 0&&Ve.name.value===S.value)===!0||le({name:he,setCurrent:!0})}function Ne(he){if(f(),D.value!==!0&&g.value!==null&&he.target&&typeof he.target.closest=="function"){const Ce=he.target.closest(".q-tab");Ce&&g.value.contains(Ce)===!0&&(D.value=!0,M.value===!0&&ce(Ce))}}function rt(){h(()=>{D.value=!1},30)}function mt(){jt.avoidRouteWatcher===!1?m(De):v()}function Vt(){if($===void 0){const he=ke(()=>r.$route.fullPath,mt);$=()=>{he(),$=void 0}}}function Ut(he){B.push(he),z.value++,ie(),he.routeData===void 0||r.$route===void 0?m(()=>{if(M.value===!0){const Ce=S.value,ne=Ce!=null&&Ce!==""?B.find(Te=>Te.name.value===Ce):null;ne&&ce(ne.rootRef.value)}}):(Vt(),he.routeData.hasRouterLink.value===!0&&mt())}function pt(he){B.splice(B.indexOf(he),1),z.value--,ie(),$!==void 0&&he.routeData!==void 0&&(B.every(Ce=>Ce.routeData===void 0)===!0&&$(),mt())}const jt={currentModel:S,tabProps:j,hasFocus:D,hasActiveTab:ae,registerTab:Ut,unregisterTab:pt,verifyRouteModel:mt,updateModel:le,onKbdNavigate:ge,avoidRouteWatcher:!1};Xt(Wl,jt);function fn(){U!==null&&clearTimeout(U),me(),$!==void 0&&$()}let kt;return zt(fn),Kl(()=>{kt=$!==void 0,fn()}),Ql(()=>{kt===!0&&Vt(),ie()}),()=>X("div",{ref:g,class:oe.value,role:"tablist",onFocusin:Ne,onFocusout:rt},[X(oa,{onResize:Le}),X("div",{ref:_,class:re.value,onScroll:_e},Dt(o.default)),X(Ge,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(q.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||s.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:Me,onTouchstartPassive:Me,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me}),X(Ge,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||s.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:pe,onTouchstartPassive:pe,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me})])}});const or={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ep=Object.keys(or);or.all=!0;function fa(t){const o={};for(const i of Ep)t[i]===!0&&(o[i]=!0);return Object.keys(o).length===0?or:(o.horizontal===!0?o.left=o.right=!0:o.left===!0&&o.right===!0&&(o.horizontal=!0),o.vertical===!0?o.up=o.down=!0:o.up===!0&&o.down===!0&&(o.vertical=!0),o.horizontal===!0&&o.vertical===!0&&(o.all=!0),o)}const zp=["INPUT","TEXTAREA"];function ma(t,o){return o.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof o.handler=="function"&&zp.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(o.uid)===-1)}function Dp(t){const o=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((i,r)=>{const s=parseFloat(i);s&&(o[r]=s)}),o}var $p=Fs({name:"touch-swipe",beforeMount(t,{value:o,arg:i,modifiers:r}){if(r.mouse!==!0&&ln.has.touch!==!0)return;const s=r.mouseCapture===!0?"Capture":"",l={handler:o,sensitivity:Dp(i),direction:fa(r),noop:Zs,mouseStart(u){ma(u,l)&&Xl(u)&&(Jt(l,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),l.start(u,!0))},touchStart(u){if(ma(u,l)){const d=u.target;Jt(l,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","notPassiveCapture"],[d,"touchend","end","notPassiveCapture"]]),l.start(u)}},start(u,d){ln.is.firefox===!0&&Oo(t,!0);const h=Io(u);l.event={x:h.left,y:h.top,time:Date.now(),mouse:d===!0,dir:!1}},move(u){if(l.event===void 0)return;if(l.event.dir!==!1){yn(u);return}const d=Date.now()-l.event.time;if(d===0)return;const h=Io(u),f=h.left-l.event.x,m=Math.abs(f),v=h.top-l.event.y,g=Math.abs(v);if(l.event.mouse!==!0){if(m<l.sensitivity[1]&&g<l.sensitivity[1]){l.end(u);return}}else if(window.getSelection().toString()!==""){l.end(u);return}else if(m<l.sensitivity[2]&&g<l.sensitivity[2])return;const _=m/d,S=g/d;l.direction.vertical===!0&&m<g&&m<100&&S>l.sensitivity[0]&&(l.event.dir=v<0?"up":"down"),l.direction.horizontal===!0&&m>g&&g<100&&_>l.sensitivity[0]&&(l.event.dir=f<0?"left":"right"),l.direction.up===!0&&m<g&&v<0&&m<100&&S>l.sensitivity[0]&&(l.event.dir="up"),l.direction.down===!0&&m<g&&v>0&&m<100&&S>l.sensitivity[0]&&(l.event.dir="down"),l.direction.left===!0&&m>g&&f<0&&g<100&&_>l.sensitivity[0]&&(l.event.dir="left"),l.direction.right===!0&&m>g&&f>0&&g<100&&_>l.sensitivity[0]&&(l.event.dir="right"),l.event.dir!==!1?(yn(u),l.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),bi(),l.styleCleanup=M=>{l.styleCleanup=void 0,document.body.classList.remove("non-selectable");const q=()=>{document.body.classList.remove("no-pointer-events--children")};M===!0?setTimeout(q,50):q()}),l.handler({evt:u,touch:l.event.mouse!==!0,mouse:l.event.mouse,direction:l.event.dir,duration:d,distance:{x:m,y:g}})):l.end(u)},end(u){l.event!==void 0&&(zn(l,"temp"),ln.is.firefox===!0&&Oo(t,!1),l.styleCleanup!==void 0&&l.styleCleanup(!0),u!==void 0&&l.event.dir!==!1&&yn(u),l.event=void 0)}};if(t.__qtouchswipe=l,r.mouse===!0){const u=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";Jt(l,"main",[[t,"mousedown","mouseStart",`passive${u}`]])}ln.has.touch===!0&&Jt(l,"main",[[t,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,o){const i=t.__qtouchswipe;i!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&i.end(),i.handler=o.value),i.direction=fa(o.modifiers))},beforeUnmount(t){const o=t.__qtouchswipe;o!==void 0&&(zn(o,"main"),zn(o,"temp"),ln.is.firefox===!0&&Oo(t,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete t.__qtouchswipe)}});function Mu(){const t=new Map;return{getCache:function(o,i){return t[o]===void 0?t[o]=i:t[o]},getCacheWithFn:function(o,i){return t[o]===void 0?t[o]=i():t[o]}}}const Op={name:{required:!0},disable:Boolean},Sl={setup(t,{slots:o}){return()=>X("div",{class:"q-panel scroll",role:"tabpanel"},Dt(o.default))}},qp={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ip=["update:modelValue","beforeTransition","transition"];function Rp(){const{props:t,emit:o,proxy:i}=Pt(),{getCacheWithFn:r}=Mu();let s,l;const u=H(null),d=H(null);function h(re){const ve=t.vertical===!0?"up":"left";Z((i.$q.lang.rtl===!0?-1:1)*(re.direction===ve?1:-1))}const f=k(()=>[[$p,h,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),m=k(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),v=k(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),g=k(()=>`--q-transition-duration: ${t.transitionDuration}ms`),_=k(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),S=k(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),M=k(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);ke(()=>t.modelValue,(re,ve)=>{const Se=B(re)===!0?z(re):-1;l!==!0&&U(Se===-1?0:Se<z(ve)?-1:1),u.value!==Se&&(u.value=Se,o("beforeTransition",re,ve),ft(()=>{o("transition",re,ve)}))});function q(){Z(1)}function F(){Z(-1)}function ee(re){o("update:modelValue",re)}function B(re){return re!=null&&re!==""}function z(re){return s.findIndex(ve=>ve.props.name===re&&ve.props.disable!==""&&ve.props.disable!==!0)}function D(){return s.filter(re=>re.props.disable!==""&&re.props.disable!==!0)}function U(re){const ve=re!==0&&t.animated===!0&&u.value!==-1?"q-transition--"+(re===-1?m.value:v.value):null;d.value!==ve&&(d.value=ve)}function Z(re,ve=u.value){let Se=ve+re;for(;Se>-1&&Se<s.length;){const Ae=s[Se];if(Ae!==void 0&&Ae.props.disable!==""&&Ae.props.disable!==!0){U(re),l=!0,o("update:modelValue",Ae.props.name),setTimeout(()=>{l=!1});return}Se+=re}t.infinite===!0&&s.length!==0&&ve!==-1&&ve!==s.length&&Z(re,re===-1?s.length:-1)}function $(){const re=z(t.modelValue);return u.value!==re&&(u.value=re),!0}function j(){const re=B(t.modelValue)===!0&&$()&&s[u.value];return t.keepAlive===!0?[X(Md,S.value,[X(M.value===!0?r(_.value,()=>({...Sl,name:_.value})):Sl,{key:_.value,style:g.value},()=>re)])]:[X("div",{class:"q-panel scroll",style:g.value,key:_.value,role:"tabpanel"},[re])]}function ae(){if(s.length!==0)return t.animated===!0?[X(Vn,{name:d.value},j)]:j()}function W(re){return s=Ld(Dt(re.default,[])).filter(ve=>ve.props!==null&&ve.props.slot===void 0&&B(ve.props.name)===!0),s.length}function oe(){return s}return Object.assign(i,{next:q,previous:F,goTo:ee}),{panelIndex:u,panelDirectives:f,updatePanelsList:W,updatePanelIndex:$,getPanelContent:ae,getEnabledPanels:D,getPanels:oe,isValidPanelName:B,keepAliveProps:S,needsUniqueKeepAliveWrapper:M,goToPanelByOffset:Z,goToPanel:ee,nextPanel:q,previousPanel:F}}var Zt=_t({name:"QTabPanel",props:Op,setup(t,{slots:o}){return()=>X("div",{class:"q-tab-panel",role:"tabpanel"},Dt(o.default))}}),Vo=_t({name:"QTabPanels",props:{...qp,...Jn},emits:Ip,setup(t,{slots:o}){const i=Pt(),r=eo(t,i.proxy.$q),{updatePanelsList:s,getPanelContent:l,panelDirectives:u}=Rp(),d=k(()=>"q-tab-panels q-panel-parent"+(r.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(o),Ss("div",{class:d.value},l(),"pan",t.swipeable,()=>u.value))}});const Fp={key:0,class:"text-red-8 text-weight-medium q-px-xs"},ea=xe({__name:"BaseInlineError",props:{message:{}},setup(t){return(o,i)=>o.message?(P(),Y("div",Fp,ue(Array.isArray(o.message)?o.message[0]:o.message),1)):V("",!0)}});function Au(){const t=va(),o=Tt(),{getLocalData:i}=Pn("contacts");async function r(){return new Promise(v=>setTimeout(v,200,i()))}const{data:s,isLoading:l,error:u,isError:d,refetch:h}=xi(["contacts"],r,{refetchOnWindowFocus:!1,staleTime:_a,initialData:i(),initialDataUpdatedAt:0,enabled:k(()=>o.value.hasListContactsPermission())}),f=k(()=>s.value||[]);function m(v){const g=t.getQueryData(["contacts"]);return(g==null?void 0:g.find(_=>_.id===v))||null}return{contacts:f,getContactById:m,contactsError:k(()=>{var v,g;return(g=(v=u.value)==null?void 0:v.response)==null?void 0:g.data}),isGettingContacts:l,isGettingContactsError:d,refetchContacts:h}}const Np={class:"q-px-sm full-width"},Zp={key:0,class:"text-red-9 text-weight-medium q-px-md q-mt-xs",style:{"font-size":"11px"}},en=xe({__name:"SelectBtn",props:{error:{},id:{},rightIcon:{},inputProps:{},onClick:{type:Function}},setup(t){return(o,i)=>(P(),Y(qe,null,[w(be,{"no-caps":"",color:"grey-5",align:"left",style:St([`min-height: ${o.inputProps.dense?"40px":"56px"}`,o.error?"border: 2px solid #c10015":"","border-radius: 4px;"]),class:"full-width q-pa-none",id:o.id,label:void 0,outline:"",onClick:o.onClick},{default:C(()=>[O("div",{class:at(["row items-center justify-between full-width no-wrap",{"q-py-sm":!o.inputProps.dense}])},[ze(o.$slots,"input",{},()=>[O("div",Np,[w(to,tn(o.inputProps,{"model-value":o.inputProps.modelValue||"",readonly:"",dense:"",borderless:"",class:"full-width q-pl-xs"}),null,16,["model-value"])])]),w(Ge,{class:"q-px-sm",name:o.rightIcon||"expand_more"},null,8,["name"])],2),o.inputProps.disable?V("",!0):ze(o.$slots,"default",{key:0})]),_:3},8,["style","id","onClick"]),o.error?(P(),Y("div",Zp,ue(Array.isArray(o.error)?o.error[0]:o.error),1)):V("",!0)],64))}}),Hp={class:"rounded-borders overflow-hidden full-width",style:{border:"1px solid #ccc"}},Vp={key:0,class:"column q-pa-sm"},Up={key:0,class:"text-weight-medium"},jp={class:"text-grey-9 text-caption",style:{"line-height":"16px"}},Aa=xe({__name:"BaseCoordsField",props:ut({width:{},height:{},margins:{},showZoomControl:{type:Boolean},keepStatic:{type:Boolean},useGlobalLeaflet:{type:Boolean},zoom:{default:16},isLoading:{type:Boolean},center:{},title:{},hideAddress:{type:Boolean}},{modelValue:{required:!0}}),emits:ut(["click","ready"],["update:modelValue"]),setup(t){const o=t,i=wt(t,"modelValue"),r=k({get:()=>{var s;return((s=i.value)==null?void 0:s.address)||""},set:s=>i.value={...i.value,address:s}});return(s,l)=>{var u;return P(),Y("div",Hp,[w(Xs,tn(o,{center:s.center||i.value.latlng,zoom:s.zoom,height:s.height||"140px","show-zoom-control":(u=s.showZoomControl)!=null?u:!0,onClick:l[0]||(l[0]=d=>s.$emit("click",d)),onReady:l[1]||(l[1]=d=>s.$emit("ready",d))}),{default:C(()=>[w($o,{coords:i.value.latlng},null,8,["coords"])]),_:1},16,["center","zoom","height","show-zoom-control"]),(s.title||r.value)&&!s.hideAddress?(P(),Y("div",Vp,[s.title?(P(),Y("div",Up,ue(s.title),1)):V("",!0),O("div",jp,ue(r.value),1)])):V("",!0)])}}}),Wp={class:"column flex-center"},Yp={class:"full-height"},Gp={class:"column"},Kp={class:"text-body2 text-grey-8 text-weight-bold"},Tl=xe({__name:"MapGeoSearcher",props:ut({name:{},mask:{},fillMask:{type:[Boolean,String]},reverseFillMask:{type:Boolean},unmaskedValue:{type:Boolean},modelValue:{},error:{type:[Boolean,null]},errorMessage:{},noErrorIcon:{type:Boolean},rules:{},reactiveRules:{type:Boolean},lazyRules:{type:[Boolean,String]},label:{},stackLabel:{type:Boolean},hint:{},hideHint:{type:Boolean},prefix:{},suffix:{},labelColor:{},color:{},bgColor:{},dark:{type:[Boolean,null]},loading:{type:Boolean},clearable:{type:Boolean},clearIcon:{},filled:{type:Boolean},outlined:{type:Boolean},borderless:{type:Boolean},standout:{type:[Boolean,String]},labelSlot:{type:Boolean},bottomSlots:{type:Boolean},hideBottomSpace:{type:Boolean},counter:{type:Boolean},rounded:{type:Boolean},square:{type:Boolean},dense:{type:Boolean},itemAligned:{type:Boolean},disable:{type:Boolean},readonly:{type:Boolean},autofocus:{type:Boolean},for:{},shadowText:{},type:{},debounce:{},maxlength:{},autogrow:{type:Boolean},inputClass:{},inputStyle:{},onClear:{type:Function},"onUpdate:modelValue":{type:Function},onFocus:{type:Function},onBlur:{type:Function},placeholder:{}},{modelValue:{local:!0,default:""}}),emits:ut(["select-address-label","select-address","focus-address","close"],["update:modelValue"]),setup(t,{emit:o}){const i=wt(t,"modelValue",{local:!0}),r=H(),s=o,{search:l,data:u,lastSearch:d,setSearchText:h}=Of(i.value);ke(i,()=>h(i.value)),ke(l,()=>s("select-address-label",l.value));async function f(g){s("select-address",g),m.value=!1,await ft(),m.value=!0}const m=H(!0);function v(g){if(g.key==="Enter"){const _=r.value.getNativeElement();l.value=_._value}}return(g,_)=>(P(),Y("div",Wp,[m.value?(P(),R(to,{key:0,ref_key:"inputRef",ref:r,modelValue:A(l),"onUpdate:modelValue":_[0]||(_[0]=S=>vo(l)?l.value=S:null),debounce:1e3,readonly:g.readonly,borderless:"",dense:"",autogrow:"",style:{border:"1px solid #ddd","min-width":"min(350px, 80vw)"},class:"bg-white rounded-borders q-px-sm full-width",onKeyup:v,placeholder:g.placeholder},$n({_:2},[g.readonly?void 0:{name:"after",fn:C(()=>[O("div",Yp,[g.loading?(P(),R(Su,{key:0})):(P(),R(Ge,{key:1,name:"search"}))])]),key:"0"}]),1032,["modelValue","readonly","placeholder"])):V("",!0),m.value&&A(d)?(P(),R(Bt,{key:1,bordered:"",separator:"",class:"bg-white q-mt-xs full-width",style:{"max-width":"500px"}},{default:C(()=>[w(tt,{class:"bg-grey-2"},{default:C(()=>[w(it,null,{default:C(()=>[w(Cn,{caption:""},{default:C(()=>{var S,M;return[O("div",Gp,[O("div",Kp,ue((S=A(u))==null?void 0:S.length)+" "+ue(((M=A(u))==null?void 0:M.length)===1?"resultado en:":"resultados en:"),1),O("strong",null,ue(A(d)),1)])]}),_:1})]),_:1}),w(it,{side:"",style:{"max-width":"40px","padding-left":"0"}},{default:C(()=>[w(be,{flat:"",icon:"close",onClick:_[1]||(_[1]=()=>{l.value="",d.value="",g.$emit("close")})})]),_:1})]),_:1}),(P(!0),Y(qe,null,Ue(A(u),S=>(P(),R(tt,{key:S.id,class:"q-pl-sm q-pr-xs",onClick:M=>{M.stopPropagation(),f(S)}},{default:C(()=>[w(it,{class:"text-grey-9 text-body2"},{default:C(()=>[Ze(ue(S.address),1)]),_:2},1024),w(Ke,{vertical:"",class:"q-ml-md"}),w(be,{flat:"",icon:"north_east",color:"grey-6",size:"12px",class:"q-ml-sm",onClick:M=>{M.stopPropagation(),s("focus-address",S)}},null,8,["onClick"])]),_:2},1032,["onClick"]))),128))]),_:1})):V("",!0)]))}});const Qp={class:"column"},Xp={key:0,class:"q-pa-sm"},Jp={class:"text-caption q-mt-sm text-grey-7",style:{"line-height":"20px"}},ev={class:"q-ma-sm overflow-hidden",style:{"border-radius":"8px"}},tv={class:"q-ml-sm"},nv={class:"q-mt-sm"},ov={class:"q-pa-sm row justify-between"},iv=xe({__name:"MapAddressSelector",props:ut({title:{}},{modelValue:{local:!0}}),emits:["update:modelValue"],setup(t){const o=wt(t,"modelValue",{local:!0}),i=H(o.value||[]),r=k(()=>i.value.length===2);return(s,l)=>(P(),R(en,{"input-props":{dense:!0,modelValue:"Seleccionar"},id:"address-selector-btn"},$n({default:C(()=>[w(st,{mode:"dialog","parent-id":"address-selector-btn",maximized:s.$q.platform.is.mobile,position:s.$q.platform.is.mobile?"bottom":"standard","min-width":s.$q.platform.is.mobile?void 0:Math.min(1100,s.$q.screen.width*.9),"max-width":s.$q.platform.is.mobile?void 0:Math.min(1100,s.$q.screen.width*.9)},{default:C(({close:u})=>[O("div",Qp,[s.title?(P(),Y("div",Xp,[O("div",Jp,ue(s.title),1)])):V("",!0),O("div",ev,[w(Xs,{height:s.$q.platform.is.mobile?"80vh":"60vh",onClick:l[0]||(l[0]=d=>i.value=d.latlng),center:r.value?i.value:void 0,width:"340px"},$n({default:C(()=>[r.value?(P(),R($o,{key:0,coords:i.value},null,8,["coords"])):V("",!0)]),_:2},[s.$q.platform.is.mobile?void 0:{name:"top-left",fn:C(({centerToLatlng:d})=>[O("div",tv,[w(Tl,{placeholder:"Buscar ubicaci\xF3n...",onFocusAddress:h=>d(h.latlng)},null,8,["onFocusAddress"])])]),key:"0"},s.$q.platform.is.mobile?{name:"top-center",fn:C(({centerToLatlng:d})=>[O("div",nv,[w(Tl,{onFocusAddress:h=>d(h.latlng)},null,8,["onFocusAddress"])])]),key:"1"}:void 0]),1032,["height","center"])]),O("div",ov,[w(be,{flat:"","no-caps":"",rounded:"",dense:"",color:"grey-8",label:"Cerrar",onClick:u},null,8,["onClick"]),i.value?(P(),R(be,{key:0,unelevated:"",rounded:"","no-caps":"",dense:"",color:"primary",class:"q-px-md",label:"Confirmar",onClick:()=>{i.value&&(o.value=i.value,u())}},null,8,["onClick"])):V("",!0)])])]),_:1},8,["maximized","position","min-width","max-width"])]),_:2},[r.value?{name:"input",fn:C(()=>[w(Aa,{"model-value":{latlng:i.value},"keep-static":""},null,8,["model-value"])]),key:"0"}:void 0]),1024))}}),av={key:0},sv={class:"text-caption text-grey-7"},rv={key:1,class:"column"},lv={key:0},uv={class:"text-caption text-grey-8"},cv={key:0,class:"text-weight-bold text-red",style:{"font-size":"14px"}},dv={key:0},hv={key:0,class:"q-pa-md rounded-borders bg-red text-white"},fv={key:1,class:"row justify-between"},Fo=xe({__name:"BaseForm",props:{autofocus:{type:Boolean,default:!0},upperTitle:{type:Boolean},actions:{type:Boolean,default:!0},fields:{},loading:{type:Boolean},initialValues:{},errors:{},validations:{}},emits:["submit","cancel","change"],setup(t,{emit:o}){const i=t,r=H(!1),s=o,l=H({...i.initialValues});function u(B,z){const D=B;if(D.fieldType==="multiselect"){const U=d(D)||[];U.includes(z)?z=U.filter(Z=>Z!==z):z=[...U,z]}s("change",D.name,z),M.value[D.name]=null,Reflect.set(l.value,D.name,z)}function d(B){const z=B;return Reflect.get(l.value,z.name||"")}function h(B){var U;const z=B,D=d(z);return["multiselect","select"].includes(z.fieldType||"")&&z.choicesLabels?Array.isArray(D)?D.map(Z=>{var $;return(($=z.choicesLabels)==null?void 0:$[`${Z}`])||D}):((U=z.choicesLabels)==null?void 0:U[`${D}`])||D:D}function f(B){const z=M.value[B||""];if(z)return z;if(!i.errors)return null;const D=Reflect.get(i.errors,B||"");return Array.isArray(D)?D[0]:D}function m(B){if(!B.when)return!0;const z=Function("data",B.when);return Boolean(z({...l.value}))}function v(B){return B.filter(z=>z.when?m(z):!0)}const g=k(()=>i.fields.filter(B=>!B.isSection)[0].name),_={required:B=>B!=null&&B!=""||"Este campo no puede estar en blanco."};function S(){M.value={},q()&&s("submit",l.value)}const M=H({});function q(){return ee()&&F()}function F(){if(!i.validations)return!0;M.value={};for(const B of i.validations){const D=Function("data",B)({...l.value});typeof D=="string"&&(M.value.$formError=D)}return Object.keys(M.value).length===0}function ee(){var B;M.value={};for(const z of i.fields){if(!(z!=null&&z.name)||!m(z))continue;const D=Reflect.get(l.value,z.name);if((B=z.props)!=null&&B.required){const U=_.required(D);typeof U=="string"&&(M.value[z.name]=U)}}return Object.keys(M.value).length===0}return(B,z)=>(P(),R(Yd,{onSubmit:S,class:"column q-gutter-y-md full-width full-height"},{default:C(()=>[(P(!0),Y(qe,null,Ue(v(B.fields),D=>{var U,Z,$,j,ae;return P(),Y("div",{key:D.name},[D.isSection?(P(),Y("div",av,[O("div",sv,ue(D.name),1)])):(P(),Y("div",rv,[B.upperTitle?(P(),Y("div",lv,[O("div",uv,[Ze(ue((U=D.props)==null?void 0:U.label)+" ",1),(Z=D.props)!=null&&Z.required?(P(),Y("span",cv," * ")):V("",!0)])])):V("",!0),!D.fieldType||D.fieldType==="input"?(P(),R(to,tn({key:1,outlined:"",dense:""},D.props,{label:B.upperTitle||($=D.props)==null?void 0:$.label,name:D.name,autofocus:B.autofocus&&g.value===D.name,"model-value":d(D),"onUpdate:modelValue":W=>u(D,W),error:Boolean(f(D.name))||void 0,"error-message":f(D.name),required:!1}),$n({_:2},[D.choices?{name:"append",fn:C(()=>[w(be,{flat:"",round:"",color:"primary",icon:"expand_more",id:`${D.name}-choices-btn`},{default:C(()=>[w(st,{"parent-id":`${D.name}-choices-btn`},{default:C(({close:W})=>[w(Bt,{bordered:""},{default:C(()=>[(P(!0),Y(qe,null,Ue(D.choices,(oe,re)=>At((P(),R(tt,{key:re,clickable:"",onClick:()=>{u(D,oe),W()}},{default:C(()=>[w(it,null,{default:C(()=>[Ze(ue(D.choicesLabels?D.choicesLabels[oe]:oe),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[La]])),128))]),_:2},1024)]),_:2},1032,["parent-id"])]),_:2},1032,["id"])]),key:"0"}:void 0]),1040,["label","name","autofocus","model-value","onUpdate:modelValue","error","error-message"])):D.fieldType==="checkbox"?(P(),R(Xi,tn({key:2,outlined:"",dense:""},D.props,{label:B.upperTitle||(j=D.props)==null?void 0:j.label,name:D.name,autofocus:B.autofocus&&g.value===D.name,"model-value":d(D)||!1,"onUpdate:modelValue":W=>u(D,W),error:Boolean(f(D.name))||void 0,"error-message":f(D.name),required:!1}),null,16,["label","name","autofocus","model-value","onUpdate:modelValue","error","error-message"])):D.fieldType==="select"?(P(),R(en,{key:3,"input-props":{dense:!0,modelValue:h(D),...D.props},error:f(D.name),id:D.name},{label:C(({label:W})=>{var oe;return[O("div",{class:at(W?"":"text-grey-6")},[W?V("",!0):(P(),Y("span",dv,"Seleccionar:")),Ze(" "+ue(`${W||((oe=D.props)==null?void 0:oe.label)||""}`),1)],2)]}),default:C(()=>[w(st,{modelValue:r.value,"onUpdate:modelValue":z[0]||(z[0]=W=>r.value=W),"parent-id":D.name,maximized:""},{default:C(()=>[w(Bt,{bordered:""},{default:C(()=>[(P(!0),Y(qe,null,Ue(D.choices,(W,oe)=>At((P(),R(tt,{key:oe,clickable:"",onClick:re=>u(D,W)},{default:C(()=>[w(it,null,{default:C(()=>[w(Xi,{"model-value":d(D)===W,"onUpdate:modelValue":()=>{u(D,W),r.value=!1},label:D.choicesLabels?D.choicesLabels[W]:W},null,8,["model-value","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1032,["onClick"])),[[Yn]])),128))]),_:2},1024)]),_:2},1032,["modelValue","parent-id"])]),_:2},1032,["input-props","error","id"])):D.fieldType==="multiselect"?(P(),R(en,{key:4,"input-props":{dense:!0,modelValue:`${h(D)||""}`,...D.props,label:B.upperTitle||(ae=D.props)==null?void 0:ae.label},error:f(D.name),id:D.name},{default:C(()=>[w(st,{"parent-id":D.name,maximized:""},{default:C(({close:W})=>[w(Bt,{bordered:"",class:"full-width"},{default:C(()=>[(P(!0),Y(qe,null,Ue(D.choices,(oe,re)=>At((P(),R(tt,{key:re,clickable:"",onClick:ve=>u(D,oe)},{default:C(()=>[w(it,null,{default:C(()=>{var ve;return[w(Xi,{"model-value":((ve=d(D))==null?void 0:ve.includes(oe))||!1,"onUpdate:modelValue":Se=>u(D,oe),label:D.choicesLabels?D.choicesLabels[oe]:oe},null,8,["model-value","onUpdate:modelValue","label"])]}),_:2},1024)]),_:2},1032,["onClick"])),[[Yn]])),128)),w(tt,null,{default:C(()=>[w(it,null,{default:C(()=>[w(be,{"no-caps":"",rounded:"",unelevated:"",color:"primary",label:"Confirmar",class:"q-px-xl",onClick:W},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["parent-id"])]),_:2},1032,["input-props","error","id"])):V("",!0)]))])}),128)),ze(B.$slots,"fields"),M.value.$formError?(P(),Y("div",hv,ue(M.value.$formError),1)):V("",!0),w(vu),B.actions?(P(),Y("div",fv,[w(be,{"no-caps":"",rounded:"",flat:"",color:"grey-7",label:"Cancelar",onClick:z[1]||(z[1]=D=>B.$emit("cancel")),disable:B.loading},null,8,["disable"]),w(be,{rounded:"","no-caps":"",unelevated:"",color:"primary",icon:"check",label:"Confirmar",type:"submit",loading:B.loading},null,8,["loading"])])):V("",!0)]),_:3}))}});function ir(t){if(!t)return"--";const o=t.split(" ");if(o.length===1)return o[0].substring(0,2).toUpperCase();if(o.length===2)return o.map(s=>s[0].toUpperCase()).join("");const i=o.map((s,l)=>{let u=s.length;return u+=l===0?4:0,u+=s.length>4?s.length-4:0,u+=(s.match(/[A-Z]/g)||[]).length*2,{word:s,score:u}});i.sort((s,l)=>l.score-s.score);const r=i.slice(0,2);return r.sort((s,l)=>o.indexOf(s.word)-o.indexOf(l.word)),r.map(s=>s.word[0].toUpperCase()).join("")}function mv(t,o){if(!t||t.length===0)return"";const{maxElements:i,showInvisibleItemsCount:r=!0,limitToTotalCharacters:s,limitToCharactersPerItem:l,elementsSeparator:u=", "}=o||{};let d=t.map(m=>`${m}`);typeof l=="number"&&(d=d.map(m=>m.length>l?m.substring(0,l)+"...":m));let h=0;typeof i=="number"&&(h=d.length-i,d=d.slice(0,i));let f=d.join(u+" ");if(typeof s=="number"){let m=0;d=[];for(const v of t.map(g=>`${g}`)){const g=v.length+(d.length>0?u.length+1:0);if(m+g>s)break;d.push(v),m+=g}f=d.join(u+" "),h=t.length-d.length}return r&&h>0&&(f+=` y ${h} m\xE1s`),f}const xo=xe({__name:"BaseItem",props:{name:{},color:{}},setup(t){return(o,i)=>(P(),R(tt,{clickable:"",class:"rounded-borders"},{default:C(()=>[w(it,{avatar:"",style:{"min-width":"0"}},{default:C(()=>[w(Dn,{size:"26px","font-size":"12px","text-color":"white",color:o.color||A(Ho)(o.name)},{default:C(()=>[Ze(ue(A(ir)(o.name)),1)]),_:1},8,["color"])]),_:1}),w(it,null,{default:C(()=>[ze(o.$slots,"default")]),_:3}),w(it,{side:""},{default:C(()=>[ze(o.$slots,"side")]),_:3})]),_:3}))}}),pv={class:"row justify-between items-center no-wrap"},vv={class:"column"},gv={class:"row items-center full-width"},_v={class:"text-weight-medium text-body2 q-mr-xs"},yv={key:0,class:"q-ml-sm"},bv=xe({__name:"ContactSelectorMenu",props:{contacts:{},excludeContacts:{},selectedContacts:{},single:{type:Boolean},onClose:{type:Function}},emits:["update"],setup(t,{emit:o}){const i=t,r=o;k(()=>i.contacts.filter(u=>{var d;return!((d=i.excludeContacts)!=null&&d.includes(u.id))}));function s(u){var f,m;if(!i.selectedContacts)return;if(i.single){r("update",[u.id]);return}const d=i.selectedContacts.indexOf(u.id),h=d<0?[...i.selectedContacts,u.id]:[...(f=i.selectedContacts)==null?void 0:f.slice(0,d),...(m=i.selectedContacts)==null?void 0:m.slice(d+1)];r("update",h)}function l(u){var d;return(d=i.selectedContacts)==null?void 0:d.includes(u.id)}return(u,d)=>(P(),R(Qn,{dense:"","add-btn":!1,"add-dialog-props":{maximized:u.$q.platform.is.mobile},class:"q-pt-md",elements:u.contacts,"title-singular":"Contacto","title-plural":"Contactos",onClose:u.onClose,search:{label:"Buscar contacto",searchProps:["description",h=>h.fullName,h=>h.document]}},{item:C(({item:h})=>[w(xo,{name:`${h.fullName}`,class:at([{"bg-primary text-white":l(h)},"q-ma-none full-width"]),onClick:f=>s(h)},{default:C(()=>[w(it,null,{default:C(()=>[O("div",pv,[O("div",vv,[O("div",gv,[O("div",_v,ue(h.fullName),1)]),O("div",{class:at(["text-caption row no-wrap items-center",l(h)?"text-grey-3":"text-grey-7"])},[w(Ge,{name:"o_badge",class:"q-mr-xs",style:{"margin-top":"-1px"}}),O("div",null,ue(h.document),1)],2)]),l(h)?(P(),Y("div",yv,[w(Ge,{name:"check"})])):V("",!0)])]),_:2},1024)]),_:2},1032,["name","class","onClick"])]),_:1},8,["add-dialog-props","elements","onClose","search"]))}}),wv={class:"row no-wrap items-center"},xv={class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}},Pv=xe({__name:"ContactSelectorInput",props:ut({title:{},label:{},includedContacts:{},single:{type:Boolean},editable:{type:Boolean,default:!0},autoclose:{type:Boolean}},{modelValue:{local:!0,default:!1}}),emits:ut(["update"],["update:modelValue"]),setup(t){const{contacts:o}=Au(),i=wt(t,"modelValue",{local:!0});return(r,s)=>(P(),Y("div",wv,[O("div",xv,ue(r.title||"Ubicaciones"),1),w(en,{id:"assigned-users-select","input-props":{dense:!0,disable:!r.editable,modelValue:r.label?r.label(r.includedContacts):`${r.includedContacts.length} ${r.includedContacts.length===1?"ubicaci\xF3n":"ubicaciones"}`}},{label:C(()=>[ze(r.$slots,"label")]),default:C(()=>[r.editable?(P(),R(st,{key:0,fit:"",modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=l=>i.value=l),"parent-id":"assigned-users-select","min-width":311,maximized:r.$q.platform.is.mobile,position:r.$q.platform.is.mobile?void 0:"standard",mode:"dialog"},{default:C(()=>[w(bv,{contacts:A(o),"selected-contacts":r.includedContacts,onClose:s[0]||(s[0]=l=>i.value=!1),onUpdate:s[1]||(s[1]=l=>{r.$emit("update",l),r.autoclose&&(i.value=!1)}),single:r.single},null,8,["contacts","selected-contacts","single"])]),_:1},8,["modelValue","maximized","position"])):V("",!0)]),_:3},8,["input-props"])]))}}),kv={class:"text-h6"},Cv={class:"q-px-md column no-wrap"},Sv={class:"column"},Tv=O("div",{class:"text-caption text-grey-8"},"Geolocalizaci\xF3n",-1),Lv=O("div",{style:{height:"16px"},class:"bg-grey-3"},null,-1),pa=xe({__name:"AddressForm",emits:["close"],setup(t,{emit:o}){const i=o,{selectedAddressId:r}=bn(),s=Tt(),{companyProfile:l}=nn(),{currentPosition:u}=Sa(),{getContactById:d}=Au(),{createAddress:h,createAddressError:f,isCreatingAddress:m}=If(),v=k(()=>s.value.hasCreateContactsPermission()),g=k(()=>s.value.hasListContactsPermission()),_=H(v.value?"new":"select"),S=H(""),M=["firstName","lastName","document","addressDescription"],q=k(()=>{var $,j;return((j=($=l.value)==null?void 0:$.contactCustomFieldsMeta)==null?void 0:j.fields.reduce((ae,W)=>({...ae,[W.name]:W}),{}))||{}});function F($,j){var W,oe;const ae=q.value[$]||{};return{...ae,name:$,props:{...ae.props,label:((W=ae.props)==null?void 0:W.label)||j.defaults.label,required:j.defaults.required||((oe=ae==null?void 0:ae.props)==null?void 0:oe.required)||!1}}}const ee=k(()=>{var $,j,ae,W,oe,re;return{name:((j=($=l.value)==null?void 0:$.addressCustomFieldsMeta)==null?void 0:j.name)||"addressForm",title:((W=(ae=l.value)==null?void 0:ae.addressCustomFieldsMeta)==null?void 0:W.title)||"Registrar nueva ubicaci\xF3n",subtitle:((re=(oe=l.value)==null?void 0:oe.addressCustomFieldsMeta)==null?void 0:re.subtitle)||"",fields:[F("addressDescription",{defaults:{label:"Descripci\xF3n de la ubicaci\xF3n"}})]}}),B=k(()=>{var $,j,ae,W,oe,re,ve,Se;return{name:((j=($=l.value)==null?void 0:$.contactCustomFieldsMeta)==null?void 0:j.name)||"contactForm",title:((W=(ae=l.value)==null?void 0:ae.contactCustomFieldsMeta)==null?void 0:W.title)||"Registrar nueva ubicaci\xF3n",subtitle:((re=(oe=l.value)==null?void 0:oe.contactCustomFieldsMeta)==null?void 0:re.subtitle)||"",fields:[F("firstName",{defaults:{label:"Nombre",required:!0}}),F("lastName",{defaults:{label:"Apellido"}}),F("document",{defaults:{label:"Documento"}}),...((Se=(ve=l.value)==null?void 0:ve.contactCustomFieldsMeta)==null?void 0:Se.fields.filter(Ae=>!M.includes(Ae.name)))||[]]}}),z=H({description:"",coords:{latlng:void 0}}),D=dn({firstName:"",lastName:"",document:"",additionalValues:{}});async function U(){var j;const $=z.value.coords.latlng||((j=u.value)==null?void 0:j.latlng)||void 0;h({...z.value,coords:$?{latlng:$}:void 0,contact:(_.value==="new"?D:S.value)||void 0},{onSuccess:ae=>{r.value=ae.id||null,i("close")}})}function Z($,j){$==="addressLatlng"?z.value.coords.latlng=j:$==="addressDescription"?z.value.description=j:M.includes($)?D[$]=j:D.additionalValues[$]=j}return($,j)=>(P(),R(hn,{class:"full-height scroll"},{default:C(()=>[w(ct,null,{default:C(()=>{var ae,W;return[O("div",kv,ue(ee.value.title||((W=(ae=A(l))==null?void 0:ae.labelReplacements)==null?void 0:W.registerNewAddressTitle)||"Registrar nueva ubicaci\xF3n"),1)]}),_:1}),w(ct,{class:"q-pa-none"},{default:C(()=>[O("div",Cv,[w(Fo,{"upper-title":"",actions:!1,autofocus:!1,fields:ee.value.fields,errors:A(f),onChange:j[1]||(j[1]=(ae,W)=>Z(ae,W)),onCancel:j[2]||(j[2]=ae=>$.$emit("close")),onSubmit:U,loading:A(m)},{fields:C(()=>{var ae,W;return[O("div",Sv,[Tv,w(iv,{"model-value":z.value.coords.latlng||((ae=A(u))==null?void 0:ae.latlng),"onUpdate:modelValue":j[0]||(j[0]=oe=>z.value.coords.latlng=oe||void 0)},null,8,["model-value"]),w(ea,{message:(W=A(f))==null?void 0:W.coords},null,8,["message"])])]}),_:1},8,["fields","errors","loading"])])]),_:1}),v.value||g.value?(P(),R(ct,{key:0,class:"q-pa-none"},{default:C(()=>[w(Ke),Lv,w(wo,{modelValue:_.value,"onUpdate:modelValue":j[3]||(j[3]=ae=>_.value=ae),"no-caps":""},{default:C(()=>[v.value?(P(),R(Et,{key:0,name:"new",label:"Nuevo contacto"})):V("",!0),g.value?(P(),R(Et,{key:1,name:"select",label:"Seleccionar contacto"})):V("",!0)]),_:1},8,["modelValue"]),w(Ke),w(Vo,{modelValue:_.value,"onUpdate:modelValue":j[7]||(j[7]=ae=>_.value=ae),animated:""},{default:C(()=>[v.value?(P(),R(Zt,{key:0,name:"new",class:"q-pb-none"},{default:C(()=>[w(Fo,{"upper-title":"",actions:!1,autofocus:!1,fields:B.value.fields,errors:A(f),onChange:j[4]||(j[4]=(ae,W)=>Z(ae,W)),onCancel:j[5]||(j[5]=ae=>$.$emit("close")),onSubmit:U,loading:A(m)},null,8,["fields","errors","loading"])]),_:1})):V("",!0),g.value?(P(),R(Zt,{key:1,name:"select"},{default:C(()=>[w(Pv,{single:"",autoclose:"",title:"Contacto asignado",editable:!0,includedContacts:[S.value],onUpdate:j[6]||(j[6]=ae=>S.value=ae[0]),label:ae=>{var W;return((W=A(d)(ae[0]))==null?void 0:W.fullName)||""}},null,8,["includedContacts","label"])]),_:1})):V("",!0)]),_:1},8,["modelValue"])]),_:1})):V("",!0),w(Ad,{align:"between",class:"q-mr-sm"},{default:C(()=>[w(be,{"no-caps":"",rounded:"",flat:"",color:"grey-7",label:"Cancelar",onClick:j[8]||(j[8]=ae=>$.$emit("close")),disable:A(m)},null,8,["disable"]),w(be,{rounded:"","no-caps":"",unelevated:"",color:"primary",icon:"check",label:"Confirmar",onClick:U,loading:A(m)},null,8,["loading"])]),_:1})]),_:1}))}}),Mv={key:0,class:"column"},Av=xe({__name:"AddressList",props:{addresses:{},filter:{type:Function},options:{},disableAutoredirect:{type:Boolean},loading:{type:Boolean}},setup(t){const{selectedAddress:o,bottomDrawerSelectedAddress:i}=bn(),{companyProfile:r}=nn(),s=Tt();return(l,u)=>{var d,h;return P(),R(Qn,{"add-btn":A(s).hasCreateAddressesPermission()?((h=(d=A(r))==null?void 0:d.labelReplacements)==null?void 0:h.addNewAddressBtn)||!0:!1,"add-dialog-props":{maximized:l.$q.platform.is.mobile},loading:l.loading,filter:l.filter,elements:l.addresses,selected:l.$q.platform.is.mobile?A(i):A(o),onSelect:u[1]||(u[1]=f=>{!l.$q.platform.is.mobile&&!l.disableAutoredirect&&(o.value=f),i.value=f}),"page-name":"addresses","title-singular":"Ubicaci\xF3n","title-plural":"Ubicaciones",search:{label:"Buscar ubicaci\xF3n",searchProps:["description",f=>{var m;return((m=f.coords)==null?void 0:m.address)||""},f=>{var m;return((m=f.contact)==null?void 0:m.fullName)||""},f=>{var m;return((m=f.contact)==null?void 0:m.document)||""}]}},{"add-btn":C(({close:f})=>[w(pa,{onClose:f},null,8,["onClose"])]),item:C(({item:f,isSelected:m})=>[w(Ta,{address:f,"is-selected":m,options:l.options},{bottom:C(()=>{var v;return[f.id===((v=A(o))==null?void 0:v.id)?(P(),Y("div",Mv,[w(be,{flat:"",rounded:"","no-caps":"",color:"primary",label:"Ver m\xE1s detalles???",class:"q-mt-sm self-end",onClick:u[0]||(u[0]=g=>{g.stopPropagation()})})])):V("",!0)]}),_:2},1032,["address","is-selected","options"])]),_:1},8,["add-btn","add-dialog-props","loading","filter","elements","selected","search"])}}});function _i(t,o=new WeakMap){if(Object(t)!==t)return t;if(o.has(t))return o.get(t);const i=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t instanceof Set?new Set:t instanceof Map?new Map:typeof t.constructor!="function"?Object.create(null):t.prototype!==void 0&&typeof t.prototype.constructor=="function"?t:new t.constructor;if(typeof t.constructor=="function"&&typeof t.valueOf=="function"){const r=t.valueOf();if(Object(r)!==r){const s=new t.constructor(r);return o.set(t,s),s}}return o.set(t,i),t instanceof Set?t.forEach(r=>{i.add(_i(r,o))}):t instanceof Map&&t.forEach((r,s)=>{i.set(s,_i(r,o))}),Object.assign(i,...Object.keys(t).map(r=>({[r]:_i(t[r],o)})))}var Bu=_t({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(t,{slots:o,emit:i}){const{proxy:r}=Pt(),{$q:s}=r,l=H(null),u=H(""),d=H("");let h=!1;const f=k(()=>Bd({initialValue:u.value,validate:t.validate,set:m,cancel:v,updatePosition:g},"value",()=>d.value,z=>{d.value=z}));function m(){t.validate(d.value)!==!1&&(_()===!0&&(i("save",d.value,u.value),i("update:modelValue",d.value)),S())}function v(){_()===!0&&i("cancel",d.value,u.value),S()}function g(){ft(()=>{l.value.updatePosition()})}function _(){return Yl(d.value,u.value)===!1}function S(){h=!0,l.value.hide()}function M(){h=!1,u.value=_i(t.modelValue),d.value=_i(t.modelValue),i("beforeShow")}function q(){i("show")}function F(){h===!1&&_()===!0&&(t.autoSave===!0&&t.validate(d.value)===!0?(i("save",d.value,u.value),i("update:modelValue",d.value)):i("cancel",d.value,u.value)),i("beforeHide")}function ee(){i("hide")}function B(){const z=o.default!==void 0?[].concat(o.default(f.value)):[];return t.title&&z.unshift(X("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},t.title)),t.buttons===!0&&z.push(X("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[X(be,{flat:!0,color:t.color,label:t.labelCancel||s.lang.label.cancel,onClick:v}),X(be,{flat:!0,color:t.color,label:t.labelSet||s.lang.label.set,onClick:m})])),z}return Object.assign(r,{set:m,cancel:v,show(z){l.value!==null&&l.value.show(z)},hide(z){l.value!==null&&l.value.hide(z)},updatePosition:g}),()=>{if(t.disable!==!0)return X(nr,{ref:l,class:"q-popup-edit",cover:t.cover,onBeforeShow:M,onShow:q,onBeforeHide:F,onHide:ee,onEscapeKey:v},B)}}});const wi=xe({__name:"EditableLabel",props:{label:{},input:{},editable:{type:Boolean},iconSize:{},lineHeight:{}},emits:["confirm"],setup(t){return(o,i)=>{var r;return P(),Y("div",{style:St(`line-height:${o.lineHeight||"15px"}`),class:at({"cursor-pointer":o.editable})},[O("span",null,[Ze(ue(o.label)+" ",1),o.editable?(P(),R(Ge,{key:0,class:"text-grey-6",size:o.iconSize||"15px",name:"edit_note"},null,8,["size"])):V("",!0)]),o.editable?(P(),R(Bu,{key:0,"model-value":(r=o.input)!=null?r:o.label,"onUpdate:modelValue":i[0]||(i[0]=s=>o.$emit("confirm",s)),class:"q-px-sm q-py-xs"},{default:C(s=>[w(to,{modelValue:s.value,"onUpdate:modelValue":l=>s.value=l,borderless:"",autogrow:"",dense:"",autofocus:"",onKeyup:Ed(s.set,["enter"])},{after:C(()=>[w(be,{flat:"",dense:"",color:"grey-8",icon:"check",onClick:Jl(s.set,["stop","prevent"]),disable:s.validate(s.value)===!1||s.initialValue===s.value},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["model-value"])):V("",!0)],6)}}}),pi=H([]);function Bv(){const t=H(!1),o=H(),i=H(null),r=H(null),s=dn({id:crypto.randomUUID(),isOpened:k({get:()=>t.value,set:m=>m?u():l()}),form:void 0,onConfirm:k(()=>i.value),onCancel:k(()=>r.value)});function l(){pi.value=pi.value.filter(m=>m.id!==s.id),t.value=!1}function u(m,v,g){m&&f(m),s.form&&(pi.value=[...pi.value,s],t.value=!0,i.value=v||null,r.value=g||null)}function d(m){i.value&&i.value(m),l()}function h(){r.value&&r.value(),l()}function f(m){s.form=m}return{isFromDialogOpenned:k({get:()=>s.isOpened,set:m=>s.isOpened=m}),setFormDialog:f,cancelFormDialog:h,confirmFormDialog:d,openFormDialog:u,FormDialogData:o}}const vs=H(null),Ev=H(!1),zv=H([]);function Uo(){const{tasks:t}=bo(),o=k({get:()=>{var l;return((l=t.value)==null?void 0:l.find(u=>u.id===vs.value))||null},set:l=>{vs.value=(l==null?void 0:l.id)||null}}),i=k(()=>t.value.filter(l=>Boolean(l.order))),r=k(()=>t.value.filter(l=>Boolean(l.invoice))),s=k(()=>t.value.reduce((l,u)=>({...l,[u.currentStatus.name]:u.currentStatus.label}),{}));return{ordersTasks:i,selectedTask:o,filteredTasks:zv,invoicesTasks:r,selectedTaskId:vs,showStatusHistory:Ev,availableStatuses:s}}const Dv={class:"row full-width justify-between no-wrap items-center"},$v={class:"row no-wrap items-center"},Ov={key:0,class:"text-grey-8 text-caption q-ml-sm self-center",style:{"line-height":"14px"}},Eu=xe({__name:"TaskStatusItem",props:{status:{},dense:{type:Boolean},borderless:{type:Boolean},unclickable:{type:Boolean}},setup(t){return(o,i)=>(P(),R(tt,{clickable:!o.unclickable,class:at(["rounded-borders",o.dense?"q-pa-xs":"q-pa-sm"]),style:St([{"min-height":"0"},o.borderless?"":"border: 1px solid #e2e2e2"])},{default:C(()=>[O("div",Dv,[O("div",$v,[w(Nt,{"text-color":"white",color:o.status.color,label:o.status.label},null,8,["color","label"]),o.status.createdAt?(P(),Y("div",Ov," hace "+ue(A(ia)(new Date(o.status.createdAt),new Date)),1)):V("",!0)]),w(Ge,{name:o.status.type==="c"?"check":"schedule",class:"self-center text-grey-8",size:"18px"},null,8,["name"])])]),_:1},8,["clickable","class","style"]))}}),qv={class:"column q-gutter-y-sm full-width"},Iv={class:"row items-center no-wrap"},Rv={class:"column full-width"},Fv={class:"row justify-between items-center full-width no-wrap"},Nv={class:"column"},Zv={key:0,class:"text-caption q-mr-md text-grey-8",style:{"line-height":"16px"}},Hv={key:0,class:"row items-center no-wrap text-grey-8 text-caption",style:{"margin-left":"-2px","margin-top":"-5px"}},Vv={class:"q-ml-xs"},Uv={class:"q-mt-sm q-pt-xs"},zu=xe({__name:"TaskListItem",props:{task:{},showActions:{type:Boolean,default:!0},showFullStartDueDates:{type:Boolean},editable:{type:Boolean}},setup(t){const o=t,{selectedAddress:i}=bn(),{userProfile:r}=Ht(),{updateTask:s}=er(),{showStatusHistory:l}=Uo(),u=It(),{invokeAction:d}=Bm(k(()=>o.task)),{openFormDialog:h}=Bv(),f=k(()=>o.showActions&&v.value.length>0);function m(){o.task.order||o.task.invoice||o.task.contactAddress&&(i.value=o.task.contactAddress)}const v=k(()=>{var q;const g=Boolean((q=r.value)==null?void 0:q.assignedSalesPoint),_=o.task.currentStatus.transitions.filter(F=>(g||!["invoice"].includes(F.throught||""))&&!["invoice_cancel"].includes(F.throught||"")),S={id:"showSaleDetailAction",label:"Ver detalles de venta",name:"showSaleDetailAction",isActive:!0,createdAt:"",updatedAt:"",throught:"invoice"};return[...o.task.invoice?[S]:[],..._].map(F=>({...F,onClick:async()=>{if(F.throught==="invoice")m();else if(F.throught==="confirm"){const ee={rounded:!0,noCaps:!0,flat:!0};u.dialog({title:"Confirmaci\xF3n",message:"message"in F&&F.message||"",ok:{label:"Confirmar",unelevated:!0,...ee},cancel:{label:"Cancelar",color:"grey-8",...ee}}).onOk(async()=>{await d({transition:F})})}else F.throught==="form"&&"form"in F&&F.form?await new Promise(ee=>{h(F.form,async B=>{await d({transition:F,data:B}),ee(null)},()=>ee(null))}):await d({transition:F})}}))});return(g,_)=>{var F,ee,B;return P(),Y("div",qv,[O("div",Iv,[O("div",Rv,[O("div",Fv,[O("div",Nv,[w(wi,{class:"text-h6 text-weight-bold","line-height":"21px","icon-size":"19px",label:g.task.subject,editable:g.editable,onConfirm:_[0]||(_[0]=z=>A(s)({id:g.task.id,subject:z}))},null,8,["label","editable"]),g.task.dueDate||g.task.startDate?(P(),Y("div",Zv,[O("span",null,[g.task.isExpired?(P(),R(Nt,{key:0,color:"red","text-color":"white",label:"Expirado"})):V("",!0)])])):V("",!0)]),g.task.priority?(P(),R(Nt,{key:0,color:g.task.priority.color,"text-color":"white",label:g.task.priority.label,class:"q-py-xs text-weight-medium"},null,8,["color","label"])):V("",!0),(g.task.contactAddress,V("",!0))]),(F=g.task.order)!=null&&F.isInvoiced?(P(),Y("div",Hv,[w(Ge,{name:"receipt_long"}),O("div",Vv,ue((B=(ee=g.task.order)==null?void 0:ee.invoice)==null?void 0:B.numeration),1)])):V("",!0)])]),w(wi,{class:"text-caption text-grey-9",label:g.task.description||(g.editable?"Sin descripci\xF3n":""),input:g.task.description,editable:g.editable,onConfirm:_[2]||(_[2]=z=>A(s)({id:g.task.id,description:z}))},null,8,["label","input","editable"]),w(Eu,{unclickable:"",onClick:_[3]||(_[3]=z=>g.showActions&&(l.value=!0)),status:g.task.currentStatus},null,8,["status"]),O("div",Uv,[f.value?(P(),R(Cu,{key:0,options:v.value},null,8,["options"])):V("",!0)])])}}});function Du(t,o){if(o&&t===o)return null;const i=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(i)===!0)return t;const r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s=r.display;return s==="block"||s==="table"?t:Du(t.parentNode)}function gs(t,o,i){return!t||t===document.body?!1:i===!0&&t===o||(o===document?document.body:o).contains(t.parentNode)}function $u(t,o,i){if(i||(i=document.createRange(),i.selectNode(t),i.setStart(t,0)),o.count===0)i.setEnd(t,o.count);else if(o.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<o.count?o.count-=t.textContent.length:(i.setEnd(t,o.count),o.count=0);else for(let r=0;o.count!==0&&r<t.childNodes.length;r++)i=$u(t.childNodes[r],o,i);return i}const jv=/^https?:\/\//;class Wv{constructor(o,i){this.el=o,this.eVm=i,this._range=null}get selection(){if(this.el){const o=document.getSelection();if(gs(o.anchorNode,this.el,!0)&&gs(o.focusNode,this.el,!0))return o}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const o=this.selection;return o!==null&&o.rangeCount?o.getRangeAt(0):this._range}get parent(){const o=this.range;if(o!==null){const i=o.startContainer;return i.nodeType===document.ELEMENT_NODE?i:i.parentNode}return null}get blockParent(){const o=this.parent;return o!==null?Du(o,this.el):null}save(o=this.range){o!==null&&(this._range=o)}restore(o=this._range){const i=document.createRange(),r=document.getSelection();o!==null?(i.setStart(o.startContainer,o.startOffset),i.setEnd(o.endContainer,o.endOffset),r.removeAllRanges(),r.addRange(i)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let o=-1,i;const r=document.getSelection(),s=this.el.parentNode;if(r.focusNode&&gs(r.focusNode,s))for(i=r.focusNode,o=r.focusOffset;i&&i!==s;)i!==this.el&&i.previousSibling?(i=i.previousSibling,o+=i.textContent.length):i=i.parentNode;this.savedPos=o}restorePosition(o=0){if(this.savedPos>0&&this.savedPos<o){const i=window.getSelection(),r=$u(this.el,{count:this.savedPos});r&&(r.collapse(!1),i.removeAllRanges(),i.addRange(r))}}hasParent(o,i){const r=i?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===o.toLowerCase():!1}hasParents(o,i,r=this.parent){return r===null?!1:o.includes(r.nodeName.toLowerCase())===!0?!0:i===!0?this.hasParents(o,i,r.parentNode):!1}is(o,i){if(this.selection===null)return!1;switch(o){case"formatBlock":return i==="DIV"&&this.parent===this.el||this.hasParent(i,i==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(o)===i;case"fontName":const r=document.queryCommandValue(o);return r===`"${i}"`||r===i;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const s=document.queryCommandState(o);return i!==void 0?s===i:s}}getParentAttribute(o){return this.parent!==null?this.parent.getAttribute(o):null}can(o){if(o==="outdent")return this.hasParents(["blockquote","li"],!0);if(o==="indent")return this.hasParents(["li"],!0);if(o==="link")return this.selection!==null||this.is("link")}apply(o,i,r=Zs){if(o==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(i)&&this.is(o,i)&&(o="outdent",i=null),i==="PRE"&&this.is(o,"PRE")&&(i="P");else if(o==="print"){r();const s=window.open();s.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),s.print(),s.close();return}else if(o==="link"){const s=this.getParentAttribute("href");if(s===null){const l=this.selectWord(this.selection),u=l?l.toString():"";if(!u.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=jv.test(u)?u:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(l.getRangeAt(0))}else this.eVm.editLinkUrl.value=s,this.range.selectNodeContents(this.parent),this.save();return}else if(o==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(o==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(o,!1,i),r()}selectWord(o){if(o===null||o.isCollapsed!==!0||o.modify===void 0)return o;const i=document.createRange();i.setStart(o.anchorNode,o.anchorOffset),i.setEnd(o.focusNode,o.focusOffset);const r=i.collapsed?["backward","forward"]:["forward","backward"];i.detach();const s=o.focusNode,l=o.focusOffset;return o.collapse(o.anchorNode,o.anchorOffset),o.modify("move",r[0],"character"),o.modify("move",r[1],"word"),o.extend(s,l),o.modify("extend",r[1],"character"),o.modify("extend",r[0],"word"),o}}var Yv=_t({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:o}){const i=k(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(s=>t[s]===!0).map(s=>`q-btn-group--${s}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>X("div",{class:i.value},Dt(o.default))}});const Gv=Object.keys(eu),Kv=t=>Gv.reduce((o,i)=>{const r=t[i];return r!==void 0&&(o[i]=r),o},{});var Qv=_t({name:"QBtnDropdown",props:{...eu,...qs,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:o,emit:i}){const{proxy:r}=Pt(),s=H(t.modelValue),l=H(null),u=Gl(),d=k(()=>{const z={"aria-expanded":s.value===!0?"true":"false","aria-haspopup":"true","aria-controls":u,"aria-label":t.toggleAriaLabel||r.$q.lang.label[s.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(z["aria-disabled"]="true"),z}),h=k(()=>"q-btn-dropdown__arrow"+(s.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),f=k(()=>zd(t)),m=k(()=>Kv(t));ke(()=>t.modelValue,z=>{l.value!==null&&l.value[z?"show":"hide"]()}),ke(()=>t.split,B);function v(z){s.value=!0,i("beforeShow",z)}function g(z){i("show",z),i("update:modelValue",!0)}function _(z){s.value=!1,i("beforeHide",z)}function S(z){i("hide",z),i("update:modelValue",!1)}function M(z){i("click",z)}function q(z){gi(z),B(),i("click",z)}function F(z){l.value!==null&&l.value.toggle(z)}function ee(z){l.value!==null&&l.value.show(z)}function B(z){l.value!==null&&l.value.hide(z)}return Object.assign(r,{show:ee,hide:B,toggle:F}),yt(()=>{t.modelValue===!0&&ee()}),()=>{const z=[X(Ge,{class:h.value,name:t.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&z.push(X(nr,{ref:l,id:u,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:v,onShow:g,onBeforeHide:_,onHide:S},o.default)),t.split===!1?X(be,{class:"q-btn-dropdown q-btn-dropdown--simple",...m.value,...d.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:M},{default:()=>Dt(o.label,[]).concat(z),loading:o.loading}):X(Yv,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...f.value,glossy:t.glossy,stretch:t.stretch},()=>[X(be,{class:"q-btn-dropdown--current",...m.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:q},{default:o.label,loading:o.loading}),X(be,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...d.value,...f.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>z)])}}});function Ou(t,o,i){o.handler?o.handler(t,i,i.caret):i.runCmd(o.cmd,o.param)}function ar(t){return X("div",{class:"q-editor__toolbar-group"},t)}function qu(t,o,i,r=!1){const s=r||(o.type==="toggle"?o.toggled?o.toggled(t):o.cmd&&t.caret.is(o.cmd,o.param):!1),l=[];if(o.tip&&t.$q.platform.is.desktop){const u=o.key?X("div",[X("small",`(CTRL + ${String.fromCharCode(o.key)})`)]):null;l.push(X(Un,{delay:1e3},()=>[X("div",{innerHTML:o.tip}),u]))}return X(be,{...t.buttonProps.value,icon:o.icon!==null?o.icon:void 0,color:s?o.toggleColor||t.props.toolbarToggleColor:o.color||t.props.toolbarColor,textColor:s&&!t.props.toolbarPush?null:o.textColor||t.props.toolbarTextColor,label:o.label,disable:o.disable?typeof o.disable=="function"?o.disable(t):!0:!1,size:"sm",onClick(u){i&&i(),Ou(u,o,t)}},()=>l)}function Xv(t,o){const i=o.list==="only-icons";let r=o.label,s=o.icon!==null?o.icon:void 0,l,u;function d(){f.component.proxy.hide()}if(i)u=o.options.map(m=>{const v=m.type===void 0?t.caret.is(m.cmd,m.param):!1;return v&&(r=m.tip,s=m.icon!==null?m.icon:void 0),qu(t,m,d,v)}),l=t.toolbarBackgroundClass.value,u=[ar(u)];else{const m=t.props.toolbarToggleColor!==void 0?`text-${t.props.toolbarToggleColor}`:null,v=t.props.toolbarTextColor!==void 0?`text-${t.props.toolbarTextColor}`:null,g=o.list==="no-icons";u=o.options.map(_=>{const S=_.disable?_.disable(t):!1,M=_.type===void 0?t.caret.is(_.cmd,_.param):!1;M&&(r=_.tip,s=_.icon!==null?_.icon:void 0);const q=_.htmlTip;return X(tt,{active:M,activeClass:m,clickable:!0,disable:S,dense:!0,onClick(F){d(),t.contentRef.value!==null&&t.contentRef.value.focus(),t.caret.restore(),Ou(F,_,t)}},()=>[g===!0?null:X(it,{class:M?m:v,side:!0},()=>X(Ge,{name:_.icon!==null?_.icon:void 0})),X(it,q?()=>X("div",{class:"text-no-wrap",innerHTML:_.htmlTip}):_.tip?()=>X("div",{class:"text-no-wrap"},_.tip):void 0)])}),l=[t.toolbarBackgroundClass.value,v]}const h=o.highlight&&r!==o.label,f=X(Qv,{...t.buttonProps.value,noCaps:!0,noWrap:!0,color:h?t.props.toolbarToggleColor:t.props.toolbarColor,textColor:h&&!t.props.toolbarPush?null:t.props.toolbarTextColor,label:o.fixedLabel?o.label:r,icon:o.fixedIcon?o.icon!==null?o.icon:void 0:s,contentClass:l,onShow:m=>t.emit("dropdownShow",m),onHide:m=>t.emit("dropdownHide",m),onBeforeShow:m=>t.emit("dropdownBeforeShow",m),onBeforeHide:m=>t.emit("dropdownBeforeHide",m)},()=>u);return f}function Jv(t){if(t.caret)return t.buttons.value.filter(o=>!t.isViewingSource.value||o.find(i=>i.cmd==="viewsource")).map(o=>ar(o.map(i=>t.isViewingSource.value&&i.cmd!=="viewsource"?!1:i.type==="slot"?Dt(t.slots[i.slot]):i.type==="dropdown"?Xv(t,i):qu(t,i))))}function eg(t,o,i,r={}){const s=Object.keys(r);if(s.length===0)return{};const l={default_font:{cmd:"fontName",param:t,icon:i,tip:o}};return s.forEach(u=>{const d=r[u];l[u]={cmd:"fontName",param:d,icon:i,tip:d,htmlTip:`<font face="${d}">${d}</font>`}}),l}function tg(t){if(t.caret){const o=t.props.toolbarColor||t.props.toolbarTextColor;let i=t.editLinkUrl.value;const r=()=>{t.caret.restore(),i!==t.editLinkUrl.value&&document.execCommand("createLink",!1,i===""?" ":i),t.editLinkUrl.value=null};return[X("div",{class:`q-mx-xs text-${o}`},`${t.$q.lang.editor.url}: `),X("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:i,onInput:s=>{gi(s),i=s.target.value},onKeydown:s=>{if(Ns(s)!==!0)switch(s.keyCode){case 13:return qo(s),r();case 27:qo(s),t.caret.restore(),(!t.editLinkUrl.value||t.editLinkUrl.value==="https://")&&document.execCommand("unlink"),t.editLinkUrl.value=null;break}}}),ar([X(be,{key:"qedt_btm_rem",tabindex:-1,...t.buttonProps.value,label:t.$q.lang.label.remove,noCaps:!0,onClick:()=>{t.caret.restore(),document.execCommand("unlink"),t.editLinkUrl.value=null}}),X(be,{key:"qedt_btm_upd",...t.buttonProps.value,label:t.$q.lang.label.update,noCaps:!0,onClick:r})])]}}let mi=0;const ng={fullscreen:Boolean,noRouteFullscreenExit:Boolean},og=["update:fullscreen","fullscreen"];function ig(){const t=Pt(),{props:o,emit:i,proxy:r}=t;let s,l,u;const d=H(!1);Dd(t)===!0&&ke(()=>r.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&m()}),ke(()=>o.fullscreen,v=>{d.value!==v&&h()}),ke(d,v=>{i("update:fullscreen",v),i("fullscreen",v)});function h(){d.value===!0?m():f()}function f(){d.value!==!0&&(d.value=!0,u=r.$el.parentNode,u.replaceChild(l,r.$el),document.body.appendChild(r.$el),mi++,mi===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:m},sl.add(s))}function m(){d.value===!0&&(s!==void 0&&(sl.remove(s),s=void 0),u.replaceChild(r.$el,l),d.value=!1,mi=Math.max(0,mi-1),mi===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return $d(()=>{l=document.createElement("span")}),yt(()=>{o.fullscreen===!0&&f()}),zt(m),Object.assign(r,{toggleFullscreen:h,setFullscreen:f,exitFullscreen:m}),{inFullscreen:d,toggleFullscreen:h}}const ag=Object.prototype.toString,_s=Object.prototype.hasOwnProperty,sg=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function Ll(t){if(t!==Object(t)||sg.has(ag.call(t))===!0||t.constructor&&_s.call(t,"constructor")===!1&&_s.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let o;for(o in t);return o===void 0||_s.call(t,o)}function Iu(){let t,o,i,r,s,l,u=arguments[0]||{},d=1,h=!1;const f=arguments.length;for(typeof u=="boolean"&&(h=u,u=arguments[1]||{},d=2),Object(u)!==u&&typeof u!="function"&&(u={}),f===d&&(u=this,d--);d<f;d++)if((t=arguments[d])!==null)for(o in t)i=u[o],r=t[o],u!==r&&(h===!0&&r&&((s=Array.isArray(r))||Ll(r)===!0)?(s===!0?l=Array.isArray(i)===!0?i:[]:l=Ll(i)===!0?i:{},u[o]=Iu(h,l,r)):r!==void 0&&(u[o]=r));return u}var rg=_t({name:"QEditor",props:{...Jn,...ng,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(o=>o.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...og,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:o,emit:i,attrs:r}){const{proxy:s,vnode:l}=Pt(),{$q:u}=s,d=eo(t,u),{inFullscreen:h,toggleFullscreen:f}=ig(),m=Od(r,l),v=H(null),g=H(null),_=H(null),S=H(!1),M=k(()=>!t.readonly&&!t.disable);let q,F,ee=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),q=window.getComputedStyle(document.body).fontFamily;const B=k(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),z=k(()=>{const Q=t.toolbarOutline!==!0&&t.toolbarPush!==!0;return{type:"a",flat:Q,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!M.value,size:"sm"}}),D=k(()=>{const Q=u.lang.editor,K=u.iconSet.editor;return{bold:{cmd:"bold",icon:K.bold,tip:Q.bold,key:66},italic:{cmd:"italic",icon:K.italic,tip:Q.italic,key:73},strike:{cmd:"strikeThrough",icon:K.strikethrough,tip:Q.strikethrough,key:83},underline:{cmd:"underline",icon:K.underline,tip:Q.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:K.unorderedList,tip:Q.unorderedList},ordered:{cmd:"insertOrderedList",icon:K.orderedList,tip:Q.orderedList},subscript:{cmd:"subscript",icon:K.subscript,tip:Q.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:K.superscript,tip:Q.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:Ee=>Ee.caret&&!Ee.caret.can("link"),icon:K.hyperlink,tip:Q.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:K.toggleFullscreen,tip:Q.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:K.viewSource,tip:Q.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:K.quote,tip:Q.quote,key:81},left:{cmd:"justifyLeft",icon:K.left,tip:Q.left},center:{cmd:"justifyCenter",icon:K.center,tip:Q.center},right:{cmd:"justifyRight",icon:K.right,tip:Q.right},justify:{cmd:"justifyFull",icon:K.justify,tip:Q.justify},print:{type:"no-state",cmd:"print",icon:K.print,tip:Q.print,key:80},outdent:{type:"no-state",disable:Ee=>Ee.caret&&!Ee.caret.can("outdent"),cmd:"outdent",icon:K.outdent,tip:Q.outdent},indent:{type:"no-state",disable:Ee=>Ee.caret&&!Ee.caret.can("indent"),cmd:"indent",icon:K.indent,tip:Q.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:K.removeFormat,tip:Q.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:K.hr,tip:Q.hr},undo:{type:"no-state",cmd:"undo",icon:K.undo,tip:Q.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:K.redo,tip:Q.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:K.heading1||K.heading,tip:Q.heading1,htmlTip:`<h1 class="q-ma-none">${Q.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:K.heading2||K.heading,tip:Q.heading2,htmlTip:`<h2 class="q-ma-none">${Q.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:K.heading3||K.heading,tip:Q.heading3,htmlTip:`<h3 class="q-ma-none">${Q.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:K.heading4||K.heading,tip:Q.heading4,htmlTip:`<h4 class="q-ma-none">${Q.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:K.heading5||K.heading,tip:Q.heading5,htmlTip:`<h5 class="q-ma-none">${Q.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:K.heading6||K.heading,tip:Q.heading6,htmlTip:`<h6 class="q-ma-none">${Q.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:K.heading,tip:Q.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:K.code,htmlTip:`<code>${Q.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:K.size1||K.size,tip:Q.size1,htmlTip:`<font size="1">${Q.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:K.size2||K.size,tip:Q.size2,htmlTip:`<font size="2">${Q.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:K.size3||K.size,tip:Q.size3,htmlTip:`<font size="3">${Q.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:K.size4||K.size,tip:Q.size4,htmlTip:`<font size="4">${Q.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:K.size5||K.size,tip:Q.size5,htmlTip:`<font size="5">${Q.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:K.size6||K.size,tip:Q.size6,htmlTip:`<font size="6">${Q.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:K.size7||K.size,tip:Q.size7,htmlTip:`<font size="7">${Q.size7}</font>`}}}),U=k(()=>{const Q=t.definitions||{},K=t.definitions||t.fonts?Iu(!0,{},D.value,Q,eg(q,u.lang.editor.defaultFont,u.iconSet.editor.font,t.fonts)):D.value;return t.toolbar.map(Ee=>Ee.map(De=>{if(De.options)return{type:"dropdown",icon:De.icon,label:De.label,size:"sm",dense:!0,fixedLabel:De.fixedLabel,fixedIcon:De.fixedIcon,highlight:De.highlight,list:De.list,options:De.options.map(rt=>K[rt])};const Ne=K[De];return Ne?Ne.type==="no-state"||Q[De]&&(Ne.cmd===void 0||D.value[Ne.cmd]&&D.value[Ne.cmd].type==="no-state")?Ne:Object.assign({type:"toggle"},Ne):{type:"slot",slot:De}}))}),Z={$q:u,props:t,slots:o,emit:i,inFullscreen:h,toggleFullscreen:f,runCmd:Me,isViewingSource:S,editLinkUrl:_,toolbarBackgroundClass:B,buttonProps:z,contentRef:g,buttons:U,setContent:we};ke(()=>t.modelValue,Q=>{ee!==Q&&(ee=Q,we(Q,!0))}),ke(_,Q=>{i(`link${Q?"Show":"Hide"}`)});const $=k(()=>t.toolbar&&t.toolbar.length!==0),j=k(()=>{const Q={},K=Ee=>{Ee.key&&(Q[Ee.key]={cmd:Ee.cmd,param:Ee.param})};return U.value.forEach(Ee=>{Ee.forEach(De=>{De.options?De.options.forEach(K):K(De)})}),Q}),ae=k(()=>h.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),W=k(()=>`q-editor q-editor--${S.value===!0?"source":"default"}`+(t.disable===!0?" disabled":"")+(h.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(d.value===!0?" q-editor--dark q-dark":"")),oe=k(()=>[t.contentClass,"q-editor__content",{col:h.value,"overflow-auto":h.value||t.maxHeight}]),re=k(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});function ve(){if(g.value!==null){const Q=`inner${S.value===!0?"Text":"HTML"}`,K=g.value[Q];K!==t.modelValue&&(ee=K,i("update:modelValue",K))}}function Se(Q){if(i("keydown",Q),Q.ctrlKey!==!0||Ns(Q)===!0){pe();return}const K=Q.keyCode,Ee=j.value[K];if(Ee!==void 0){const{cmd:De,param:Ne}=Ee;yn(Q),Me(De,Ne,!1)}}function Ae(Q){pe(),i("click",Q)}function le(Q){if(g.value!==null){const{scrollTop:K,scrollHeight:Ee}=g.value;F=Ee-K}Z.caret.save(),i("blur",Q)}function ie(Q){ft(()=>{g.value!==null&&F!==void 0&&(g.value.scrollTop=g.value.scrollHeight-F)}),i("focus",Q)}function Le(Q){const K=v.value;if(K!==null&&K.contains(Q.target)===!0&&(Q.relatedTarget===null||K.contains(Q.relatedTarget)!==!0)){const Ee=`inner${S.value===!0?"Text":"HTML"}`;Z.caret.restorePosition(g.value[Ee].length),pe()}}function de(Q){const K=v.value;K!==null&&K.contains(Q.target)===!0&&(Q.relatedTarget===null||K.contains(Q.relatedTarget)!==!0)&&(Z.caret.savePosition(),pe())}function ce(){F=void 0}function _e(Q){Z.caret.save()}function we(Q,K){if(g.value!==null){K===!0&&Z.caret.savePosition();const Ee=`inner${S.value===!0?"Text":"HTML"}`;g.value[Ee]=Q,K===!0&&(Z.caret.restorePosition(g.value[Ee].length),pe())}}function Me(Q,K,Ee=!0){me(),Z.caret.restore(),Z.caret.apply(Q,K,()=>{me(),Z.caret.save(),Ee&&pe()})}function pe(){setTimeout(()=>{_.value=null,s.$forceUpdate()},1)}function me(){Ul(()=>{g.value!==null&&g.value.focus({preventScroll:!0})})}function ge(){return g.value}return yt(()=>{Z.caret=s.caret=new Wv(g.value,Z),we(t.modelValue),pe(),document.addEventListener("selectionchange",_e)}),zt(()=>{document.removeEventListener("selectionchange",_e)}),Object.assign(s,{runCmd:Me,refreshToolbar:pe,focus:me,getContentEl:ge}),()=>{let Q;if($.value){const K=[X("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+B.value},Jv(Z))];_.value!==null&&K.push(X("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+B.value},tg(Z))),Q=X("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},K)}return X("div",{ref:v,class:W.value,style:{height:h.value===!0?"100%":null},...re.value,onFocusin:Le,onFocusout:de},[Q,X("div",{ref:g,style:ae.value,class:oe.value,contenteditable:M.value,placeholder:t.placeholder,...m.listeners.value,onInput:ve,onKeydown:Se,onClick:Ae,onBlur:le,onFocus:ie,onMousedown:ce,onTouchstartPassive:ce})])}}});const jn=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function lg(t,o,i){return Object.prototype.toString.call(t)==="[object Date]"&&(i=t.getDate(),o=t.getMonth()+1,t=t.getFullYear()),hg(sr(t,o,i))}function Ml(t,o,i){return Fu(dg(t,o,i))}function ug(t){return cg(t)===0}function ta(t,o){return o<=6?31:o<=11||ug(t)?30:29}function cg(t){const o=jn.length;let i=jn[0],r,s,l,u,d;if(t<i||t>=jn[o-1])throw new Error("Invalid Jalaali year "+t);for(d=1;d<o&&(r=jn[d],s=r-i,!(t<r));d+=1)i=r;return u=t-i,s-u<6&&(u=u-s+ot(s+4,33)*33),l=Ft(Ft(u+1,33)-1,4),l===-1&&(l=4),l}function Ru(t,o){const i=jn.length,r=t+621;let s=-14,l=jn[0],u,d,h,f,m;if(t<l||t>=jn[i-1])throw new Error("Invalid Jalaali year "+t);for(m=1;m<i&&(u=jn[m],d=u-l,!(t<u));m+=1)s=s+ot(d,33)*8+ot(Ft(d,33),4),l=u;f=t-l,s=s+ot(f,33)*8+ot(Ft(f,33)+3,4),Ft(d,33)===4&&d-f===4&&(s+=1);const v=ot(r,4)-ot((ot(r,100)+1)*3,4)-150,g=20+s-v;return o||(d-f<6&&(f=f-d+ot(d+4,33)*33),h=Ft(Ft(f+1,33)-1,4),h===-1&&(h=4)),{leap:h,gy:r,march:g}}function dg(t,o,i){const r=Ru(t,!0);return sr(r.gy,3,r.march)+(o-1)*31-ot(o,7)*(o-7)+i-1}function hg(t){const o=Fu(t).gy;let i=o-621,r,s,l;const u=Ru(i,!1),d=sr(o,3,u.march);if(l=t-d,l>=0){if(l<=185)return s=1+ot(l,31),r=Ft(l,31)+1,{jy:i,jm:s,jd:r};l-=186}else i-=1,l+=179,u.leap===1&&(l+=1);return s=7+ot(l,30),r=Ft(l,30)+1,{jy:i,jm:s,jd:r}}function sr(t,o,i){let r=ot((t+ot(o-8,6)+100100)*1461,4)+ot(153*Ft(o+9,12)+2,5)+i-34840408;return r=r-ot(ot(t+100100+ot(o-8,6),100)*3,4)+752,r}function Fu(t){let o=4*t+139361631;o=o+ot(ot(4*t+183187720,146097)*3,4)*4-3908;const i=ot(Ft(o,1461),4)*5+308,r=ot(Ft(i,153),5)+1,s=Ft(ot(i,153),12)+1;return{gy:ot(o,1461)-100100+ot(8-s,6),gm:s,gd:r}}function ot(t,o){return~~(t/o)}function Ft(t,o){return t-~~(t/o)*o}function fg(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Wn(t,o,i){return i<=o?o:Math.min(i,Math.max(o,t))}function Je(t,o=2,i="0"){if(t==null)return t;const r=""+t;return r.length>=o?r:new Array(o-r.length+1).join(i)+r}const mg=["gregorian","persian"],pg={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>mg.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},vg=["update:modelValue"];function Zn(t){return t.year+"/"+Je(t.month)+"/"+Je(t.day)}function gg(t,o){const i=k(()=>t.disable!==!0&&t.readonly!==!0),r=k(()=>i.value===!0?0:-1),s=k(()=>{const d=[];return t.color!==void 0&&d.push(`bg-${t.color}`),t.textColor!==void 0&&d.push(`text-${t.textColor}`),d.join(" ")});function l(){return t.locale!==void 0?{...o.lang.date,...t.locale}:o.lang.date}function u(d){const h=new Date,f=d===!0?null:0;if(t.calendar==="persian"){const m=lg(h);return{year:m.jy,month:m.jm,day:m.jd}}return{year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate(),hour:f,minute:f,second:f,millisecond:f}}return{editable:i,tabindex:r,headerClass:s,getLocale:l,getCurrentDate:u}}const Nu=864e5,_g=36e5,As=6e4,Zu="YYYY-MM-DDTHH:mm:ss.SSSZ",yg=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,bg=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ys={};function wg(t,o){const i="("+o.days.join("|")+")",r=t+i;if(ys[r]!==void 0)return ys[r];const s="("+o.daysShort.join("|")+")",l="("+o.months.join("|")+")",u="("+o.monthsShort.join("|")+")",d={};let h=0;const f=t.replace(bg,v=>{switch(h++,v){case"YY":return d.YY=h,"(-?\\d{1,2})";case"YYYY":return d.YYYY=h,"(-?\\d{1,4})";case"M":return d.M=h,"(\\d{1,2})";case"MM":return d.M=h,"(\\d{2})";case"MMM":return d.MMM=h,u;case"MMMM":return d.MMMM=h,l;case"D":return d.D=h,"(\\d{1,2})";case"Do":return d.D=h++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return d.D=h,"(\\d{2})";case"H":return d.H=h,"(\\d{1,2})";case"HH":return d.H=h,"(\\d{2})";case"h":return d.h=h,"(\\d{1,2})";case"hh":return d.h=h,"(\\d{2})";case"m":return d.m=h,"(\\d{1,2})";case"mm":return d.m=h,"(\\d{2})";case"s":return d.s=h,"(\\d{1,2})";case"ss":return d.s=h,"(\\d{2})";case"S":return d.S=h,"(\\d{1})";case"SS":return d.S=h,"(\\d{2})";case"SSS":return d.S=h,"(\\d{3})";case"A":return d.A=h,"(AM|PM)";case"a":return d.a=h,"(am|pm)";case"aa":return d.aa=h,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return d.Z=h,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return d.ZZ=h,"(Z|[+-]\\d{2}\\d{2})";case"X":return d.X=h,"(-?\\d+)";case"x":return d.x=h,"(-?\\d{4,})";default:return h--,v[0]==="["&&(v=v.substring(1,v.length-1)),v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),m={map:d,regex:new RegExp("^"+f)};return ys[r]=m,m}function Hu(t,o){return t!==void 0?t:o!==void 0?o.date:qd.date}function Al(t,o=""){const i=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),l=r%60;return i+Je(s)+o+Je(l)}function xg(t,o,i){let r=t.getFullYear(),s=t.getMonth();const l=t.getDate();return o.year!==void 0&&(r+=i*o.year,delete o.year),o.month!==void 0&&(s+=i*o.month,delete o.month),t.setDate(1),t.setMonth(2),t.setFullYear(r),t.setMonth(s),t.setDate(Math.min(l,ur(t))),o.date!==void 0&&(t.setDate(t.getDate()+i*o.date),delete o.date),t}function Pg(t,o,i){const r=o.year!==void 0?o.year:t[`get${i}FullYear`](),s=o.month!==void 0?o.month-1:t[`get${i}Month`](),l=new Date(r,s+1,0).getDate(),u=Math.min(l,o.date!==void 0?o.date:t[`get${i}Date`]());return t[`set${i}Date`](1),t[`set${i}Month`](2),t[`set${i}FullYear`](r),t[`set${i}Month`](s),t[`set${i}Date`](u),delete o.year,delete o.month,delete o.date,t}function rr(t,o,i){const r=Vu(o),s=new Date(t),l=r.year!==void 0||r.month!==void 0||r.date!==void 0?xg(s,r,i):s;for(const u in r){const d=fg(u);l[`set${d}`](l[`get${d}`]()+i*r[u])}return l}function Vu(t){const o={...t};return t.years!==void 0&&(o.year=t.years,delete o.years),t.months!==void 0&&(o.month=t.months,delete o.months),t.days!==void 0&&(o.date=t.days,delete o.days),t.day!==void 0&&(o.date=t.day,delete o.day),t.hour!==void 0&&(o.hours=t.hour,delete o.hour),t.minute!==void 0&&(o.minutes=t.minute,delete o.minute),t.second!==void 0&&(o.seconds=t.second,delete o.second),t.millisecond!==void 0&&(o.milliseconds=t.millisecond,delete o.millisecond),o}function Uu(t,o,i){const r=Vu(o),s=i===!0?"UTC":"",l=new Date(t),u=r.year!==void 0||r.month!==void 0||r.date!==void 0?Pg(l,r,s):l;for(const d in r){const h=d.charAt(0).toUpperCase()+d.slice(1);u[`set${s}${h}`](r[d])}return u}function kg(t,o,i){const r=ju(t,o,i),s=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),l=s.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===l?s:rr(s,{minutes:r.timezoneOffset-l},1)}function ju(t,o,i,r,s){const l={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(l,s),t==null||t===""||typeof t!="string")return l;o===void 0&&(o=Zu);const u=Hu(i,tu.props),d=u.months,h=u.monthsShort,{regex:f,map:m}=wg(o,u),v=t.match(f);if(v===null)return l;let g="";if(m.X!==void 0||m.x!==void 0){const _=parseInt(v[m.X!==void 0?m.X:m.x],10);if(isNaN(_)===!0||_<0)return l;const S=new Date(_*(m.X!==void 0?1e3:1));l.year=S.getFullYear(),l.month=S.getMonth()+1,l.day=S.getDate(),l.hour=S.getHours(),l.minute=S.getMinutes(),l.second=S.getSeconds(),l.millisecond=S.getMilliseconds()}else{if(m.YYYY!==void 0)l.year=parseInt(v[m.YYYY],10);else if(m.YY!==void 0){const _=parseInt(v[m.YY],10);l.year=_<0?_:2e3+_}if(m.M!==void 0){if(l.month=parseInt(v[m.M],10),l.month<1||l.month>12)return l}else m.MMM!==void 0?l.month=h.indexOf(v[m.MMM])+1:m.MMMM!==void 0&&(l.month=d.indexOf(v[m.MMMM])+1);if(m.D!==void 0){if(l.day=parseInt(v[m.D],10),l.year===null||l.month===null||l.day<1)return l;const _=r!=="persian"?new Date(l.year,l.month,0).getDate():ta(l.year,l.month);if(l.day>_)return l}m.H!==void 0?l.hour=parseInt(v[m.H],10)%24:m.h!==void 0&&(l.hour=parseInt(v[m.h],10)%12,(m.A&&v[m.A]==="PM"||m.a&&v[m.a]==="pm"||m.aa&&v[m.aa]==="p.m.")&&(l.hour+=12),l.hour=l.hour%24),m.m!==void 0&&(l.minute=parseInt(v[m.m],10)%60),m.s!==void 0&&(l.second=parseInt(v[m.s],10)%60),m.S!==void 0&&(l.millisecond=parseInt(v[m.S],10)*10**(3-v[m.S].length)),(m.Z!==void 0||m.ZZ!==void 0)&&(g=m.Z!==void 0?v[m.Z].replace(":",""):v[m.ZZ],l.timezoneOffset=(g[0]==="+"?-1:1)*(60*g.slice(1,3)+1*g.slice(3,5)))}return l.dateHash=Je(l.year,6)+"/"+Je(l.month)+"/"+Je(l.day),l.timeHash=Je(l.hour)+":"+Je(l.minute)+":"+Je(l.second)+g,l}function Cg(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Sg(t,o){return Uu(new Date,t,o)}function Tg(t){const o=new Date(t).getDay();return o===0?7:o}function Bs(t){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const i=new Date(o.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const r=o.getTimezoneOffset()-i.getTimezoneOffset();o.setHours(o.getHours()-r);const s=(o-i)/(Nu*7);return 1+Math.floor(s)}function Lg(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function bs(t,o){const i=new Date(t);return o===!0?Lg(i):i.getTime()}function Mg(t,o,i,r={}){const s=bs(o,r.onlyDate),l=bs(i,r.onlyDate),u=bs(t,r.onlyDate);return(u>s||r.inclusiveFrom===!0&&u===s)&&(u<l||r.inclusiveTo===!0&&u===l)}function Ag(t,o){return rr(t,o,1)}function Bg(t,o){return rr(t,o,-1)}function _n(t,o,i){const r=new Date(t),s=`set${i===!0?"UTC":""}`;switch(o){case"year":case"years":r[`${s}Month`](0);case"month":case"months":r[`${s}Date`](1);case"day":case"days":case"date":r[`${s}Hours`](0);case"hour":case"hours":r[`${s}Minutes`](0);case"minute":case"minutes":r[`${s}Seconds`](0);case"second":case"seconds":r[`${s}Milliseconds`](0)}return r}function Eg(t,o,i){const r=new Date(t),s=`set${i===!0?"UTC":""}`;switch(o){case"year":case"years":r[`${s}Month`](11);case"month":case"months":r[`${s}Date`](ur(r));case"day":case"days":case"date":r[`${s}Hours`](23);case"hour":case"hours":r[`${s}Minutes`](59);case"minute":case"minutes":r[`${s}Seconds`](59);case"second":case"seconds":r[`${s}Milliseconds`](999)}return r}function zg(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(i=>{o=Math.max(o,new Date(i))}),o}function Dg(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(i=>{o=Math.min(o,new Date(i))}),o}function Qi(t,o,i){return(t.getTime()-t.getTimezoneOffset()*As-(o.getTime()-o.getTimezoneOffset()*As))/i}function lr(t,o,i="days"){const r=new Date(t),s=new Date(o);switch(i){case"years":case"year":return r.getFullYear()-s.getFullYear();case"months":case"month":return(r.getFullYear()-s.getFullYear())*12+r.getMonth()-s.getMonth();case"days":case"day":case"date":return Qi(_n(r,"day"),_n(s,"day"),Nu);case"hours":case"hour":return Qi(_n(r,"hour"),_n(s,"hour"),_g);case"minutes":case"minute":return Qi(_n(r,"minute"),_n(s,"minute"),As);case"seconds":case"second":return Qi(_n(r,"second"),_n(s,"second"),1e3)}}function Es(t){return lr(t,_n(t,"year"),"days")+1}function $g(t){return nu(t)===!0?"date":typeof t=="number"?"number":"string"}function Og(t,o,i){const r=new Date(t);if(o){const s=new Date(o);if(r<s)return s}if(i){const s=new Date(i);if(r>s)return s}return r}function qg(t,o,i){const r=new Date(t),s=new Date(o);if(i===void 0)return r.getTime()===s.getTime();switch(i){case"second":case"seconds":if(r.getSeconds()!==s.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==s.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==s.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==s.getDate())return!1;case"month":case"months":if(r.getMonth()!==s.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==s.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${i}`)}return!0}function ur(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function Bl(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const El={YY(t,o,i){const r=this.YYYY(t,o,i)%100;return r>=0?Je(r):"-"+Je(Math.abs(r))},YYYY(t,o,i){return i!=null?i:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return Je(t.getMonth()+1)},MMM(t,o){return o.monthsShort[t.getMonth()]},MMMM(t,o){return o.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return Bl(this.Q(t))},D(t){return t.getDate()},Do(t){return Bl(t.getDate())},DD(t){return Je(t.getDate())},DDD(t){return Es(t)},DDDD(t){return Je(Es(t),3)},d(t){return t.getDay()},dd(t,o){return this.dddd(t,o).slice(0,2)},ddd(t,o){return o.daysShort[t.getDay()]},dddd(t,o){return o.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return Bs(t)},ww(t){return Je(Bs(t))},H(t){return t.getHours()},HH(t){return Je(t.getHours())},h(t){const o=t.getHours();return o===0?12:o>12?o%12:o},hh(t){return Je(this.h(t))},m(t){return t.getMinutes()},mm(t){return Je(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return Je(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return Je(Math.floor(t.getMilliseconds()/10))},SSS(t){return Je(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,o,i,r){const s=r==null?t.getTimezoneOffset():r;return Al(s,":")},ZZ(t,o,i,r){const s=r==null?t.getTimezoneOffset():r;return Al(s)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Wu(t,o,i,r,s){if(t!==0&&!t||t===1/0||t===-1/0)return;const l=new Date(t);if(isNaN(l))return;o===void 0&&(o=Zu);const u=Hu(i,tu.props);return o.replace(yg,(d,h)=>d in El?El[d](l,u,r,s):h===void 0?d:h.split("\\]").join("]"))}function Ig(t){return nu(t)===!0?new Date(t.getTime()):t}var Yu={isValid:Cg,extractDate:kg,buildDate:Sg,getDayOfWeek:Tg,getWeekOfYear:Bs,isBetweenDates:Mg,addToDate:Ag,subtractFromDate:Bg,adjustDate:Uu,startOfDate:_n,endOfDate:Eg,getMaxDate:zg,getMinDate:Dg,getDateDiff:lr,getDayOfYear:Es,inferDateFormat:$g,getDateBetween:Og,isSameDate:qg,daysInMonth:ur,formatDate:Wu,clone:Ig};const ho=20,Rg=["Calendar","Years","Months"],zl=t=>Rg.includes(t),ws=t=>/^-?[\d]+\/[0-1]\d$/.test(t),Do=" \u2014 ";function Hn(t){return t.year+"/"+Je(t.month)}var Fg=_t({name:"QDate",props:{...pg,...Id,...Jn,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ws},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ws},navigationMaxYearMonth:{type:String,validator:ws},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:zl}},emits:[...vg,"rangeStart","rangeEnd","navigation"],setup(t,{slots:o,emit:i}){const{proxy:r}=Pt(),{$q:s}=r,l=eo(t,s),{getCache:u}=Mu(),{tabindex:d,headerClass:h,getLocale:f,getCurrentDate:m}=gg(t,s);let v;const g=Rd(t),_=Nd(g),S=H(null),M=H(dt()),q=H(f()),F=k(()=>dt()),ee=k(()=>f()),B=k(()=>m()),z=H(Sn(M.value,q.value)),D=H(t.defaultView),U=s.lang.rtl===!0?"right":"left",Z=H(U.value),$=H(U.value),j=z.value.year,ae=H(j-j%ho-(j<0?ho:0)),W=H(null),oe=k(()=>{const T=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${T} q-date--${T}-${t.minimal===!0?"minimal":"standard"}`+(l.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),re=k(()=>t.color||"primary"),ve=k(()=>t.textColor||"white"),Se=k(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Ae=k(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),le=k(()=>Ae.value.filter(T=>typeof T=="string").map(T=>Lt(T,M.value,q.value)).filter(T=>T.dateHash!==null&&T.day!==null&&T.month!==null&&T.year!==null)),ie=k(()=>{const T=I=>Lt(I,M.value,q.value);return Ae.value.filter(I=>Fd(I)===!0&&I.from!==void 0&&I.to!==void 0).map(I=>({from:T(I.from),to:T(I.to)})).filter(I=>I.from.dateHash!==null&&I.to.dateHash!==null&&I.from.dateHash<I.to.dateHash)}),Le=k(()=>t.calendar!=="persian"?T=>new Date(T.year,T.month-1,T.day):T=>{const I=Ml(T.year,T.month,T.day);return new Date(I.gy,I.gm-1,I.gd)}),de=k(()=>t.calendar==="persian"?Zn:(T,I,te)=>Wu(new Date(T.year,T.month-1,T.day,T.hour,T.minute,T.second,T.millisecond),I===void 0?M.value:I,te===void 0?q.value:te,T.year,T.timezoneOffset)),ce=k(()=>le.value.length+ie.value.reduce((T,I)=>T+1+lr(Le.value(I.to),Le.value(I.from)),0)),_e=k(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(W.value!==null){const te=W.value.init,fe=Le.value(te);return q.value.daysShort[fe.getDay()]+", "+q.value.monthsShort[te.month-1]+" "+te.day+Do+"?"}if(ce.value===0)return Do;if(ce.value>1)return`${ce.value} ${q.value.pluralDay}`;const T=le.value[0],I=Le.value(T);return isNaN(I.valueOf())===!0?Do:q.value.headerTitle!==void 0?q.value.headerTitle(I,T):q.value.daysShort[I.getDay()]+", "+q.value.monthsShort[T.month-1]+" "+T.day}),we=k(()=>le.value.concat(ie.value.map(I=>I.from)).sort((I,te)=>I.year-te.year||I.month-te.month)[0]),Me=k(()=>le.value.concat(ie.value.map(I=>I.to)).sort((I,te)=>te.year-I.year||te.month-I.month)[0]),pe=k(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(ce.value===0)return Do;if(ce.value>1){const T=we.value,I=Me.value,te=q.value.monthsShort;return te[T.month-1]+(T.year!==I.year?" "+T.year+Do+te[I.month-1]+" ":T.month!==I.month?Do+te[I.month-1]:"")+" "+I.year}return le.value[0].year}),me=k(()=>{const T=[s.iconSet.datetime.arrowLeft,s.iconSet.datetime.arrowRight];return s.lang.rtl===!0?T.reverse():T}),ge=k(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):q.value.firstDayOfWeek),Q=k(()=>{const T=q.value.daysShort,I=ge.value;return I>0?T.slice(I,7).concat(T.slice(0,I)):T}),K=k(()=>{const T=z.value;return t.calendar!=="persian"?new Date(T.year,T.month,0).getDate():ta(T.year,T.month)}),Ee=k(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),De=k(()=>{if(t.navigationMinYearMonth===void 0)return null;const T=t.navigationMinYearMonth.split("/");return{year:parseInt(T[0],10),month:parseInt(T[1],10)}}),Ne=k(()=>{if(t.navigationMaxYearMonth===void 0)return null;const T=t.navigationMaxYearMonth.split("/");return{year:parseInt(T[0],10),month:parseInt(T[1],10)}}),rt=k(()=>{const T={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return De.value!==null&&De.value.year>=z.value.year&&(T.year.prev=!1,De.value.year===z.value.year&&De.value.month>=z.value.month&&(T.month.prev=!1)),Ne.value!==null&&Ne.value.year<=z.value.year&&(T.year.next=!1,Ne.value.year===z.value.year&&Ne.value.month<=z.value.month&&(T.month.next=!1)),T}),mt=k(()=>{const T={};return le.value.forEach(I=>{const te=Hn(I);T[te]===void 0&&(T[te]=[]),T[te].push(I.day)}),T}),Vt=k(()=>{const T={};return ie.value.forEach(I=>{const te=Hn(I.from),fe=Hn(I.to);if(T[te]===void 0&&(T[te]=[]),T[te].push({from:I.from.day,to:te===fe?I.to.day:void 0,range:I}),te<fe){let J;const{year:je,month:Pe}=I.from,$e=Pe<12?{year:je,month:Pe+1}:{year:je+1,month:1};for(;(J=Hn($e))<=fe;)T[J]===void 0&&(T[J]=[]),T[J].push({from:void 0,to:J===fe?I.to.day:void 0,range:I}),$e.month++,$e.month>12&&($e.year++,$e.month=1)}}),T}),Ut=k(()=>{if(W.value===null)return;const{init:T,initHash:I,final:te,finalHash:fe}=W.value,[J,je]=I<=fe?[T,te]:[te,T],Pe=Hn(J),$e=Hn(je);if(Pe!==pt.value&&$e!==pt.value)return;const Qe={};return Pe===pt.value?(Qe.from=J.day,Qe.includeFrom=!0):Qe.from=1,$e===pt.value?(Qe.to=je.day,Qe.includeTo=!0):Qe.to=K.value,Qe}),pt=k(()=>Hn(z.value)),jt=k(()=>{const T={};if(t.options===void 0){for(let te=1;te<=K.value;te++)T[te]=!0;return T}const I=typeof t.options=="function"?t.options:te=>t.options.includes(te);for(let te=1;te<=K.value;te++){const fe=pt.value+"/"+Je(te);T[te]=I(fe)}return T}),fn=k(()=>{const T={};if(t.events===void 0)for(let I=1;I<=K.value;I++)T[I]=!1;else{const I=typeof t.events=="function"?t.events:te=>t.events.includes(te);for(let te=1;te<=K.value;te++){const fe=pt.value+"/"+Je(te);T[te]=I(fe)===!0&&Ee.value(fe)}}return T}),kt=k(()=>{let T,I;const{year:te,month:fe}=z.value;if(t.calendar!=="persian")T=new Date(te,fe-1,1),I=new Date(te,fe-1,0).getDate();else{const J=Ml(te,fe,1);T=new Date(J.gy,J.gm-1,J.gd);let je=fe-1,Pe=te;je===0&&(je=12,Pe--),I=ta(Pe,je)}return{days:T.getDay()-ge.value-1,endDay:I}}),he=k(()=>{const T=[],{days:I,endDay:te}=kt.value,fe=I<0?I+7:I;if(fe<6)for(let Pe=te-fe;Pe<=te;Pe++)T.push({i:Pe,fill:!0});const J=T.length;for(let Pe=1;Pe<=K.value;Pe++){const $e={i:Pe,event:fn.value[Pe],classes:[]};jt.value[Pe]===!0&&($e.in=!0,$e.flat=!0),T.push($e)}if(mt.value[pt.value]!==void 0&&mt.value[pt.value].forEach(Pe=>{const $e=J+Pe-1;Object.assign(T[$e],{selected:!0,unelevated:!0,flat:!1,color:re.value,textColor:ve.value})}),Vt.value[pt.value]!==void 0&&Vt.value[pt.value].forEach(Pe=>{if(Pe.from!==void 0){const $e=J+Pe.from-1,Qe=J+(Pe.to||K.value)-1;for(let Ln=$e;Ln<=Qe;Ln++)Object.assign(T[Ln],{range:Pe.range,unelevated:!0,color:re.value,textColor:ve.value});Object.assign(T[$e],{rangeFrom:!0,flat:!1}),Pe.to!==void 0&&Object.assign(T[Qe],{rangeTo:!0,flat:!1})}else if(Pe.to!==void 0){const $e=J+Pe.to-1;for(let Qe=J;Qe<=$e;Qe++)Object.assign(T[Qe],{range:Pe.range,unelevated:!0,color:re.value,textColor:ve.value});Object.assign(T[$e],{flat:!1,rangeTo:!0})}else{const $e=J+K.value-1;for(let Qe=J;Qe<=$e;Qe++)Object.assign(T[Qe],{range:Pe.range,unelevated:!0,color:re.value,textColor:ve.value})}}),Ut.value!==void 0){const Pe=J+Ut.value.from-1,$e=J+Ut.value.to-1;for(let Qe=Pe;Qe<=$e;Qe++)T[Qe].color=re.value,T[Qe].editRange=!0;Ut.value.includeFrom===!0&&(T[Pe].editRangeFrom=!0),Ut.value.includeTo===!0&&(T[$e].editRangeTo=!0)}z.value.year===B.value.year&&z.value.month===B.value.month&&(T[J+B.value.day-1].today=!0);const je=T.length%7;if(je>0){const Pe=7-je;for(let $e=1;$e<=Pe;$e++)T.push({i:$e,fill:!0})}return T.forEach(Pe=>{let $e="q-date__calendar-item ";Pe.fill===!0?$e+="q-date__calendar-item--fill":($e+=`q-date__calendar-item--${Pe.in===!0?"in":"out"}`,Pe.range!==void 0&&($e+=` q-date__range${Pe.rangeTo===!0?"-to":Pe.rangeFrom===!0?"-from":""}`),Pe.editRange===!0&&($e+=` q-date__edit-range${Pe.editRangeFrom===!0?"-from":""}${Pe.editRangeTo===!0?"-to":""}`),(Pe.range!==void 0||Pe.editRange===!0)&&($e+=` text-${Pe.color}`)),Pe.classes=$e}),T}),Ce=k(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});ke(()=>t.modelValue,T=>{if(v===T)v=0;else{const I=Sn(M.value,q.value);Rn(I.year,I.month,I)}}),ke(D,()=>{S.value!==null&&r.$el.contains(document.activeElement)===!0&&S.value.focus()}),ke(()=>z.value.year+"|"+z.value.month,()=>{i("navigation",{year:z.value.year,month:z.value.month})}),ke(F,T=>{Si(T,q.value,"mask"),M.value=T}),ke(ee,T=>{Si(M.value,T,"locale"),q.value=T});function ne(){const T=B.value,I=mt.value[Hn(T)];(I===void 0||I.includes(T.day)===!1)&&Yo(T),Re(T.year,T.month)}function Te(T){zl(T)===!0&&(D.value=T)}function Ie(T,I){["month","year"].includes(T)&&(T==="month"?Po:mn)(I===!0?-1:1)}function Re(T,I){D.value="Calendar",Rn(T,I)}function Ve(T,I){if(t.range===!1||!T){W.value=null;return}const te=Object.assign({...z.value},T),fe=I!==void 0?Object.assign({...z.value},I):te;W.value={init:te,initHash:Zn(te),final:fe,finalHash:Zn(fe)},Re(te.year,te.month)}function dt(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Lt(T,I,te){return ju(T,I,te,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Sn(T,I){const te=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(te.length===0)return oo();const fe=te[te.length-1],J=Lt(fe.from!==void 0?fe.from:fe,T,I);return J.dateHash===null?oo():J}function oo(){let T,I;if(t.defaultYearMonth!==void 0){const te=t.defaultYearMonth.split("/");T=parseInt(te[0],10),I=parseInt(te[1],10)}else{const te=B.value!==void 0?B.value:m();T=te.year,I=te.month}return{year:T,month:I,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:T+"/"+Je(I)+"/01"}}function Po(T){let I=z.value.year,te=Number(z.value.month)+T;te===13?(te=1,I++):te===0&&(te=12,I--),Rn(I,te),Se.value===!0&&io("month")}function mn(T){const I=Number(z.value.year)+T;Rn(I,z.value.month),Se.value===!0&&io("year")}function $t(T){Rn(T,z.value.month),D.value=t.defaultView==="Years"?"Months":"Calendar",Se.value===!0&&io("year")}function ki(T){Rn(z.value.year,T),D.value="Calendar",Se.value===!0&&io("month")}function Ea(T,I){const te=mt.value[I];(te!==void 0&&te.includes(T.day)===!0?Go:Yo)(T)}function Rt(T){return{year:T.year,month:T.month,day:T.day}}function Rn(T,I,te){if(De.value!==null&&T<=De.value.year&&((I<De.value.month||T<De.value.year)&&(I=De.value.month),T=De.value.year),Ne.value!==null&&T>=Ne.value.year&&((I>Ne.value.month||T>Ne.value.year)&&(I=Ne.value.month),T=Ne.value.year),te!==void 0){const{hour:J,minute:je,second:Pe,millisecond:$e,timezoneOffset:Qe,timeHash:Ln}=te;Object.assign(z.value,{hour:J,minute:je,second:Pe,millisecond:$e,timezoneOffset:Qe,timeHash:Ln})}const fe=T+"/"+Je(I)+"/01";fe!==z.value.dateHash&&(Z.value=z.value.dateHash<fe==(s.lang.rtl!==!0)?"left":"right",T!==z.value.year&&($.value=Z.value),ft(()=>{ae.value=T-T%ho-(T<0?ho:0),Object.assign(z.value,{year:T,month:I,day:1,dateHash:fe})}))}function Ci(T,I,te){const fe=T!==null&&T.length===1&&t.multiple===!1?T[0]:T;v=fe;const{reason:J,details:je}=Wo(I,te);i("update:modelValue",fe,J,je)}function io(T){const I=le.value[0]!==void 0&&le.value[0].dateHash!==null?{...le.value[0]}:{...z.value};ft(()=>{I.year=z.value.year,I.month=z.value.month;const te=t.calendar!=="persian"?new Date(I.year,I.month,0).getDate():ta(I.year,I.month);I.day=Math.min(Math.max(1,I.day),te);const fe=Tn(I);v=fe;const{details:J}=Wo("",I);i("update:modelValue",fe,T,J)})}function Wo(T,I){return I.from!==void 0?{reason:`${T}-range`,details:{...Rt(I.target),from:Rt(I.from),to:Rt(I.to)}}:{reason:`${T}-day`,details:Rt(I)}}function Tn(T,I,te){return T.from!==void 0?{from:de.value(T.from,I,te),to:de.value(T.to,I,te)}:de.value(T,I,te)}function Yo(T){let I;if(t.multiple===!0)if(T.from!==void 0){const te=Zn(T.from),fe=Zn(T.to),J=le.value.filter(Pe=>Pe.dateHash<te||Pe.dateHash>fe),je=ie.value.filter(({from:Pe,to:$e})=>$e.dateHash<te||Pe.dateHash>fe);I=J.concat(je).concat(T).map(Pe=>Tn(Pe))}else{const te=Ae.value.slice();te.push(Tn(T)),I=te}else I=Tn(T);Ci(I,"add",T)}function Go(T){if(t.noUnset===!0)return;let I=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const te=Tn(T);T.from!==void 0?I=t.modelValue.filter(fe=>fe.from!==void 0?fe.from!==te.from&&fe.to!==te.to:!0):I=t.modelValue.filter(fe=>fe!==te),I.length===0&&(I=null)}Ci(I,"remove",T)}function Si(T,I,te){const fe=le.value.concat(ie.value).map(J=>Tn(J,T,I)).filter(J=>J.from!==void 0?J.from.dateHash!==null&&J.to.dateHash!==null:J.dateHash!==null);i("update:modelValue",(t.multiple===!0?fe:fe[0])||null,te)}function za(){if(t.minimal!==!0)return X("div",{class:"q-date__header "+h.value},[X("div",{class:"relative-position"},[X(Vn,{name:"q-transition--fade"},()=>X("div",{key:"h-yr-"+pe.value,class:"q-date__header-subtitle q-date__header-link "+(D.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...u("vY",{onClick(){D.value="Years"},onKeyup(T){T.keyCode===13&&(D.value="Years")}})},[pe.value]))]),X("div",{class:"q-date__header-title relative-position flex no-wrap"},[X("div",{class:"relative-position col"},[X(Vn,{name:"q-transition--fade"},()=>X("div",{key:"h-sub"+_e.value,class:"q-date__header-title-label q-date__header-link "+(D.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...u("vC",{onClick(){D.value="Calendar"},onKeyup(T){T.keyCode===13&&(D.value="Calendar")}})},[_e.value]))]),t.todayBtn===!0?X(be,{class:"q-date__header-today self-start",icon:s.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:ne}):null])])}function Ko({label:T,type:I,key:te,dir:fe,goTo:J,boundaries:je,cls:Pe}){return[X("div",{class:"row items-center q-date__arrow"},[X(be,{round:!0,dense:!0,size:"sm",flat:!0,icon:me.value[0],tabindex:d.value,disable:je.prev===!1,...u("go-#"+I,{onClick(){J(-1)}})})]),X("div",{class:"relative-position overflow-hidden flex flex-center"+Pe},[X(Vn,{name:"q-transition--jump-"+fe},()=>X("div",{key:te},[X(be,{flat:!0,dense:!0,noCaps:!0,label:T,tabindex:d.value,...u("view#"+I,{onClick:()=>{D.value=I}})})]))]),X("div",{class:"row items-center q-date__arrow"},[X(be,{round:!0,dense:!0,size:"sm",flat:!0,icon:me.value[1],tabindex:d.value,disable:je.next===!1,...u("go+#"+I,{onClick(){J(1)}})})])]}const Da={Calendar:()=>[X("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[X("div",{class:"q-date__navigation row items-center no-wrap"},Ko({label:q.value.months[z.value.month-1],type:"Months",key:z.value.month,dir:Z.value,goTo:Po,boundaries:rt.value.month,cls:" col"}).concat(Ko({label:z.value.year,type:"Years",key:z.value.year,dir:$.value,goTo:mn,boundaries:rt.value.year,cls:""}))),X("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Q.value.map(T=>X("div",{class:"q-date__calendar-item"},[X("div",T)]))),X("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[X(Vn,{name:"q-transition--slide-"+Z.value},()=>X("div",{key:pt.value,class:"q-date__calendar-days fit"},he.value.map(T=>X("div",{class:T.classes},[T.in===!0?X(be,{class:T.today===!0?"q-date__today":"",dense:!0,flat:T.flat,unelevated:T.unelevated,color:T.color,textColor:T.textColor,label:T.i,tabindex:d.value,...u("day#"+T.i,{onClick:()=>{Qo(T.i)},onMouseover:()=>{$a(T.i)}})},T.event!==!1?()=>X("div",{class:"q-date__event bg-"+T.event}):null):X("div",""+T.i)]))))])])],Months(){const T=z.value.year===B.value.year,I=fe=>De.value!==null&&z.value.year===De.value.year&&De.value.month>fe||Ne.value!==null&&z.value.year===Ne.value.year&&Ne.value.month<fe,te=q.value.monthsShort.map((fe,J)=>{const je=z.value.month===J+1;return X("div",{class:"q-date__months-item flex flex-center"},[X(be,{class:T===!0&&B.value.month===J+1?"q-date__today":null,flat:je!==!0,label:fe,unelevated:je,color:je===!0?re.value:null,textColor:je===!0?ve.value:null,tabindex:d.value,disable:I(J+1),...u("month#"+J,{onClick:()=>{ki(J+1)}})})])});return t.yearsInMonthView===!0&&te.unshift(X("div",{class:"row no-wrap full-width"},[Ko({label:z.value.year,type:"Years",key:z.value.year,dir:$.value,goTo:mn,boundaries:rt.value.year,cls:" col"})])),X("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},te)},Years(){const T=ae.value,I=T+ho,te=[],fe=J=>De.value!==null&&De.value.year>J||Ne.value!==null&&Ne.value.year<J;for(let J=T;J<=I;J++){const je=z.value.year===J;te.push(X("div",{class:"q-date__years-item flex flex-center"},[X(be,{key:"yr"+J,class:B.value.year===J?"q-date__today":null,flat:!je,label:J,dense:!0,unelevated:je,color:je===!0?re.value:null,textColor:je===!0?ve.value:null,tabindex:d.value,disable:fe(J),...u("yr#"+J,{onClick:()=>{$t(J)}})})]))}return X("div",{class:"q-date__view q-date__years flex flex-center"},[X("div",{class:"col-auto"},[X(be,{round:!0,dense:!0,flat:!0,icon:me.value[0],tabindex:d.value,disable:fe(T),...u("y-",{onClick:()=>{ae.value-=ho}})})]),X("div",{class:"q-date__years-content col self-stretch row items-center"},te),X("div",{class:"col-auto"},[X(be,{round:!0,dense:!0,flat:!0,icon:me.value[1],tabindex:d.value,disable:fe(I),...u("y+",{onClick:()=>{ae.value+=ho}})})])])}};function Qo(T){const I={...z.value,day:T};if(t.range===!1){Ea(I,pt.value);return}if(W.value===null){const te=he.value.find(J=>J.fill!==!0&&J.i===T);if(t.noUnset!==!0&&te.range!==void 0){Go({target:I,from:te.range.from,to:te.range.to});return}if(te.selected===!0){Go(I);return}const fe=Zn(I);W.value={init:I,initHash:fe,final:I,finalHash:fe},i("rangeStart",Rt(I))}else{const te=W.value.initHash,fe=Zn(I),J=te<=fe?{from:W.value.init,to:I}:{from:I,to:W.value.init};W.value=null,Yo(te===fe?I:{target:I,...J}),i("rangeEnd",{from:Rt(J.from),to:Rt(J.to)})}}function $a(T){if(W.value!==null){const I={...z.value,day:T};Object.assign(W.value,{final:I,finalHash:Zn(I)})}}return Object.assign(r,{setToday:ne,setView:Te,offsetCalendar:Ie,setCalendarTo:Re,setEditingRange:Ve}),()=>{const T=[X("div",{class:"q-date__content col relative-position"},[X(Vn,{name:"q-transition--fade"},Da[D.value])])],I=Dt(o.default);return I!==void 0&&T.push(X("div",{class:"q-date__actions"},I)),t.name!==void 0&&t.disable!==!0&&_(T,"push"),X("div",{class:oe.value,...Ce.value},[za(),X("div",{ref:S,class:"q-date__main col column",tabindex:-1},T)])}}});const Gu="YYYY-MM-DD";function xs(t,o){var s,l,u,d,h,f;const i=(u=(l=t.includes("T")?(s=t.split("T"))==null?void 0:s[0]:t)==null?void 0:l.split("-"))==null?void 0:u.map(m=>parseInt(m,10)),r=(f=(h=(d=t.split("T"))==null?void 0:d[1])==null?void 0:h.split(":"))==null?void 0:f.map(m=>parseInt(m,10));return o!=null&&o.includeTime?new Date(i[0],i[1]-1,i[2],o!=null&&o.includeTime?r[0]:void 0,o!=null&&o.includeTime?r[1]:void 0):new Date(i[0],i[1]-1,i[2])}function jo(){const{companyProfile:t}=nn();return(o,i)=>{var u;const r=typeof o=="string"?xs(o,i):o;if(i!=null&&i.distanceTo){const d=typeof i.distanceTo=="string"?xs(i.distanceTo,i):i.distanceTo;return ia(r,d)}if(i!=null&&i.distanceFrom){const d=typeof i.distanceFrom=="string"?xs(i.distanceFrom,i):i.distanceFrom;return ia(r,d,{addSuffix:!0})}const s=`${((u=t.value)==null?void 0:u.defaultDateFormat)||Gu} ${i!=null&&i.includeTime?"HH:mm":""}`.trim();return Yu.formatDate(r,s)}}const Ng={class:"row justify-end full-width"},No=xe({__name:"DateSelector",props:ut({range:{type:Boolean}},{modelValue:{local:!0,default:new Date().toISOString()}}),emits:ut(["confirm","confirm-range"],["update:modelValue"]),setup(t){const o=wt(t,"modelValue",{local:!0});return(i,r)=>(P(),R(Fg,{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=s=>o.value=s),class:"full-width",range:i.range,landscape:i.$q.screen.gt.xs,mask:A(Gu)},{default:C(()=>[O("div",Ng,[w(be,{flat:"",rounded:"","no-caps":"",color:"primary",icon:"check",label:"Confirmar",onClick:r[0]||(r[0]=s=>i.range?i.$emit("confirm-range",o.value):i.$emit("confirm",o.value))})])]),_:1},8,["modelValue","range","landscape","mask"]))}}),Zg={class:"row justify-between items-center"},Hg={key:0},cr=xe({__name:"AssignedUsersMenu",props:{includedUsers:{}},emits:["update","select"],setup(t,{emit:o}){const{users:i}=ya(),r=t,s=o;function l(u){var f,m,v;const d=(f=r.includedUsers)==null?void 0:f.indexOf(u.id),h=d<0?[...r.includedUsers,u.id]:[...(m=r.includedUsers)==null?void 0:m.slice(0,d),...(v=r.includedUsers)==null?void 0:v.slice(d+1)];s("select",d<0?u.id:null),s("update",h)}return(u,d)=>(P(),R(Bt,null,{default:C(()=>[w(Cn,{caption:"",class:"q-pa-md"},{default:C(()=>[Ze(" Usuarios ")]),_:1}),(P(!0),Y(qe,null,Ue(A(i),h=>{var f;return P(),R(xo,{key:h.id,name:h.username,class:at([{"bg-primary text-white":(f=u.includedUsers)==null?void 0:f.includes(h.id)},"q-ma-xs"]),onClick:m=>l(h)},{default:C(()=>[w(it,null,{default:C(()=>{var m;return[O("div",Zg,[O("div",null,ue(h.name||h.username),1),(m=u.includedUsers)!=null&&m.includes(h.id)?(P(),Y("div",Hg,[w(Ge,{name:"check"})])):V("",!0)])]}),_:2},1024)]),_:2},1032,["name","class","onClick"])}),128))]),_:1}))}}),Vg={class:"row no-wrap items-center"},Ug={class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}},dr=xe({__name:"AssignedUsersInput",props:{title:{},includedUsers:{},disable:{type:Boolean}},emits:["update"],setup(t){return Ht(),(o,i)=>{var r,s;return P(),Y("div",Vg,[O("div",Ug,ue(o.title||"Usuarios asignados"),1),w(en,{id:"assigned-users-select","input-props":{dense:!0,modelValue:`${((r=o.includedUsers)==null?void 0:r.length)||0} ${((s=o.includedUsers)==null?void 0:s.length)===1?"usuario asignado":"usuarios asignados"}`,disable:o.disable}},{label:C(()=>[ze(o.$slots,"label")]),default:C(()=>[w(st,{fit:"",maximized:"","parent-id":"assigned-users-select","min-width":311},{default:C(()=>[w(cr,{"included-users":o.includedUsers||[],onUpdate:i[0]||(i[0]=l=>o.$emit("update",l))},null,8,["included-users"])]),_:1})]),_:3},8,["input-props"])])}}}),jg={class:"row justify-between items-center"},Wg={class:"column"},Yg={class:"row items-center full-width"},Gg={class:"text-weight-medium text-body2 q-mr-xs"},Kg={key:0},Qg=xe({__name:"AddressesSelectorMenu",props:{addresses:{},excludeAddressed:{},selectedAddressed:{},single:{type:Boolean},onClose:{type:Function}},emits:["update"],setup(t,{emit:o}){const i=t,r=o;k(()=>i.addresses.filter(u=>{var d;return!((d=i.excludeAddressed)!=null&&d.includes(u.id))}));function s(u){var f,m;if(!i.selectedAddressed)return;if(i.single){r("update",[u.id]);return}const d=i.selectedAddressed.indexOf(u.id),h=d<0?[...i.selectedAddressed,u.id]:[...(f=i.selectedAddressed)==null?void 0:f.slice(0,d),...(m=i.selectedAddressed)==null?void 0:m.slice(d+1)];r("update",h)}function l(u){var d;return(d=i.selectedAddressed)==null?void 0:d.includes(u.id)}return(u,d)=>(P(),Y(qe,null,[V("",!0),w(Qn,{dense:"","add-btn":"","add-dialog-props":{maximized:u.$q.platform.is.mobile},class:"q-pt-md",elements:u.addresses,"title-singular":"Ubicaci\xF3n","title-plural":"Ubicaciones",onClose:u.onClose,search:{label:"Buscar ubicaci\xF3n",searchProps:["description",h=>h.description||"",h=>{var f;return((f=h.coords)==null?void 0:f.address)||""},h=>{var f;return((f=h.contact)==null?void 0:f.fullName)||""},h=>{var f;return((f=h.contact)==null?void 0:f.document)||""}]}},{"add-btn":C(({close:h})=>[w(pa,{onClose:h},null,8,["onClose"])]),item:C(({item:h})=>{var f;return[w(xo,{name:`${h.description} ${(f=h.contact)==null?void 0:f.fullName}`,class:at([{"bg-primary text-white":l(h)},"q-ma-none"]),onClick:m=>s(h)},{default:C(()=>[w(it,null,{default:C(()=>{var m,v;return[O("div",jg,[O("div",Wg,[O("div",Yg,[O("div",Gg,ue(h.description),1),h.contact?(P(),Y("div",{key:0,class:at(l(h)?"text-white":"text-grey-8")}," - "+ue((m=h.contact)==null?void 0:m.fullName),3)):V("",!0)]),O("div",{class:at(["text-caption",l(h)?"text-grey-3":"text-grey-7"])},ue((v=h.coords)==null?void 0:v.address),3)]),l(h)?(P(),Y("div",Kg,[w(Ge,{name:"check"})])):V("",!0)])]}),_:2},1024)]),_:2},1032,["name","class","onClick"])]}),_:1},8,["add-dialog-props","elements","onClose","search"])],64))}}),Xg={class:"row no-wrap items-center"},Jg={class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}},zs=xe({__name:"AddressesSelectorInput",props:ut({title:{},label:{},includedAddresses:{},single:{type:Boolean},editable:{type:Boolean,default:!0},autoclose:{type:Boolean}},{modelValue:{local:!0,default:!1}}),emits:ut(["update"],["update:modelValue"]),setup(t){const{addresses:o}=no(),i=wt(t,"modelValue",{local:!0});return(r,s)=>{var l,u;return P(),Y("div",Xg,[O("div",Jg,ue(r.title||"Ubicaciones"),1),w(en,{id:"assigned-users-select","input-props":{dense:!0,disable:!r.editable,modelValue:r.label?r.label(r.includedAddresses):`${(l=r.includedAddresses)==null?void 0:l.length} ${((u=r.includedAddresses)==null?void 0:u.length)===1?"ubicaci\xF3n":"ubicaciones"}`}},{label:C(()=>[ze(r.$slots,"label")]),default:C(()=>[r.editable?(P(),R(st,{key:0,fit:"",modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=d=>i.value=d),"parent-id":"assigned-users-select","min-width":311,maximized:r.$q.platform.is.mobile,mode:"dialog",position:r.$q.platform.is.mobile?void 0:"standard"},{default:C(()=>[w(Qg,{addresses:A(o),"selected-addressed":r.includedAddresses,onClose:s[0]||(s[0]=d=>i.value=!1),onUpdate:s[1]||(s[1]=d=>{r.$emit("update",d),r.autoclose&&(i.value=!1)}),single:r.single},null,8,["addresses","selected-addressed","single"])]),_:1},8,["modelValue","maximized","position"])):V("",!0)]),_:3},8,["input-props"])])}}}),e_={class:"column"},t_=O("div",{class:"text-caption text-grey-8"},"Flujo de trabajo",-1),n_={class:"column"},o_={class:"text-weight-bold"},i_={class:"text-caption"},a_={class:"column q-gutter-y-md"},s_={class:"column"},r_={class:"row no-wrap items-center"},l_=O("div",{class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}}," Fecha de inicio ",-1),u_={class:"row no-wrap items-center"},c_=O("div",{class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}}," Fecha de vencimiento ",-1),d_={class:"column"},h_={key:0},f_={key:1,class:"text-grey-6"},m_={key:1,class:"column q-mt-sm"},p_=O("div",{class:"text-caption text-grey-8"},"Ubicaci\xF3n",-1),v_={key:2,class:"column"},g_={class:"row justify-between"},__=xe({__name:"TaskForm",emits:["close"],setup(t,{emit:o}){const i=o,r=jo(),{getAddressById:s}=no(),{tasksFlows:l}=Em(),{selectedTask:u}=Uo(),{createTask:d,isCreatingTask:h,createTaskError:f}=zm(),{userProfile:m}=Ht(),v=dn({subject:"",description:"",users:[],salesPoints:[],startDate:void 0,dueDate:void 0,contactAddress:void 0,flow:void 0}),g=dn({startDate:!1,dueDate:!1,flow:!1}),_=H("description"),S=k(()=>s(v.contactAddress||"")),M=k(()=>l.value.find(F=>F.id===v.flow));function q(){d(v,{onSuccess:async({data:F})=>{u.value=F,i("close")}})}return(F,ee)=>(P(),R(hn,null,{default:C(()=>[w(ct,null,{default:C(()=>{var B,z;return[O("div",e_,[t_,w(en,{id:"task-flow-select","input-props":{dense:!0,modelValue:((B=M.value)==null?void 0:B.label)||"Seleccionar..."}},{default:C(()=>[w(st,{modelValue:g.flow,"onUpdate:modelValue":ee[0]||(ee[0]=D=>g.flow=D),fit:"","parent-id":"task-flow-select","max-width":500},{default:C(()=>[w(Bt,{padding:""},{default:C(()=>[(P(!0),Y(qe,null,Ue(A(l),D=>(P(),R(xo,{key:D.id,name:D.label,clickable:"",onClick:()=>{v.flow=D.id,g.flow=!1}},{default:C(()=>[O("div",n_,[O("div",o_,ue(D.label),1),O("div",i_,ue(D.description),1)])]),_:2},1032,["name","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["input-props"]),w(ea,{message:(z=A(f))==null?void 0:z.flow},null,8,["message"])])]}),_:1}),M.value?(P(),R(Ke,{key:0})):V("",!0),M.value?(P(),R(ct,{key:1,class:"q-pt-none"},{default:C(()=>{var B,z,D,U;return[O("div",null,[O("div",a_,[O("div",s_,[w(to,{autofocus:"",borderless:Boolean(v.subject),placeholder:"T\xEDtulo...",modelValue:v.subject,"onUpdate:modelValue":ee[1]||(ee[1]=Z=>v.subject=Z),class:"text-h4 q-pt-md","input-class":v.subject?"text-weight-bold":"text-weight-light"},null,8,["borderless","modelValue","input-class"]),w(ea,{message:(B=A(f))==null?void 0:B.subject},null,8,["message"])]),(z=A(m))!=null&&z.isSuperuser?(P(),R(dr,{key:0,"included-users":v.users,onUpdate:ee[2]||(ee[2]=Z=>v.users=Z)},null,8,["included-users"])):V("",!0),O("div",r_,[l_,w(en,{id:"task-start-date-select","input-props":{dense:!0,modelValue:v.startDate?A(r)(v.startDate):""}},{default:C(()=>[w(st,{modelValue:g.startDate,"onUpdate:modelValue":ee[4]||(ee[4]=Z=>g.startDate=Z),"parent-id":"task-start-date-select","max-width":500},{default:C(()=>[w(No,{"model-value":v.startDate,onConfirm:ee[3]||(ee[3]=Z=>{v.startDate=Z,g.startDate=!1})},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1},8,["input-props"])]),O("div",u_,[c_,w(en,{id:"task-due-date-select","input-props":{dense:!0,modelValue:v.dueDate?A(r)(v.dueDate):""}},{default:C(()=>[w(st,{modelValue:g.dueDate,"onUpdate:modelValue":ee[6]||(ee[6]=Z=>g.dueDate=Z),"parent-id":"task-due-date-select","max-width":500},{default:C(()=>[w(No,{"model-value":v.dueDate,onConfirm:ee[5]||(ee[5]=Z=>{v.dueDate=Z,g.dueDate=!1})},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1},8,["input-props"])]),O("div",d_,[w(zs,{single:"",autoclose:"",title:"Contacto asignado",includedAddresses:v.contactAddress?[v.contactAddress]:[],onUpdate:ee[7]||(ee[7]=Z=>v.contactAddress=Z[0])},{label:C(()=>{var Z;return[S.value?(P(),Y("div",h_,ue(((Z=S.value.contact)==null?void 0:Z.fullName)||""),1)):(P(),Y("div",f_,"Seleccionar"))]}),_:1},8,["includedAddresses"]),w(ea,{message:(D=A(f))==null?void 0:D.contactAddress},null,8,["message"])]),(U=S.value)!=null&&U.coords?(P(),Y("div",m_,[p_,w(Aa,{"model-value":S.value.coords,title:S.value.description,"keep-static":""},null,8,["model-value","title"])])):V("",!0)])])]}),_:1})):V("",!0),M.value?(P(),Y("div",v_,[w(wo,{dense:"",modelValue:_.value,"onUpdate:modelValue":ee[8]||(ee[8]=B=>_.value=B),align:"left",breakpoint:0},{default:C(()=>[w(Et,{"no-caps":"",name:"description",label:"Descripci\xF3n"})]),_:1},8,["modelValue"]),w(Ke)])):V("",!0),M.value?(P(),R(ct,{key:3},{default:C(()=>[w(rg,{modelValue:v.description,"onUpdate:modelValue":ee[9]||(ee[9]=B=>v.description=B),"min-height":"5rem"},null,8,["modelValue"])]),_:1})):V("",!0),M.value?(P(),R(ct,{key:4},{default:C(()=>[O("div",g_,[w(be,{"no-caps":"",flat:"",rounded:"",color:"grey-8",label:"Cancelar",onClick:ee[10]||(ee[10]=B=>F.$emit("close")),disable:A(h)},null,8,["disable"]),w(be,{"no-caps":"",unelevated:"",rounded:"",color:"primary",label:"Crear",class:"q-px-lg",onClick:q,loading:A(h)},null,8,["loading"])])]),_:1})):V("",!0)]),_:1}))}}),hr=xe({__name:"TaskList",props:{tasks:{},addBtn:{type:Boolean,default:!0},loading:{type:Boolean},hideFilters:{type:Boolean},filter:{}},setup(t){const o=It(),{selectedTask:i,availableStatuses:r,filteredTasks:s}=Uo(),{userProfile:l}=Ht();go(),jo();const u=Tt();function d(h){return(h==null?void 0:h.map(f=>({id:f,label:r.value[f]})))||[]}return(h,f)=>{var m;return P(),R(Qn,{"add-btn":A(u).hasCreateTasksPermission(),filter:h.filter,elements:h.tasks,loading:h.loading,onFilterChange:f[0]||(f[0]=v=>s.value=v),"add-dialog-props":{maximized:A(o).platform.is.mobile},separator:"","page-name":"tasks","title-singular":"Tarea",selected:A(i),"onUpdate:selected":f[1]||(f[1]=v=>vo(i)?i.value=v:null),filters:void 0,search:{label:"Buscar tarea",searchProps:["subject","description",v=>v.contactAddress.description,v=>{var g;return((g=v.contactAddress.coords)==null?void 0:g.address)||""},v=>v.currentStatus.label,v=>{var g;return((g=v.contactAddress.contact)==null?void 0:g.fullName)||""}]}},$n({"add-btn":C(({close:v})=>[w(__,{onClose:v},null,8,["onClose"])]),item:C(({item:v})=>[w(zu,{task:v,"show-actions":A(o).platform.is.mobile===!0},null,8,["task","show-actions"])]),"filter-status":C(({selected:v})=>[w(Qn,{"multi-select":"",elements:d(Object.keys(A(r))),"selected-items":v.value,onSelectMany:g=>v.value=g},{item:C(({item:g})=>[Ze(ue(g.label),1)]),_:2},1032,["elements","selected-items","onSelectMany"])]),"filter-lastStatusDate":C(({selected:v,close:g})=>[w(No,{range:"","model-value":v.value,onConfirmRange:_=>{v.value=_,g()}},null,8,["model-value","onConfirmRange"])]),_:2},[(m=A(l))!=null&&m.isSuperuser?{name:"filter-users",fn:C(({selected:v})=>[w(cr,{"included-users":v.value||[],onUpdate:g=>v.value=g},null,8,["included-users","onUpdate"])]),key:"0"}:void 0]),1032,["add-btn","filter","elements","loading","add-dialog-props","selected","filters","search"])}}}),y_={key:0},b_={class:"column q-gutter-y-md"},w_={key:0,class:"text-h5 text-weight-light"},x_={class:"col-3 text-caption text-grey-8"},P_={class:"text-weight-medium text-grey-9"},k_=xe({__name:"ContactAddressDetailsInfo",props:{title:{},contact:{}},setup(t){const{companyProfile:o}=nn(),i=k(()=>{var s,l;return{...((l=(s=o.value)==null?void 0:s.contactCustomFieldsMeta)==null?void 0:l.fields.reduce((u,d)=>{var h;return{...u,[d.name]:((h=d.props)==null?void 0:h.label)||d.name}},{}))||{}}});function r(s){return Array.isArray(s)?s.join(", "):s}return(s,l)=>Object.keys(s.contact.additionalValues).length>0?(P(),Y("div",y_,[O("div",b_,[s.title?(P(),Y("div",w_,ue(s.title),1)):V("",!0),(P(!0),Y(qe,null,Ue(s.contact.additionalValues,(u,d)=>(P(),Y("div",{key:d,class:"row items-center"},[O("div",x_,ue(i.value[d]),1),O("div",P_,ue(r(u)),1)]))),128))])])):V("",!0)}}),C_={class:"q-gutter-y-md"},S_={key:0,class:"text-h6 text-weight-regular"},T_={class:"row"},L_=O("div",{class:"text-grey-7 text-caption col-3"},"Nombre",-1),M_={class:"text-weight-medium text-grey-8"},A_={class:"row"},B_=O("div",{class:"text-grey-7 text-caption col-3"},"Documento",-1),E_={class:"text-weight-medium text-grey-8"},Ku=xe({__name:"ContactDetails",props:{title:{},contact:{},address:{}},setup(t){return er(),Ht(),(o,i)=>(P(),Y("div",C_,[o.title?(P(),Y("div",S_,ue(o.title),1)):V("",!0),O("div",T_,[L_,O("div",M_,ue(o.contact.fullName),1)]),O("div",A_,[B_,O("div",E_,ue(o.contact.document),1)]),O("div",null,[w(k_,{contact:o.contact},null,8,["contact"])])]))}}),z_={key:0,class:"column"},D_={class:"full-width"},$_={key:0,class:"column q-mt-md"},O_={key:1,class:"bg-grey-3",style:{"min-height":"16px"}},q_=xe({__name:"ContactAddressDetails",props:{showHeader:{type:Boolean,default:!0}},setup(t){const{selectedAddress:o}=bn(),{tasks:i}=bo(),r=H("tasks");return(s,l)=>A(o)?(P(),Y("div",z_,[s.showHeader?(P(),R(tt,{key:0,class:"q-py-md"},{default:C(()=>{var u;return[O("div",D_,[w(Ta,{address:A(o),"show-actions-indices":[0,1],"is-selected":"","flat-options":"","show-all-subtitle-lines":"","hide-tasks":"","fill-new-sale-btn":""},null,8,["address"]),(u=A(o))!=null&&u.coords?(P(),Y("div",$_,[w(Aa,{"model-value":A(o).coords,"keep-static":"","hide-address":""},null,8,["model-value"])])):V("",!0)])]}),_:1})):V("",!0),s.showHeader?(P(),Y("div",O_)):V("",!0),w(wo,{"no-caps":"",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=u=>r.value=u),"active-color":"primary",class:"text-grey-7"},{default:C(()=>[w(Et,{name:"tasks",label:"Tareas"}),A(o).contact?(P(),R(Et,{key:0,name:"contact",label:"Contacto"})):V("",!0)]),_:1},8,["modelValue"]),w(Ke),w(Vo,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=u=>r.value=u),animated:"",class:"q-mt-sm"},{default:C(()=>[w(Zt,{name:"tasks",class:"q-pa-none"},{default:C(()=>[w(hr,{hideFilters:"",tasks:A(i),filter:u=>{var d;return u.contactAddress.id===((d=A(o))==null?void 0:d.id)},"add-btn":!1,"always-show-selected":!1},null,8,["tasks","filter"])]),_:1}),A(o).contact?(P(),R(Zt,{key:0,name:"contact"},{default:C(()=>[w(Ku,{title:"Detalles del contacto",contact:A(o).contact,address:A(o)},null,8,["contact","address"])]),_:1})):V("",!0)]),_:1},8,["modelValue"])])):V("",!0)}}),I_={class:"column full-width q-pa-xs"},R_={class:"row items-center no-wrap"},F_={class:"row no-wrap items-center q-gutter-sm"},N_={class:"column",style:{"border-radius":"6px"}},Z_={class:"text-body1 text-weight-bolder",style:{"line-height":"18px"}},H_={class:"q-mt-xs"},V_={class:"row items-center"},U_={class:"row q-gutter-x-xs"},j_={class:"text-caption text-grey-9 text-weight-medium"},W_={class:"row q-gutter-x-xs"},Y_={class:"text-caption text-grey-9 text-weight-medium"},G_=xe({__name:"ActivityListItem",props:{index:{},activity:{}},setup(t){const o=jo();return(i,r)=>{var s,l,u;return P(),Y("div",I_,[O("div",R_,[w(Nt,{color:i.activity.color,"text-color":"white",label:`${i.index+1}`,class:"q-px-xs"},null,8,["color","label"]),w(Eu,{unclickable:"",borderless:"",dense:"",status:i.activity,class:"full-width"},null,8,["status"])]),O("div",F_,[(s=i.activity.coords)!=null&&s.latlng?(P(),R(Aa,{key:0,"model-value":{latlng:i.activity.coords.latlng},"show-zoom-control":!1,"keep-static":"",style:{"min-width":"105px","max-width":"105px"},height:"70px"},null,8,["model-value"])):V("",!0),O("div",N_,[O("div",Z_,ue(i.activity.task.subject),1),i.activity.task.description?(P(),R(Cn,{key:0,class:"text-grey-8 text-caption q-mt-xs",lines:2},{default:C(()=>[Ze(ue(i.activity.task.description||"Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio eligendi incidunt, itaque iusto, hic fugiat modi, repudiandae beatae corrupti ea esse tempora ducimus id minima dignissimos excepturi nam adipisci quia!"),1)]),_:1})):V("",!0)])]),O("div",H_,[O("div",V_,[O("div",U_,[w(Ge,{name:"o_account_circle",size:"18px",class:"text-grey-7"}),O("div",j_,ue(((l=i.activity.createdBy)==null?void 0:l.name)||((u=i.activity.createdBy)==null?void 0:u.username)),1)]),w(Ke,{spaced:"",vertical:"",inset:""}),O("div",W_,[w(Ge,{name:"o_today",size:"18px",class:"text-grey-7"}),O("div",Y_,ue(A(o)(i.activity.createdAt,{includeTime:!0})),1)])])])])}}}),K_=H([]);function Ba({sort:t}={}){const{tasks:o}=bo(),{selectedTask:i}=Uo(),r=t!=null?t:!0,s=k(()=>o.value.reduce((d,h)=>{var f;return[...d,...((f=h.statusLogs)==null?void 0:f.map(m=>({...m,task:h})))||[]]},[]).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime())),l=k(()=>s.value.sort((d,h)=>new Date(h.createdAt).getTime()-new Date(d.createdAt).getTime())),u=k(()=>(r?l.value:s.value).filter(d=>{var h;return((h=i.value)==null?void 0:h.id)===d.task.id}));return{filteredActivities:K_,selectedTaskActivities:u,activities:r?l:s}}const Ds=xe({__name:"ActivitiesList",props:{activities:{},hideFilters:{type:Boolean}},setup(t){const o=H(null),{filteredActivities:i}=Ba(),{userProfile:r}=Ht(),{getUserById:s}=go(),l=jo();return(u,d)=>{var h,f,m,v;return u.activities?(P(),R(Qn,{key:0,"add-dialog-props":{maximized:u.$q.platform.is.mobile},dense:"",initialFiltersData:{createdBy:(h=A(r))!=null&&h.id?[(f=A(r))==null?void 0:f.id]:[],createdAt:A(Yu).formatDate(new Date,"YYYY-MM-DD")},onFilterChange:d[0]||(d[0]=g=>i.value=g),elements:u.activities,selected:o.value,onSelect:d[1]||(d[1]=g=>{u.$q.platform.is.mobile||(o.value=g)}),"title-singular":"Actividad","title-plural":"Actividades",search:{label:"Buscar actividades",searchProps:["label",g=>g.task.subject]},filters:u.hideFilters?void 0:{label:"Filtrar por...",filterProps:[(m=A(r))!=null&&m.isSuperuser?{icon:"o_person",fieldName:"createdBy",fieldLabel:"Usuario",label:g=>(g||[]).length===0?"Seleccionar":A(mv)(g==null?void 0:g.map(_=>(()=>{const S=A(s)(_);return(S==null?void 0:S.name)||(S==null?void 0:S.username)||""})()),{maxElements:3,limitToCharactersPerItem:10}),itemIsVisible(g,_){return!_||_.length===0?!1:_.some(S=>S===(g==null?void 0:g.id))}}:void 0,{icon:"o_event",fieldName:"createdAt",fieldLabel:"Fecha de creaci\xF3n",label:g=>g?typeof g=="string"?A(l)(g):`${A(l)(g.from)} al ${A(l)(g.to)}`:"Seleccionar",itemIsVisible(g,_){var M,q;if(!_)return!1;const S=(g==null?void 0:g.split("T")[0])||"";if(typeof _=="string"){const F=_==null?void 0:_.split("T")[0];return S===F}else{const F=new Date((M=_==null?void 0:_.from)==null?void 0:M.split("T")[0]),ee=new Date((q=_==null?void 0:_.to)==null?void 0:q.split("T")[0]),B=new Date(S);return B>=F&&B<=ee}}}].filter(Boolean)}},$n({item:C(({item:g,index:_,items:S})=>[w(G_,{activity:g,index:S.length-_-1},null,8,["activity","index"])]),"filter-createdAt":C(({selected:g,close:_})=>[w(No,{range:"","model-value":g.value,onConfirmRange:S=>{g.value=S,_()}},null,8,["model-value","onConfirmRange"])]),_:2},[(v=A(r))!=null&&v.isSuperuser?{name:"filter-createdBy",fn:C(({selected:g})=>[w(cr,{"included-users":g.value||[],onSelect:_=>g.value=_?[_]:[]},null,8,["included-users","onSelect"])]),key:"0"}:void 0]),1032,["add-dialog-props","initialFiltersData","elements","selected","search","filters"])):V("",!0)}}}),Q_={key:0},X_={key:0,class:"bg-grey-3",style:{"min-height":"16px"}},J_={class:"q-gutter-y-md"},ey={class:"row no-wrap items-center"},ty=O("div",{class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}}," Fecha de inicio ",-1),ny={class:"row no-wrap items-center"},oy=O("div",{class:"text-caption text-grey-8 col-3",style:{"line-height":"13px"}}," Fecha de vencimiento ",-1),iy={class:"q-mt-sm"},ay=xe({__name:"TaskDetails",props:{asDialog:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},emits:["close"],setup(t){var h,f;const{selectedTask:o}=Uo(),{updateTask:i}=er(),r=Tt(),{selectedTaskActivities:s}=Ba(),l=H(r.value.hasUpdateTasksPermission()?"task":(f=(h=o.value)==null?void 0:h.contactAddress)!=null&&f.contact?"contact":"activities"),u=dn({startDate:!1,dueDate:!1}),d=jo();return(m,v)=>A(o)?(P(),Y("div",Q_,[w(tt,{class:"q-py-md column"},{default:C(()=>[w(zu,{task:A(o),"show-full-start-due-dates":"",editable:A(r).hasUpdateTasksPermission()},null,8,["task","editable"])]),_:1}),m.showHeader?(P(),Y("div",X_)):V("",!0),w(wo,{"no-caps":"",modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=g=>l.value=g),"active-color":"primary",class:"text-grey-7"},{default:C(()=>{var g;return[A(r).hasUpdateTasksPermission()?(P(),R(Et,{key:0,name:"task",label:"Tarea"})):V("",!0),(g=A(o).contactAddress)!=null&&g.contact?(P(),R(Et,{key:1,name:"contact",label:"Contacto"})):V("",!0),w(Et,{name:"activities",label:"Actividades"})]}),_:1},8,["modelValue"]),w(Ke),w(Vo,{modelValue:l.value,"onUpdate:modelValue":v[6]||(v[6]=g=>l.value=g),animated:""},{default:C(()=>{var g;return[A(r).hasUpdateTasksPermission()?(P(),R(Zt,{key:0,name:"task"},{default:C(()=>[O("div",J_,[w(dr,{"included-users":A(o).users,onUpdate:v[1]||(v[1]=_=>A(i)({id:A(o).id,users:_})),disable:!A(r).hasUpdateTasksPermission()},null,8,["included-users","disable"]),O("div",ey,[ty,w(en,{id:"task-start-date-select","input-props":{disable:!A(r).hasUpdateTasksPermission(),dense:!0,modelValue:A(o).startDate?A(d)(A(o).startDate):""}},{default:C(()=>[w(st,{modelValue:u.startDate,"onUpdate:modelValue":v[3]||(v[3]=_=>u.startDate=_),"parent-id":"task-start-date-select","max-width":500},{default:C(()=>[w(No,{"model-value":A(o).startDate,onConfirm:v[2]||(v[2]=_=>{var S;A(i)({id:((S=A(o))==null?void 0:S.id)||"",startDate:_}),u.startDate=!1})},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1},8,["input-props"])]),O("div",ny,[oy,w(en,{id:"task-due-date-select","input-props":{disable:!A(r).hasUpdateTasksPermission(),dense:!0,modelValue:A(o).dueDate?A(d)(A(o).dueDate):""}},{default:C(()=>[w(st,{modelValue:u.dueDate,"onUpdate:modelValue":v[5]||(v[5]=_=>u.dueDate=_),"parent-id":"task-due-date-select","max-width":500},{default:C(()=>[w(No,{"model-value":A(o).dueDate,onConfirm:v[4]||(v[4]=_=>{var S;A(i)({id:((S=A(o))==null?void 0:S.id)||"",dueDate:_}),u.dueDate=!1})},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1},8,["input-props"])])])]),_:1})):V("",!0),(g=A(o).contactAddress)!=null&&g.contact?(P(),R(Zt,{key:1,name:"contact"},{default:C(()=>{var _;return[w(Ku,{contact:(_=A(o).contactAddress)==null?void 0:_.contact,address:A(o).contactAddress},null,8,["contact","address"])]}),_:1})):V("",!0),w(Zt,{name:"activities",class:"q-pa-none"},{default:C(()=>[O("div",iy,[w(Ds,{activities:A(s),"hide-filters":""},null,8,["activities"])])]),_:1})]}),_:1},8,["modelValue"])])):V("",!0)}}),sy={class:"row no-wrap items-center"},ry={class:"text-grey-8 text-caption text-left",style:{"line-height":"16px"}},ly={class:"row items-center"},Qu=xe({__name:"BaseRule",props:{rule:{},zone:{},editable:{type:Boolean},label:{}},emits:["remove"],setup(t){const{removeZoneRule:o}=ka();return(i,r)=>(P(),Y("div",sy,[(P(),R(na(i.editable?A(be):"div"),{flat:"","no-caps":"",class:"rounded-borders q-pa-xs",style:{border:"1px solid #ccc","min-height":"0"},onClick:r[1]||(r[1]=s=>s.stopPropagation()),id:`${i.zone.id}-${i.rule.type}`},{default:C(()=>[O("div",ry,[ze(i.$slots,"label",{},()=>[O("div",ly,[O("div",null,ue(i.label),1),i.editable?(P(),R(Dn,{key:0,size:"18px","font-size":"12px","text-color":"grey-7",icon:"expand_more"})):V("",!0)])])]),i.editable?ze(i.$slots,"default",{key:0},()=>[w(st,{"parent-id":`${i.zone.id}-${i.rule.type}`},{default:C(()=>[w(Bt,{bordered:""},{default:C(()=>[w(Cn,{caption:"",class:"q-pa-sm"},{default:C(()=>[Ze("Opciones")]),_:1}),ze(i.$slots,"options"),At((P(),R(tt,{clickable:"",dense:"",onClick:r[0]||(r[0]=()=>{i.$emit("remove"),A(o)(i.zone,i.rule)}),class:"text-caption"},{default:C(()=>[w(it,{avatar:"",style:{"min-width":"0"}},{default:C(()=>[w(Ge,{color:"red",name:"close"})]),_:1}),w(it,{class:"q-pr-md text-red"},{default:C(()=>[Ze(" Remover ")]),_:1})]),_:1})),[[Yn]])]),_:3})]),_:3},8,["parent-id"])]):V("",!0)]),_:3},8,["id"]))]))}}),uy=xe({__name:"EverRule",props:{rule:{},zone:{},editable:{type:Boolean}},setup(t){const o=t;return(i,r)=>(P(),R(Qu,tn(o,{label:"Siempre"}),null,16))}}),cy=xe({__name:"WeekdaysRule",props:{rule:{},zone:{},editable:{type:Boolean}},setup(t){const o=t,i=["Lunes","Martes","Miercoles","Jueves","Viernes","S\xE1bado","Domingo"],{updateZoneRule:r}=ka();function s(d){return typeof d=="number"?i[d-1]:i[0]}const l=k(()=>o.rule.values.length===7?"Todos los d\xEDas":o.rule.values.length===0?"Ning\xFAn d\xEDa":o.rule.values.map(d=>s(d)).join(", "));function u(d){o.rule.values.includes(d)?r(o.zone,{...o.rule,values:o.rule.values.filter(f=>f!==d)}):r(o.zone,{...o.rule,values:[...o.rule.values,d].sort()})}return(d,h)=>(P(),R(Qu,tn(o,{label:l.value}),{options:C(()=>[(P(),Y(qe,null,Ue(i,(f,m)=>w(tt,{dense:"",clickable:"",key:f,class:"q-px-xs text-grey-8 text-caption",onClick:v=>u(m+1)},{default:C(()=>[w(Xi,{label:f,"model-value":o.rule.values.includes(m+1),"onUpdate:modelValue":v=>u(m+1)},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1032,["onClick"])),64)),w(Ke)]),_:1},16,["label"]))}}),dy={class:"column full-width"},hy={class:"row items-center"},fy={key:0,class:"row text-caption items-center q-gutter-x-xs bg-green text-white q-px-xs",style:{"border-radius":"8px"}},my=O("div",null,"Hoy",-1),py={class:"row q-gutter-x-xs no-wrap"},Xu=xe({__name:"ZoneListItem",props:{zone:{},editable:{type:Boolean},removable:{type:Boolean}},setup(t){const o=t;Tt();const i=[{icon:"all_inclusive",type:"ever",label:"Siempre"},{icon:"o_view_week",type:"weekdays",label:"D\xEDa de la semana"}],{updateZoneRule:r,updateZone:s}=ka(),{deleteZone:l}=Rf(),{selectedZoneId:u}=kn(),d=It(),h=k(()=>o.zone.zonePeriodicityRules.rules.map(v=>v.type)),f=k(()=>i.filter(v=>!h.value.includes(v.type)));async function m(){d.dialog({title:"Confirmar eliminaci\xF3n de zona",message:"\xBFEst\xE1 seguro de que desea eliminar esta zona? La eliminaci\xF3n ser\xE1 permanente.",cancel:{label:"Cancelar",color:"grey-8",flat:!0},ok:{label:"Confirmar",color:"red",flat:!0}}).onOk(async()=>{await l(o.zone),u.value===o.zone.id&&(u.value=null)})}return(v,g)=>(P(),Y("div",dy,[w(xo,{clickable:!1,name:v.zone.label,class:"q-pa-none"},{side:C(()=>[O("div",hy,[v.zone.isAvailableToday?(P(),Y("div",fy,[my,w(Ge,{size:"16px",name:"check"})])):V("",!0),v.removable?(P(),R(be,{key:1,flat:"",dense:"",round:"",color:"grey-7",icon:"more_vert",id:"zone-more-options-btn"},{default:C(()=>[w(Ma,{"menu-props":{parentId:"zone-more-options-btn",maximized:!0},options:[{icon:"o_delete",label:"Eliminar",name:"delete",color:"red-8",onClick:m}]},null,8,["options"])]),_:1})):V("",!0)])]),default:C(()=>[w(wi,{label:v.zone.label,editable:v.editable,"icon-size":"18px",lineHeight:"18px",onConfirm:g[0]||(g[0]=_=>A(s)({id:v.zone.id,label:_})),class:"text-weight-bold text-h6 row q-gutter-x-xs"},null,8,["label","editable"])]),_:1},8,["name"]),O("div",py,[(P(!0),Y(qe,null,Ue(v.zone.zonePeriodicityRules.rules,(_,S)=>(P(),Y("div",{key:S},[_.type==="ever"?(P(),R(uy,{key:0,editable:v.editable,zone:v.zone,rule:_},null,8,["editable","zone","rule"])):_.type==="weekdays"?(P(),R(cy,{key:1,editable:v.editable,zone:v.zone,rule:_},null,8,["editable","zone","rule"])):V("",!0)]))),128)),f.value.length>0&&v.editable?(P(),R(be,{key:0,flat:"",dense:"",icon:"add",style:{border:"1px solid #ccc","min-height":"0"},class:"q-pa-none text-grey-7",size:"11px",id:"add-zpr-btn",onClick:g[1]||(g[1]=_=>_.stopPropagation())},{default:C(()=>[w(st,{"parent-id":"add-zpr-btn"},{default:C(()=>[w(Bt,{bordered:""},{default:C(()=>[w(Cn,{class:"q-pa-sm",caption:""},{default:C(()=>[Ze(" Seleccionar regla ")]),_:1}),(P(!0),Y(qe,null,Ue(f.value,_=>At((P(),R(tt,{dense:"",clickable:"",key:_.type,class:"color-grey-8 text-caption",onClick:S=>A(r)(v.zone,{type:_.type,values:[]})},{default:C(()=>[w(it,{avatar:"",style:{"min-width":"0"}},{default:C(()=>[w(Ge,{size:"15px",name:_.icon},null,8,["name"])]),_:2},1024),w(it,null,{default:C(()=>[Ze(ue(_.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Yn],[La]])),128))]),_:1})]),_:1})]),_:1})):V("",!0)])]))}}),Ju=xe({__name:"ZoneList",props:{zones:{},hiddeAddZoneBtn:{type:Boolean},filter:{type:Function}},setup(t){const o=t,i=It();k({get:()=>i.platform.is.mobile&&Boolean(l.value),set:d=>!d&&(l.value=null)});const r=H("");Ht();const s=Tt(),{selectedZone:l}=kn(),{createZone:u}=Ff();return k(()=>o.filter?o.zones.filter(o.filter):o.zones),H([]),(d,h)=>(P(),R(Qn,{"add-btn-out":!0,filter:d.filter,elements:d.zones,"page-name":"zones","title-singular":"Zona",selected:A(l),"onUpdate:selected":h[1]||(h[1]=f=>vo(l)?l.value=f:null),search:{label:"Buscar zona",searchProps:["label"]}},$n({item:C(({item:f})=>[w(Xu,{zone:f},null,8,["zone"])]),_:2},[A(s).hasCreateZonesPermission()?{name:"add-btn",fn:C(()=>[w(Bu,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=f=>r.value=f),validate:f=>f.length>=3,style:{"z-index":"2000"}},{default:C(f=>[w(to,{autofocus:"",dense:"",borderless:"",label:"Nombre",modelValue:f.value,"onUpdate:modelValue":m=>f.value=m,rules:[m=>f.validate(m)||"Al menos 3 car\xE1cteres."]},{after:C(()=>[w(be,{flat:"",dense:"",rounded:"","no-caps":"",icon:"check",color:"primary",class:"q-px-sm bg-grey-2",onClick:Jl(()=>{A(u)({label:f.value},{onSuccess:m=>{r.value="",l.value=m,f.cancel()}})},["stop","prevent"]),disable:f.validate(f.value)===!1||f.initialValue===f.value},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:1},8,["modelValue","validate"])]),key:"0"}:void 0]),1032,["filter","elements","selected"]))}});function vy(){const t=un(["zones"]),{getLocalData:o}=Pn("zones");async function i(d){var m;const h=(m=o())==null?void 0:m.find(v=>v.polygons.some(g=>g.id===d.id));if(!h)return;const f=h.polygons.filter(v=>v.id!==d.id);t({...h,polygons:f})}const{mutate:r,isLoading:s,isError:l,error:u}=xn(i);return{deletePolygon:r,isDeletingPolygon:k(()=>s.value),isDeletingPolygonError:k(()=>l.value),deletePolygonError:k(()=>u.value)}}const gy={class:"column",style:{"line-height":"10px"}},_y={class:"row"},yy={class:"text-caption text-grey-8"},by={class:"text-caption text-grey-8"},wy={key:0,class:"row"},xy=xe({__name:"PolygonListItem",props:{name:{},polygon:{}},setup(t){const o=t,{selectedPolygon:i,isEditingPolygon:r}=kn(),{deletePolygon:s}=vy(),{createPolygon:l}=mu(),{calcBounds:u,setBounds:d}=yo();Ht();const{updatePolygon:h}=fu(),f=It(),m=k(()=>o.polygon.label||`Pol\xEDgono ${o.name}`),v=k(()=>{var F;return((F=i.value)==null?void 0:F.id)===o.polygon.id}),g=Tt();function _(){f.dialog({title:"Eliminar pol\xEDgono",message:"\xBFEst\xE1 seguro de que desea elimiar este pol\xEDgono?",cancel:{label:"Cancelar",noCaps:!0,flat:!0,color:"grey-7"},ok:{label:"Confirmar",noCaps:!0,flat:!0,color:"red"}}).onOk(()=>{s(o.polygon)})}async function S(){var ee,B;const{data:F}=await l({zone:(ee=i.value)==null?void 0:ee.zone,vertices:(B=i.value)==null?void 0:B.vertices});i.value=F}function M(){q(),r.value=!0}function q(){var F;if((F=i.value)!=null&&F.vertices){const ee=u(i.value.vertices);d(ee)}}return(F,ee)=>(P(),R(xo,{name:m.value,color:A(Ho)(F.polygon.id),clickable:!1,class:"q-pa-none full-width"},$n({default:C(()=>[O("div",gy,[w(wi,{label:m.value,input:F.polygon.label,editable:A(g).hasUpdateZonesPermission(),"icon-size":"18px",lineHeight:"18px",onConfirm:ee[0]||(ee[0]=B=>A(h)({id:F.polygon.id,label:B})),class:"text-weight-bold text-h6 row q-gutter-x-xs"},null,8,["label","input","editable"]),O("div",_y,[O("div",yy,ue(F.polygon.vertices.length)+" "+ue(F.polygon.vertices.length===1?"vertice":"vertices"),1),w(Ke,{vertical:"",inset:"",spaced:""}),O("div",by,ue(F.polygon.addresses.length)+" "+ue(F.polygon.addresses.length===1?"ubicacion":"ubicaciones"),1)])])]),_:2},[v.value?{name:"side",fn:C(()=>[A(r)?V("",!0):(P(),Y("div",wy,[A(g).hasUpdateZonesPermission()?(P(),R(be,{key:0,flat:"",round:"",dense:"","no-caps":"",class:"q-px-md",icon:"o_edit",color:"grey-7",onClick:M})):V("",!0),w(be,{flat:"",round:"",dense:"","no-caps":"",class:"q-px-md",icon:"more_vert",color:"grey-8",id:"more-options-selected-polygon-btn"},{default:C(()=>[w(Ma,{title:"Opciones","menu-props":{parentId:"more-options-selected-polygon-btn"},options:[{icon:"o_filter_center_focus",label:"Enfocar",color:"grey-9",name:"focus",onClick:q},...A(g).hasUpdateZonesPermission()?[{icon:"o_content_copy",label:"Duplicar",color:"grey-9",name:"duplicate",onClick:S},{icon:"o_delete",label:"Eliminar",color:"red",name:"delete",onClick:_}]:[]].filter(Boolean)},null,8,["options"])]),_:1})]))]),key:"0"}:void 0]),1032,["name","color"]))}}),Py={class:"row justify-end"},ky=xe({__name:"PolygonList",props:{polygons:{}},setup(t){const{selectedZone:o,selectedPolygon:i}=kn(),{createPolygon:r}=mu(),s=Tt();return(l,u)=>(P(),Y(qe,null,[l.polygons.length>0?(P(),R(Bt,{key:0},{default:C(()=>[O("div",Py,[A(o)&&A(s).hasUpdateZonesPermission()?(P(),R(be,{key:0,"no-caps":"",class:"q-mx-sm q-mt-sm",flat:"",unelevated:"",rounded:"",color:"grey-9",icon:"add",label:"Pol\xEDgono",onClick:u[0]||(u[0]=d=>A(r)({zone:A(o).id},{onSuccess:h=>{i.value=h}}))})):V("",!0)]),A(o)&&A(s).hasUpdateZonesPermission()?(P(),R(Ke,{key:0,spaced:""})):V("",!0),(P(!0),Y(qe,null,Ue(l.polygons,(d,h)=>{var f;return P(),R(tt,{key:d.id,clickable:"",class:at(["q-ma-sm",{"bg-grey-3":((f=A(i))==null?void 0:f.id)===d.id}]),style:{"border-radius":"8px"},onClick:m=>i.value=d},{default:C(()=>[w(xy,{polygon:d,name:`${h+1}`},null,8,["polygon","name"])]),_:2},1032,["class","onClick"])}),128))]),_:1})):V("",!0),l.polygons.length===0?(P(),R(tt,{key:1},{default:C(()=>[w(it,{class:"flex flex-center"},{default:C(()=>[w(Dn,{size:"80px","font-size":"52px","text-color":"grey-7",icon:"o_live_help"}),w(Cn,{class:"text-subtitle1"},{default:C(()=>[Ze(" Todav\xEDa no hay ning\xFAn pol\xEDgono creado ")]),_:1}),A(o)&&A(s).hasUpdateZonesPermission()?(P(),R(be,{key:0,unelevated:"",rounded:"",color:"primary",icon:"add",label:"Pol\xEDgono",class:"q-mt-md",onClick:u[1]||(u[1]=d=>A(r)({zone:A(o).id},{onSuccess:h=>{i.value=h}}))})):V("",!0)]),_:1})]),_:1})):V("",!0)],64))}}),Cy={key:0},Sy={key:1,class:"bg-grey-3",style:{"min-height":"16px"}},Ty={key:0,class:"column"},Ly=O("div",{class:"text-caption q-mb-sm"}," Informaci\xF3n referencial de la zona ",-1),My={key:0,style:{border:"1px solid #ccc"},class:"q-pa-sm"},Ay={class:"text-weight-medium"},By={key:0},Ey={key:1},zy={class:"column q-px-md q-py-sm"},Dy={class:"text-caption text-grey-8 q-mb-sm"},$y=xe({__name:"ZoneDetails",props:{asDialog:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},emits:["close"],setup(t){const{selectedZone:o,selectedPolygon:i}=kn(),{updateZone:r}=ka(),{getAddressById:s}=no(),{userProfile:l}=Ht(),u=Tt(),d=k(()=>{var m;return((m=o.value)==null?void 0:m.polygons.filter(v=>v.addresses.length>0))||[]}),h=H(Boolean(i.value)||!u.value.hasUpdateZonesPermission()?"polygons":"zone"),f=pm();return(m,v)=>A(o)?(P(),Y("div",Cy,[m.showHeader?(P(),R(tt,{key:0},{default:C(()=>[w(Xu,{editable:A(u).hasUpdateZonesPermission(),removable:A(u).hasDeleteZonesPermission(),zone:A(o)},null,8,["editable","removable","zone"])]),_:1})):V("",!0),m.showHeader?(P(),Y("div",Sy)):V("",!0),O("div",null,[w(wo,{"no-caps":"",modelValue:h.value,"onUpdate:modelValue":v[0]||(v[0]=g=>h.value=g),"active-color":"primary",class:"text-grey-7"},{default:C(()=>{var g,_,S;return[A(u).hasUpdateZonesPermission()?(P(),R(Et,{key:0,name:"zone",label:"Zona"})):V("",!0),(g=A(l))!=null&&g.isSuperuser?(P(),R(Et,{key:1,name:"polygons",label:`Pol\xEDgonos (${A(o).polygons.length})`},null,8,["label"])):V("",!0),A(u).hasListAddressesPermission()?(P(),R(Et,{key:2,name:"addresses",label:`Ubicaciones (${(S=(_=A(o))==null?void 0:_.polygons)==null?void 0:S.reduce((M,q)=>{var F;return M+(((F=q==null?void 0:q.addresses)==null?void 0:F.length)||0)},0)})`},null,8,["label"])):V("",!0)]}),_:1},8,["modelValue"]),w(Ke),w(Vo,{modelValue:h.value,"onUpdate:modelValue":v[4]||(v[4]=g=>h.value=g),animated:""},{default:C(()=>[A(u).hasUpdateZonesPermission()?(P(),R(Zt,{key:0,name:"zone",class:"q-gutter-y-md"},{default:C(()=>{var g,_,S,M;return[w(dr,{"included-users":A(o).users,onUpdate:v[1]||(v[1]=q=>A(r)({id:A(o).id,users:q}))},null,8,["included-users"]),w(zs,{title:"Ubicaciones adicionales",editable:(g=A(l))==null?void 0:g.isSuperuser,"included-addresses":A(o).additionalAddresses,onUpdate:v[2]||(v[2]=q=>A(r)({id:A(o).id,additionalAddresses:q}))},null,8,["editable","included-addresses"]),w(zs,{title:"Ubicaciones excluidas",editable:(_=A(l))==null?void 0:_.isSuperuser,"included-addresses":A(o).excludedAddresses,onUpdate:v[3]||(v[3]=q=>A(r)({id:A(o).id,excludedAddresses:q}))},null,8,["editable","included-addresses"]),A(o).coords?(P(),Y("div",Ty,[Ly,(M=(S=A(o))==null?void 0:S.coords)!=null&&M.raw?(P(),Y("div",My,[(P(!0),Y(qe,null,Ue(A(f)(A(o).coords.raw),q=>At((P(),Y("div",{key:q.name,class:"text-grey-9"},[O("span",Ay,ue(q.label)+": ",1),O("span",{class:at({"text-grey-7 text-caption q-mb-xs":!q.value})},ue(q.value||"No encontrado"),3)])),[[Zd,q.value]])),128))])):V("",!0)])):V("",!0)]}),_:1})):V("",!0),w(Zt,{name:"polygons",class:"q-pa-none"},{default:C(()=>[w(ky,{polygons:A(o).polygons},null,8,["polygons"])]),_:1}),A(u).hasListAddressesPermission()?(P(),R(Zt,{key:1,name:"addresses",class:"q-pa-none"},{default:C(()=>[d.value.length===0?(P(),Y("div",By,[w(Tu,null,{default:C(()=>[Ze(" No hay ubicaciones disponibles ")]),_:1})])):(P(),Y("div",Ey,[(P(!0),Y(qe,null,Ue(d.value,(g,_)=>(P(),Y("div",{key:g.id,class:"q-mb-md"},[_>0?(P(),R(Ke,{key:0,spaced:""})):V("",!0),O("div",zy,[O("div",Dy," Pol\xEDgono "+ue(_+1),1),(P(!0),Y(qe,null,Ue(g.addresses,(S,M)=>(P(),Y("div",{key:S,class:at({"q-mt-md":M>0})},[w(Ta,{address:A(s)(S),"show-actions-indices":[]},null,8,["address"])],2))),128))])]))),128))]))]),_:1})):V("",!0)]),_:1},8,["modelValue"])])])):V("",!0)}}),Oy={class:"q-my-xs q-px-sm row no-wrap"},qy=O("strong",null,"Ingresar c\xF3digo",-1),Iy=O("strong",null,"Deshacer cambios",-1),Ry=O("strong",null,"Guardar cambios",-1),Fy=xe({__name:"PolygonEditor",setup(t){const{selectedPolygon:o,isEditingPolygon:i,editingPolygonTempVertices:r,editingPolygonAction:s}=kn(),{updatePolygon:l}=fu(),{refetchZones:u}=_o(),d=k(()=>[{label:"Modificar v\xE9rtices",icon:"o_edit_location_alt",action:"edit",onClick:()=>s.value="edit"},{label:"Remover v\xE9rtices",icon:"o_wrong_location",action:"remove",onClick:()=>s.value="remove"},{label:"Mover pol\xEDgono",icon:"mode_of_travel",action:"move",onClick:()=>s.value="move"},{label:"Buscar zona",icon:"o_search",action:"select",onClick:()=>s.value="select"}]);async function h(){var f;await l({id:((f=o.value)==null?void 0:f.id)||"",vertices:r.value}),u.value(),i.value=!1}return(f,m)=>(P(),Y("div",Oy,[(P(!0),Y(qe,null,Ue(d.value,v=>(P(),R(be,{key:v.action,round:"",flat:A(s)!==v.action,unelevated:A(s)===v.action,color:A(s)===v.action?"primary":"grey-8",icon:v.icon,onClick:v.onClick},{default:C(()=>[w(Un,null,{default:C(()=>[O("strong",null,ue(v.label),1)]),_:2},1024)]),_:2},1032,["flat","unelevated","color","icon","onClick"]))),128)),w(Ke,{vertical:"",inset:"",spaced:""}),w(be,{flat:"",round:"",color:"grey-8",icon:"code"},{default:C(()=>[w(Un,null,{default:C(()=>[qy]),_:1})]),_:1}),w(Ke,{vertical:"",inset:"",spaced:""}),w(be,{flat:"",round:"",color:"grey-8",icon:"close",onClick:m[0]||(m[0]=v=>i.value=!1)},{default:C(()=>[w(Un,null,{default:C(()=>[Iy]),_:1})]),_:1}),A(o)?(P(),R(be,{key:0,flat:"",round:"",color:"grey-8",icon:"o_save",onClick:h},{default:C(()=>[w(Un,null,{default:C(()=>[Ry]),_:1})]),_:1})):V("",!0)]))}}),Ny={class:"column"},Zy={class:"row",style:{"margin-top":"-4px"}},Hy={class:"text-caption"},Vy={key:1,class:"text-caption"},Uy={class:"row items-center"},jy=O("div",{class:"text-h6 text-weight-bold q-mb-lg"}," Reestablecer contrase\xF1a ",-1),ec=xe({__name:"UserListItem",props:{user:{},editable:{type:Boolean}},setup(t){const o=t,{updateUser:i,isUpdatingUser:r}=Kd(),{resetUserPassword:s,resetUserPasswordError:l}=Qd(),u=H(!1);async function d(h){const f="x";s({id:o.user.id,password:h.password||"",confirmPassword:h.confirmPassword||"",token:f},{onSuccess:()=>{u.value=!1}})}return(h,f)=>(P(),R(xo,{clickable:!1,name:h.user.username,class:"q-pa-none full-width"},{side:C(()=>[O("div",Uy,[O("div",null,[h.user.isActive?V("",!0):(P(),R(Nt,{key:0,color:"red","text-color":"white",label:"Inactivo",class:"text-weight-bold q-py-xs"}))]),h.user.isSuperuser?(P(),R(Nt,{key:0,color:"orange","text-color":"white",label:"Admin",class:"text-weight-bold q-py-xs"})):h.editable?(P(),R(be,{key:1,flat:"",dense:"",round:"",icon:"more_vert",id:`${h.user.id}-more-options-btn`},{default:C(()=>[w(Ma,{"menu-props":{parentId:`${h.user.id}-more-options-btn`},title:"Opciones",options:[{name:"reset-pass",icon:"lock_reset",label:"Reestablecer contrase\xF1a",color:"grey-8",onClick:()=>u.value=!0},{name:"activate",icon:h.user.isActive?"toggle_off":"toggle_on",label:h.user.isActive?"Inactivar":"Activar",color:h.user.isActive?"red":"green",onClick:()=>A(i)({id:h.user.id,isActive:!h.user.isActive})}]},null,8,["menu-props","options"]),w(st,{modelValue:u.value,"onUpdate:modelValue":f[2]||(f[2]=m=>u.value=m),mode:"dialog",position:"standard",autoshow:!1,"min-width":h.$q.platform.is.mobile?void 0:400},{default:C(()=>[w(hn,{class:"my-card"},{default:C(()=>[w(ct,null,{default:C(()=>[jy,w(Fo,{onCancel:f[1]||(f[1]=m=>u.value=!1),onSubmit:d,"initial-values":{password:"",confirmPassword:""},errors:A(l),loading:A(r),fields:[{name:"password",props:{label:"Nueva contrase\xF1a"}},{name:"confirmPassword",props:{label:"Confirmar nueva contrase\xF1a"}}]},null,8,["errors","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","min-width"])]),_:1},8,["id"])):V("",!0)])]),default:C(()=>[O("div",Ny,[w(wi,{class:"text-h6 text-weight-bold q-mb-xs","icon-size":"18px",editable:h.editable,label:h.user.name||h.user.username,input:h.user.name,onConfirm:f[0]||(f[0]=m=>A(i)({id:h.user.id,name:m}))},null,8,["editable","label","input"]),O("div",Zy,[O("div",Hy,"@"+ue(h.user.username),1),h.user.email?(P(),R(Ke,{key:0,spaced:"",vertical:""})):V("",!0),h.user.email?(P(),Y("div",Vy,ue(h.user.email),1)):V("",!0)])])]),_:1},8,["name"]))}}),Wy=O("div",{class:"text-h6 text-weight-bold",style:{"line-height":"18px"}}," No es posible crear nuevos usuarios. ",-1),Yy={style:{"line-height":"16px"}},Gy=O("div",{style:{"line-height":"16px"}}," En caso de requerir modificar la cuota de usuarios, contacte con su soporte de Kind. ",-1),Ky=xe({__name:"UserForm",props:{user:{}},emits:["close"],setup(t,{emit:o}){var v,g,_;const i=t,r=o,{companyProfile:s}=nn(),{createUser:l,createUserError:u,isCreatingUser:d}=Xd(),h=dn({username:((v=i.user)==null?void 0:v.username)||"",name:((g=i.user)==null?void 0:g.name)||"",email:((_=i.user)==null?void 0:_.email)||""}),f=k(()=>{var S,M;return[{name:"Credenciales",isSection:!0},{name:"username",props:{label:"Nombre de usuario"}},{name:"password",props:{label:"Contrase\xF1a",type:"password"}},{name:"roles",fieldType:"multiselect",choices:((S=s.value)==null?void 0:S.companyRoles.map(q=>q.id))||[],choicesLabels:(M=s.value)==null?void 0:M.companyRoles.reduce((q,F)=>({...q,[F.id]:F.description}),{}),props:{label:"Roles"}},{name:"Informaci\xF3n personal",isSection:!0},{name:"name",props:{label:"Nombre"}},{name:"email",props:{label:"Email"}}]});function m(S){var M;!((M=s.value)!=null&&M.allowMoreUsers)||l(S,{onSuccess:()=>r("close")})}return(S,M)=>A(s)?(P(),R(hn,{key:0,class:"full-height column"},{default:C(()=>[(A(s).allowMoreUsers,P(),R(ct,{key:0,class:"text-h6"},{default:C(()=>[Ze(" Nuevo usuario ")]),_:1})),A(s).allowMoreUsers?(P(),R(ct,{key:1,style:{flex:"1"}},{default:C(()=>[w(Fo,{fields:f.value,"initial-values":h,errors:A(u),loading:A(d),onCancel:M[0]||(M[0]=q=>S.$emit("close")),onSubmit:m},null,8,["fields","initial-values","errors","loading"])]),_:1})):A(s)&&!A(s).allowMoreUsers?(P(),R(ct,{key:2,class:"column flex-center q-gutter-y-md"},{default:C(()=>[w(Dn,{size:"60px","font-size":"57px",color:"yellow-8","text-color":"white",icon:"info"}),Wy,O("div",Yy,[Ze(" Se ha alcanzado el l\xEDmite de "),O("strong",null,ue(A(s).maxUsers)+" "+ue(A(s).maxUsers===1?"usuario activo":"usuarios activos"),1),Ze(". Elimine o inactive usuarios existentes antes de crear nuevos. ")]),Gy,w(be,{flat:"",dense:"",rounded:"",color:"primary",label:"Aceptar",onClick:M[1]||(M[1]=q=>S.$emit("close")),class:"q-mt-md"})]),_:1})):V("",!0)]),_:1})):V("",!0)}}),Dl=xe({__name:"UserList",props:{users:{},loading:{type:Boolean},filter:{type:Function}},setup(t){const{selectedUser:o}=go(),i=Tt();return(r,s)=>(P(),R(Qn,{"add-btn":A(i).hasCreateUsersPermission(),filter:r.filter,elements:r.users,"page-name":"users","title-singular":"Usuario",loading:r.loading,selected:A(o),"onUpdate:selected":s[0]||(s[0]=l=>vo(o)?o.value=l:null),search:{label:"Buscar usuario",searchProps:["name","username","email"]},addDialogProps:{maximized:r.$q.platform.is.mobile}},{item:C(({item:l})=>[w(ec,{user:l},null,8,["user"])]),"add-btn":C(({close:l})=>[w(Ky,{onClose:l},null,8,["onClose"])]),_:1},8,["add-btn","filter","elements","loading","selected","addDialogProps"]))}}),Qy={key:1,class:"bg-grey-3",style:{"min-height":"16px"}},$l=xe({__name:"UserDetails",props:{asDialog:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},emits:["close"],setup(t){const{selectedUser:o}=go(),i=Tt(),{companyProfile:r}=nn(),s=H(i.value.hasListTasksPermission()?"tasks":i.value.hasListZonesPermission()?"zones":"sales"),{tasks:l}=bo(),u=k(()=>l.value.filter(f=>{var m,v,g;return f.users.includes(((m=o.value)==null?void 0:m.id)||"")||f.salesPoints.includes(((g=(v=o.value)==null?void 0:v.assignedSalesPoint)==null?void 0:g.id)||"")})),{zones:d}=_o(),h=k(()=>d.value.filter(f=>{var m,v,g;return f.users.includes(((m=o.value)==null?void 0:m.id)||"")||f.salesPoints.includes(((g=(v=o.value)==null?void 0:v.assignedSalesPoint)==null?void 0:g.id)||"")}));return(f,m)=>(P(),Y("div",null,[f.showHeader&&A(o)?(P(),R(tt,{key:0,class:"q-mt-sm q-mb-xs"},{default:C(()=>[w(ec,{user:A(o),editable:""},null,8,["user"])]),_:1})):V("",!0),f.showHeader?(P(),Y("div",Qy)):V("",!0),O("div",null,[w(wo,{"no-caps":"",modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=v=>s.value=v),"active-color":"primary",class:"text-grey-7"},{default:C(()=>{var v;return[A(i).hasListTasksPermission()?(P(),R(Et,{key:0,name:"tasks",label:`Tareas (${u.value.length})`},null,8,["label"])):V("",!0),w(Et,{name:"zones",label:`Zonas (${h.value.length})`},null,8,["label"]),(v=A(r))!=null&&v.enableSalesPoints?(P(),R(Et,{key:1,name:"sales",label:"Ventas"})):V("",!0)]}),_:1},8,["modelValue"]),w(Ke),w(Vo,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=v=>s.value=v),animated:""},{default:C(()=>[A(i).hasListTasksPermission()?(P(),R(Zt,{key:0,name:"tasks",class:"q-pa-none q-mt-md"},{default:C(()=>[w(hr,{tasks:u.value},null,8,["tasks"])]),_:1})):V("",!0),w(Zt,{name:"zones",class:"q-pa-none q-mt-md"},{default:C(()=>[w(Ju,{"hidde-add-zone-btn":"",zones:h.value},null,8,["zones"])]),_:1})]),_:1},8,["modelValue"])])]))}}),Xy={class:"q-my-xs q-px-sm row no-wrap"},Jy=xe({__name:"SelectZonePolygonEditor",setup(t){const{editingPolygonAction:o,editingPolygonTempVertices:i}=kn(),{companyProfile:r}=nn(),s=H("");function l(u){i.value=u.vertices.map(d=>[d[1],d[0]]),o.value="move"}return(u,d)=>(P(),Y("div",Xy,[w(en,{"input-props":{dense:!0,modelValue:"Seleccionar"},id:"select-prefab-zone"},{default:C(()=>[w(st,{fit:"","parent-id":"select-prefab-zone"},{default:C(()=>[w(Bt,{bordered:""},{default:C(()=>{var h;return[w(to,{autofocus:"",borderless:"",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=f=>s.value=f),label:"Buscar",class:"q-px-md"},null,8,["modelValue"]),w(Ke),(P(!0),Y(qe,null,Ue((h=A(r))==null?void 0:h.prefabricatedMapZones.filter(f=>s.value?f.name.toLowerCase().includes(s.value.toLowerCase()):!0),f=>At((P(),R(tt,{key:f.name,clickable:"",onClick:m=>l(f)},{default:C(()=>[w(it,null,{default:C(()=>[Ze(ue(f.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Yn],[La]])),128))]}),_:1})]),_:1})]),_:1})]))}});function Pi(t){const{addresses:o,refetchAddresses:i,isGettingAddresses:r}=no(),{selectedAddressId:s}=bn(),l=Tt(),{tasks:u,refetchTasks:d,isGettingTasks:h}=bo(),{selectedTask:f,showStatusHistory:m}=Uo(),{zones:v,refetchZones:g}=_o(),{selectedZone:_,isEditingPolygon:S,editingPolygonAction:M}=kn(),{users:q,isGettingUsers:F}=ya(),{selectedUser:ee}=go(),B=It(),z=k(()=>B.screen.width<1110),{activities:D,selectedTaskActivities:U}=Ba(),Z=k(()=>[{hidden:!l.value.hasListAddressesPermission(),name:"addresses",icon:"location_on",label:"Ubicaciones",components:[{visible:!Boolean(s.value)||!z.value,component:Av,componenProps:{loading:r.value,addresses:o.value,options:t==null?void 0:t.propsOptions}},{visible:Boolean(s.value),component:q_,componenProps:{modelValue:k({get:()=>Boolean(s.value),set:W=>!W&&(s.value=null)})}}],onClick:i.value},{hidden:!l.value.hasListTasksPermission(),name:"tasks",icon:"checklist",label:"Tareas",components:[{visible:(!Boolean(f.value)||!z.value)&&!Boolean(m.value),component:hr,componenProps:{loading:h.value,tasks:u.value,options:t==null?void 0:t.propsOptions}},{visible:Boolean(f.value)&&(!Boolean(m.value)||!z.value),component:ay,componenProps:{modelValue:k({get:()=>Boolean(f.value),set:W=>{W||(f.value=null,m.value=!1)}})},onClose(){f.value=null}},{visible:Boolean(m.value)&&Boolean(f.value),component:Ds,componenProps:{activities:U.value||[],modelValue:k({get:()=>Boolean(m.value),set:W=>!W&&(m.value=!1)})},onClose(){m.value=!1}}],onClick:d.value},{hidden:!0,name:"activities",icon:"track_changes",label:"Actividades",components:[{visible:!0,component:Ds,componenProps:{activities:D.value}}],onClick:d.value},{hidden:!l.value.hasListZonesPermission(),name:"zones",icon:"crop",label:"Zonas",components:[{visible:!(S.value||!(!Boolean(_.value)||!z.value)),component:Ju,componenProps:{zones:v.value,options:t==null?void 0:t.propsOptions}},{visible:Boolean(_.value)&&(!Boolean(S.value)||!z.value),component:$y,componenProps:{modelValue:k({get:()=>Boolean(_.value),set:W=>!W&&(_.value=null)})},onClose(){_.value=null}},{visible:Boolean(S.value),width:void 0,zIndex:1e3,component:Fy,componenProps:{}},{visible:S.value&&M.value==="select",componenProps:{},offsetsDelta:{left:-360,top:60},width:"200px",component:Jy}],onClick:g.value},{hidden:!l.value.hasListUsersPermission(),name:"users",icon:"manage_accounts",label:"Usuarios",components:[{visible:!0,component:Dl,componenProps:{users:q.value,options:t==null?void 0:t.propsOptions,loading:F.value}},{visible:Boolean(ee.value),component:$l,componenProps:{modelValue:k({get:()=>Boolean(ee.value),set:W=>!W&&(ee.value=null)})},onClose(){ee.value=null}}]},{hidden:!0,name:"groups",icon:"groups_2",label:"Grupos",components:[{visible:!0,component:Dl,componenProps:{users:q.value,options:t==null?void 0:t.propsOptions}},{visible:Boolean(ee.value),component:$l,componenProps:{modelValue:k({get:()=>Boolean(ee.value),set:W=>!W&&(ee.value=null)})},onClose(){ee.value=null}}]}].filter(W=>!W.hidden)),$=ou(),j=Hs(),ae=k({get:()=>`${$.params.page||""}`||Z.value[0].name,set:W=>j.replace({params:{page:W}})});return{selectedPageName:ae,selectedPage:k({get:()=>Z.value.find(W=>W.name===ae.value)||Z.value[0],set:W=>ae.value=W.name}),pages:Z}}const eb=xe({__name:"KMapPolyline",props:{coords:{},color:{}},setup(t){const o=t,i=k(()=>{var r;return(r=o.color)!=null&&r.startsWith("#")?o.color:aa.getPaletteColor(o.color||"primary")});return(r,s)=>r.coords?(P(),R(A(Pf),{key:0,"lat-lngs":r.coords,color:i.value},null,8,["lat-lngs","color"])):V("",!0)}});function tc(t,o){const i=q=>q*Math.PI/180;if(!t||!o)return{label:"---"};const r=t[0],s=t[1],l=o[0],u=o[1],d=6371,h=i(l-r),f=i(u-s),m=i(r),v=i(l),g=Math.sin(h/2)*Math.sin(h/2)+Math.sin(f/2)*Math.sin(f/2)*Math.cos(m)*Math.cos(v),_=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),S=Math.round((d*_+Number.EPSILON)*10)/10,M=Math.round(d*_*1e3+Number.EPSILON);return{label:S<1?`${M} metros`:`${S} Km`,unit:S<1?"metros":"Km",Km:S,metros:M}}const tb={style:{width:"100%"}},nb={key:0},ob={class:"column",style:{width:"160px","min-width":"160px","max-width":"160px","white-space":"normal"}},ib=O("br",null,null,-1),ab={key:0,class:"text-weight-bold text-body2"},sb={class:"text-weight-bold q-mr-xs"},rb={key:0,style:{"font-size":"12px",opacity:"0.8"}},lb={key:1},ub={class:"overflow-hidden",style:{"border-radius":"4px"}},cb={class:"row no-wrap items-center bg-white q-pa-xs",style:{"white-space":"normal","max-width":"300px"}},db={class:"text-grey-8 q-mr-xs",style:{"line-height":"14px","white-space":"nowrap"}},hb=xe({__name:"KMap",props:{margins:{}},setup(t){const{selectedAddressId:o,bottomDrawerSelectedAddress:i}=bn(),{map:r,isRefreshingMap:s,mapClickEvents:l}=yo(),{selectedPageName:u}=Pi(),{selectedUserId:d}=go(),h=It(),f=ou(),m=jo(),v=k(()=>f.params.page==="addresses"),{addresses:g}=no(),{getAddressTasks:_}=bn(),S=k(()=>f.params.page==="activities"),M=H([]);function q(ce){M.value.includes(ce)?M.value=M.value.filter(_e=>_e!==ce):M.value=[...M.value,ce]}function F(ce){return M.value.includes(ce)}const{filteredActivities:ee}=Ba(),B=k(()=>ee.value.filter(ce=>{var _e;return Boolean((_e=ce.coords)==null?void 0:_e.latlng)})),z=k(()=>{var Me,pe;const ce=[];let _e=null,we=[B.value[0]];for(const me of B.value){if(_e){const ge=tc((Me=me.coords)==null?void 0:Me.latlng,(pe=_e.coords)==null?void 0:pe.latlng);ge&&(ge.metros||0)<100?(ce.pop(),we.push(me)):we=[me]}_e=me,ce.push(we)}return ce}),D=k(()=>f.params.page==="tasks"),{drawCurve:U}=_m(r),Z=k(()=>f.params.page==="zones"),{selectedZoneId:$,selectedPolygon:j,isEditingPolygon:ae,editingPolygonAction:W,editingPolygonTempVertices:oe}=kn(),{zones:re}=_o(),{users:ve}=ya(),{currentPosition:Se}=Sa(),Ae=k(()=>{const ce=[];for(const _e of re.value)for(const we of _e.polygons)ce.push(we);return ce}),le=k(()=>{var ce;return((ce=g.value)==null?void 0:ce.filter(_e=>Boolean(_e.coords)).map(_e=>{const we=_(_e),Me=we.some(me=>me.currentStatus.type=="p"),pe=we.some(me=>me.currentStatus.type=="c");return{address:_e,color:Me?"orange-8":pe?"green-8":"grey-8"}}))||[]});function ie(){h.platform.is.mobile&&Se.value&&i.value&&i.value.coords&&r.value&&U(Se.value.latlng,i.value.coords.latlng)}ke(Se,ie),ke(i,ie);function Le(ce){r.value=ce,ie()}function de(ce){if(ae.value&&W.value==="edit"&&oe.value.length<3)oe.value=[...oe.value,ce.latlng];else for(const _e of Object.values(l.value))_e&&_e(ce)}return(ce,_e)=>(P(),Y("div",tb,[A(s)?V("",!0):(P(),R(Xs,{key:0,height:"100vh",margins:ce.margins,onReady:_e[1]||(_e[1]=we=>Le(we.map)),onClick:de},{default:C(({map:we})=>{var Me,pe,me;return[(P(!0),Y(qe,null,Ue(Ae.value,ge=>(P(),R(hm,{key:ge.id,"model-value":ge,map:we,onClick:Q=>{Z.value&&($.value=Q.polygon.zone,j.value=Q.polygon)},onDrag:Q=>{oe.value=A(oe).map(K=>[K[0]+Q.variation[0],K[1]+Q.variation[1]])}},null,8,["model-value","map","onClick","onDrag"]))),128)),v.value||D.value?(P(),Y("div",nb,[(P(!0),Y(qe,null,Ue(le.value,ge=>{var Q;return P(),R($o,{key:ge.address.id,coords:(Q=ge.address.coords)==null?void 0:Q.latlng,"internal-color":A(o)===ge.address.id?"black":void 0,color:ge.color,tooltip:"",onClick:()=>{u.value="addresses",o.value=ge.address.id}},{default:C(()=>{var K;return[O("div",ob,[O("span",null,[Ze(ue(ge.address.description),1),ib]),ge.address.contact?(P(),Y("span",ab,ue((K=ge.address.contact)==null?void 0:K.fullName),1)):V("",!0)])]}),_:2},1032,["coords","internal-color","color","onClick"])}),128))])):V("",!0),(P(!0),Y(qe,null,Ue((Me=A(ve))==null?void 0:Me.filter(ge=>{var Q;return Boolean((Q=ge.coords)==null?void 0:Q.latlng)}),ge=>(P(),R($o,{key:ge.id,coords:ge.coords.latlng,color:"blue",tooltip:{permanent:!0,rounded:!0,direction:"top",maxWidth:50},onClick:()=>{u.value="users",d.value=ge.id}},{default:C(()=>[w(Ge,{size:"28px",name:"person"}),w(Nt,{rounded:"",floating:"",class:"q-py-xs",color:"primary",style:{"margin-top":"-5px"}},{default:C(()=>[O("div",sb,ue(ge.name||ge.username),1),ge.coords.lastUpdate?(P(),Y("div",rb,ue(`hace ${A(ia)(new Date(ge.coords.lastUpdate),new Date)}`),1)):V("",!0)]),_:2},1024)]),_:2},1032,["coords","onClick"]))),128)),S.value?(P(),Y("div",lb,[(P(!0),Y(qe,null,Ue(z.value,ge=>(P(),R($o,{key:ge[0].id,coords:ge[0].coords.latlng,color:ge[0].color,tooltip:{permanent:!0,rounded:!1,direction:"right",maxWidth:1},onClick:_e[0]||(_e[0]=()=>{u.value="activities"})},{default:C(()=>[O("div",ub,[(P(!0),Y(qe,null,Ue(F(ge[0].id)?ge:[ge[0]],Q=>(P(),Y("div",{key:Q.id,class:"column"},[O("div",cb,[w(Nt,{color:Q.color,"text-color":"white",class:"q-px-xs",label:A(ee).length-A(ee).findIndex(K=>K.id===Q.id)},null,8,["color","label"]),w(Nt,{color:Q.color,"text-color":"white",class:"q-px-xs q-mx-xs",label:Q.label},null,8,["color","label"]),O("div",db,ue(A(m)(Q.createdAt,{distanceFrom:new Date})),1),w(Ke,{inset:"",vertical:"",class:"q-mx-xs"}),ge.length>1&&!F(ge[0].id)?(P(),R(be,{key:0,dense:"",flat:"","no-caps":"",color:"primary",style:{"line-height":"14px","white-space":"nowrap"},size:"11px",class:"text-weight-bold",onClick:K=>q(ge[0].id)},{default:C(()=>[Ze(" ver "+ue(ge.length-1)+" m\xE1s ",1)]),_:2},1032,["onClick"])):V("",!0)]),w(Ke)]))),128)),ge.length>1&&F(ge[0].id)?(P(),R(be,{key:0,dense:"",flat:"","no-caps":"",color:"primary",style:{"line-height":"14px","white-space":"nowrap"},size:"11px",class:"text-weight-bold bg-white",onClick:Q=>q(ge[0].id)},{default:C(()=>[Ze(" ver menos ")]),_:2},1032,["onClick"])):V("",!0)])]),_:2},1032,["coords","color"]))),128)),((pe=B.value)==null?void 0:pe.length)>1?(P(),R(eb,{key:0,coords:B.value.map(ge=>{var Q;return(Q=ge==null?void 0:ge.coords)==null?void 0:Q.latlng})},null,8,["coords"])):V("",!0)])):V("",!0),w($o,{coords:(me=A(Se))==null?void 0:me.latlng,color:"primary"},null,8,["coords"])]}),_:1},8,["margins"]))]))}});function Ps(t,o,i){const r=Io(t);let s,l=r.left-o.event.x,u=r.top-o.event.y,d=Math.abs(l),h=Math.abs(u);const f=o.direction;f.horizontal===!0&&f.vertical!==!0?s=l<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?s=u<0?"up":"down":f.up===!0&&u<0?(s="up",d>h&&(f.left===!0&&l<0?s="left":f.right===!0&&l>0&&(s="right"))):f.down===!0&&u>0?(s="down",d>h&&(f.left===!0&&l<0?s="left":f.right===!0&&l>0&&(s="right"))):f.left===!0&&l<0?(s="left",d<h&&(f.up===!0&&u<0?s="up":f.down===!0&&u>0&&(s="down"))):f.right===!0&&l>0&&(s="right",d<h&&(f.up===!0&&u<0?s="up":f.down===!0&&u>0&&(s="down")));let m=!1;if(s===void 0&&i===!1){if(o.event.isFirst===!0||o.event.lastDir===void 0)return{};s=o.event.lastDir,m=!0,s==="left"||s==="right"?(r.left-=l,d=0,l=0):(r.top-=u,h=0,u=0)}return{synthetic:m,payload:{evt:t,touch:o.event.mouse!==!0,mouse:o.event.mouse===!0,position:r,direction:s,isFirst:o.event.isFirst,isFinal:i===!0,duration:Date.now()-o.event.time,distance:{x:d,y:h},offset:{x:l,y:u},delta:{x:r.left-o.event.lastX,y:r.top-o.event.lastY}}}}let fb=0;var po=Fs({name:"touch-pan",beforeMount(t,{value:o,modifiers:i}){if(i.mouse!==!0&&ln.has.touch!==!0)return;function r(l,u){i.mouse===!0&&u===!0?yn(l):(i.stop===!0&&gi(l),i.prevent===!0&&qo(l))}const s={uid:"qvtp_"+fb++,handler:o,modifiers:i,direction:fa(i),noop:Zs,mouseStart(l){ma(l,s)&&Xl(l)&&(Jt(s,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),s.start(l,!0))},touchStart(l){if(ma(l,s)){const u=l.target;Jt(s,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","passiveCapture"],[u,"touchend","end","passiveCapture"]]),s.start(l)}},start(l,u){if(ln.is.firefox===!0&&Oo(t,!0),s.lastEvt=l,u===!0||i.stop===!0){if(s.direction.all!==!0&&(u!==!0||s.modifiers.mouseAllDir!==!0&&s.modifiers.mousealldir!==!0)){const f=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&qo(f),l.cancelBubble===!0&&gi(f),Object.assign(f,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[s.uid]:l.qClonedBy.concat(s.uid)}),s.initialEvent={target:l.target,event:f}}gi(l)}const{left:d,top:h}=Io(l);s.event={x:d,y:h,time:Date.now(),mouse:u===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:h}},move(l){if(s.event===void 0)return;const u=Io(l),d=u.left-s.event.x,h=u.top-s.event.y;if(d===0&&h===0)return;s.lastEvt=l;const f=s.event.mouse===!0,m=()=>{r(l,f);let _;i.preserveCursor!==!0&&i.preservecursor!==!0&&(_=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),bi(),s.styleCleanup=S=>{if(s.styleCleanup=void 0,_!==void 0&&(document.documentElement.style.cursor=_),document.body.classList.remove("non-selectable"),f===!0){const M=()=>{document.body.classList.remove("no-pointer-events--children")};S!==void 0?setTimeout(()=>{M(),S()},50):M()}else S!==void 0&&S()}};if(s.event.detected===!0){s.event.isFirst!==!0&&r(l,s.event.mouse);const{payload:_,synthetic:S}=Ps(l,s,!1);_!==void 0&&(s.handler(_)===!1?s.end(l):(s.styleCleanup===void 0&&s.event.isFirst===!0&&m(),s.event.lastX=_.position.left,s.event.lastY=_.position.top,s.event.lastDir=S===!0?void 0:_.direction,s.event.isFirst=!1));return}if(s.direction.all===!0||f===!0&&(s.modifiers.mouseAllDir===!0||s.modifiers.mousealldir===!0)){m(),s.event.detected=!0,s.move(l);return}const v=Math.abs(d),g=Math.abs(h);v!==g&&(s.direction.horizontal===!0&&v>g||s.direction.vertical===!0&&v<g||s.direction.up===!0&&v<g&&h<0||s.direction.down===!0&&v<g&&h>0||s.direction.left===!0&&v>g&&d<0||s.direction.right===!0&&v>g&&d>0?(s.event.detected=!0,s.move(l)):s.end(l,!0))},end(l,u){if(s.event!==void 0){if(zn(s,"temp"),ln.is.firefox===!0&&Oo(t,!1),u===!0)s.styleCleanup!==void 0&&s.styleCleanup(),s.event.detected!==!0&&s.initialEvent!==void 0&&s.initialEvent.target.dispatchEvent(s.initialEvent.event);else if(s.event.detected===!0){s.event.isFirst===!0&&s.handler(Ps(l===void 0?s.lastEvt:l,s).payload);const{payload:d}=Ps(l===void 0?s.lastEvt:l,s,!0),h=()=>{s.handler(d)};s.styleCleanup!==void 0?s.styleCleanup(h):h()}s.event=void 0,s.initialEvent=void 0,s.lastEvt=void 0}}};if(t.__qtouchpan=s,i.mouse===!0){const l=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Jt(s,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}ln.has.touch===!0&&Jt(s,"main",[[t,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,o){const i=t.__qtouchpan;i!==void 0&&(o.oldValue!==o.value&&(typeof value!="function"&&i.end(),i.handler=o.value),i.direction=fa(o.modifiers))},beforeUnmount(t){const o=t.__qtouchpan;o!==void 0&&(o.event!==void 0&&o.end(),zn(o,"main"),zn(o,"temp"),ln.is.firefox===!0&&Oo(t,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete t.__qtouchpan)}});const Ol=["vertical","horizontal"],ks={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ql={prevent:!0,mouse:!0,mouseAllDir:!0},Il=t=>t>=250?50:Math.ceil(t/5);var nc=_t({name:"QScrollArea",props:{...Jn,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:o,emit:i}){const r=H(!1),s=H(!1),l=H(!1),u={vertical:H(0),horizontal:H(0)},d={vertical:{ref:H(null),position:H(0),size:H(0)},horizontal:{ref:H(null),position:H(0),size:H(0)}},{proxy:h}=Pt(),f=eo(t,h.$q);let m=null,v;const g=H(null),_=k(()=>"q-scrollarea"+(f.value===!0?" q-scrollarea--dark":""));d.vertical.percentage=k(()=>{const le=d.vertical.size.value-u.vertical.value;if(le<=0)return 0;const ie=Wn(d.vertical.position.value/le,0,1);return Math.round(ie*1e4)/1e4}),d.vertical.thumbHidden=k(()=>(t.visible===null?l.value:t.visible)!==!0&&r.value===!1&&s.value===!1||d.vertical.size.value<=u.vertical.value+1),d.vertical.thumbStart=k(()=>d.vertical.percentage.value*(u.vertical.value-d.vertical.thumbSize.value)),d.vertical.thumbSize=k(()=>Math.round(Wn(u.vertical.value*u.vertical.value/d.vertical.size.value,Il(u.vertical.value),u.vertical.value))),d.vertical.style=k(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${d.vertical.thumbStart.value}px`,height:`${d.vertical.thumbSize.value}px`})),d.vertical.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(d.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),d.vertical.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(d.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),d.horizontal.percentage=k(()=>{const le=d.horizontal.size.value-u.horizontal.value;if(le<=0)return 0;const ie=Wn(Math.abs(d.horizontal.position.value)/le,0,1);return Math.round(ie*1e4)/1e4}),d.horizontal.thumbHidden=k(()=>(t.visible===null?l.value:t.visible)!==!0&&r.value===!1&&s.value===!1||d.horizontal.size.value<=u.horizontal.value+1),d.horizontal.thumbStart=k(()=>d.horizontal.percentage.value*(u.horizontal.value-d.horizontal.thumbSize.value)),d.horizontal.thumbSize=k(()=>Math.round(Wn(u.horizontal.value*u.horizontal.value/d.horizontal.size.value,Il(u.horizontal.value),u.horizontal.value))),d.horizontal.style=k(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[h.$q.lang.rtl===!0?"right":"left"]:`${d.horizontal.thumbStart.value}px`,width:`${d.horizontal.thumbSize.value}px`})),d.horizontal.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(d.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),d.horizontal.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(d.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const S=k(()=>d.vertical.thumbHidden.value===!0&&d.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle),M=[[po,le=>{Z(le,"vertical")},void 0,{vertical:!0,...ql}]],q=[[po,le=>{Z(le,"horizontal")},void 0,{horizontal:!0,...ql}]];function F(){const le={};return Ol.forEach(ie=>{const Le=d[ie];le[ie+"Position"]=Le.position.value,le[ie+"Percentage"]=Le.percentage.value,le[ie+"Size"]=Le.size.value,le[ie+"ContainerSize"]=u[ie].value}),le}const ee=Hd(()=>{const le=F();le.ref=h,i("scroll",le)},0);function B(le,ie,Le){if(Ol.includes(le)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(le==="vertical"?rl:ls)(g.value,ie,Le)}function z({height:le,width:ie}){let Le=!1;u.vertical.value!==le&&(u.vertical.value=le,Le=!0),u.horizontal.value!==ie&&(u.horizontal.value=ie,Le=!0),Le===!0&&W()}function D({position:le}){let ie=!1;d.vertical.position.value!==le.top&&(d.vertical.position.value=le.top,ie=!0),d.horizontal.position.value!==le.left&&(d.horizontal.position.value=le.left,ie=!0),ie===!0&&W()}function U({height:le,width:ie}){d.horizontal.size.value!==ie&&(d.horizontal.size.value=ie,W()),d.vertical.size.value!==le&&(d.vertical.size.value=le,W())}function Z(le,ie){const Le=d[ie];if(le.isFirst===!0){if(Le.thumbHidden.value===!0)return;v=Le.position.value,s.value=!0}else if(s.value!==!0)return;le.isFinal===!0&&(s.value=!1);const de=ks[ie],ce=u[ie].value,_e=(Le.size.value-ce)/(ce-Le.thumbSize.value),we=le.distance[de.dist],Me=v+(le.direction===de.dir?1:-1)*we*_e;oe(Me,ie)}function $(le,ie){const Le=d[ie];if(Le.thumbHidden.value!==!0){const de=le[ks[ie].offset];if(de<Le.thumbStart.value||de>Le.thumbStart.value+Le.thumbSize.value){const ce=de-Le.thumbSize.value/2;oe(ce/u[ie].value*Le.size.value,ie)}Le.ref.value!==null&&Le.ref.value.dispatchEvent(new MouseEvent(le.type,le))}}function j(le){$(le,"vertical")}function ae(le){$(le,"horizontal")}function W(){r.value=!0,m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,r.value=!1},t.delay),t.onScroll!==void 0&&ee()}function oe(le,ie){g.value[ks[ie].scroll]=le}let re=null;function ve(){re!==null&&clearTimeout(re),re=setTimeout(()=>{re=null,l.value=!0},h.$q.platform.is.ios?50:0)}function Se(){re!==null&&(clearTimeout(re),re=null),l.value=!1}let Ae=null;return ke(()=>h.$q.lang.rtl,le=>{g.value!==null&&ls(g.value,Math.abs(d.horizontal.position.value)*(le===!0?-1:1))}),Kl(()=>{Ae={top:d.vertical.position.value,left:d.horizontal.position.value}}),Ql(()=>{if(Ae===null)return;const le=g.value;le!==null&&(ls(le,Ae.left),rl(le,Ae.top))}),zt(ee.cancel),Object.assign(h,{getScrollTarget:()=>g.value,getScroll:F,getScrollPosition:()=>({top:d.vertical.position.value,left:d.horizontal.position.value}),getScrollPercentage:()=>({top:d.vertical.percentage.value,left:d.horizontal.percentage.value}),setScrollPosition:B,setScrollPercentage(le,ie,Le){B(le,ie*(d[le].size.value-u[le].value)*(le==="horizontal"&&h.$q.lang.rtl===!0?-1:1),Le)}}),()=>X("div",{class:_.value,onMouseenter:ve,onMouseleave:Se},[X("div",{ref:g,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[X("div",{class:"q-scrollarea__content absolute",style:S.value},$s(o.default,[X(oa,{debounce:0,onResize:U})])),X(eh,{axis:"both",onScroll:D})]),X(oa,{debounce:0,onResize:z}),X("div",{class:d.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:j}),X("div",{class:d.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:ae}),At(X("div",{ref:d.vertical.ref,class:d.vertical.thumbClass.value,style:d.vertical.style.value,"aria-hidden":"true"}),M),At(X("div",{ref:d.horizontal.ref,class:d.horizontal.thumbClass.value,style:d.horizontal.style.value,"aria-hidden":"true"}),q)])}});const mb=t=>(Vd("data-v-e55f5844"),t=t(),Ud(),t),pb={class:"container full-height"},vb=mb(()=>O("div",{class:"flex flex-center bg-white",style:{"z-index":"100"}},[O("div",{class:"content-header-bar"})],-1)),gb=xe({__name:"BaseBottomDrawer",props:ut({maxHeight:{},minHeight:{}},{isOpen:{default:!1,local:!0}}),emits:["update:isOpen"],setup(t){const o=t,i=wt(t,"isOpen",{local:!0}),r=H(null),s=H(0),l=H(20),u=H(0);ke([r,i],async()=>{await ft(),s.value=r.value.offsetHeight});const d=k(()=>o.minHeight+l.value-o.maxHeight),h=H(i.value?0:d.value),f=()=>h.value=d.value,m=()=>h.value=0,v=k(()=>d.value===0?h.value===0?1:0:(h.value-d.value)/(0-d.value)),g=({evt:_,...S})=>{if(!(i.value&&u.value>0)){const M=h.value-S.delta.y;-M<o.maxHeight-o.minHeight&&(h.value=Math.min(M,0))}if(!S.isFirst){if(S.isFinal){const M=o.minHeight+l.value,q=(o.maxHeight-M)/2;-h.value>q?(f(),i.value=!1):(m(),i.value=!0)}}};return ke(i,()=>{i.value?m():f()}),(_,S)=>(P(),Y("div",{class:"content",style:St([`bottom:${h.value}px`,`height:${_.maxHeight}px`])},[O("div",null,[ze(_.$slots,"top",{isOpen:i.value},void 0,!0)]),O("div",pb,[At((P(),Y("div",{ref_key:"contentHeader",ref:r,class:"content-header column"},[vb,O("div",{class:"relative-position",style:St(`top: -${v.value*240}px`)},[ze(_.$slots,"header",{isOpen:i.value},void 0,!0)],4)])),[[po,g,void 0,{prevent:!0,mouse:!0}]]),At((P(),R(nc,{class:"content-body scroll relative-position",style:St([`height:calc(${_.maxHeight}px - 15px)`,`top: -${v.value*240}px`]),onScroll:S[0]||(S[0]=M=>u.value=M.verticalPosition)},{default:C(()=>[ze(_.$slots,"body",{isOpen:i.value},void 0,!0)]),_:3},8,["style"])),[[po,g,void 0,{mouse:!0}]]),ze(_.$slots,"bottom",{},void 0,!0),w(Ke)]),ze(_.$slots,"default",{},void 0,!0)],4))}});var _b=Vs(gb,[["__scopeId","data-v-e55f5844"]]);const yb={key:0,style:{height:"200px"}},bb={style:{"flex-grow":"1","flex-basis":"0"}},wb=O("div",{class:"text-caption text-grey-8"},"Distancia aproximada",-1),xb={class:"text-h5"},Pb={class:"column"},kb=O("div",{class:"full-width bg-grey-3",style:{"min-height":"16px"}},null,-1),Cb={key:1,class:"flex flex-center q-py-lg"},Sb=O("div",{class:"q-mb-md text-h5 text-center text-weight-bold",style:{"line-height":"22px"}}," Ups... ",-1),Tb=O("div",{class:"q-mb-md text-body1 text-center text-weight-regular text-grey-8 q-px-md",style:{"line-height":"22px"}}," Parece ser que todav\xEDa no tienes ningun registro ",-1),Lb=xe({__name:"SelectedAddress",setup(t){const{bottomDrawerSelectedAddress:o}=bn(),{currentPosition:i}=Sa(),{companyProfile:r}=nn(),s=k(()=>{var l,u,d;return tc((u=(l=o.value)==null?void 0:l.coords)==null?void 0:u.latlng,(d=i.value)==null?void 0:d.latlng)});return(l,u)=>{var d,h;return A(o)?(P(),Y("div",yb,[w(ct,{class:"q-py-none q-mt-sm row items-center"},{default:C(()=>{var f,m;return[O("div",bb,[wb,O("div",xb,ue(s.value.label),1)]),O("div",Pb,[w(be,{flat:"",dense:"",rounded:"","no-caps":"",color:"primary",icon:"add",label:((m=(f=A(r))==null?void 0:f.labelReplacements)==null?void 0:m.addNewAddressBtn)||"Ubicaci\xF3n",id:"add-address-btn"},{default:C(()=>[w(st,{mode:"dialog",position:"standard","parent-id":"add-address-btn",maximized:""},{default:C(({close:v})=>[w(pa,{onClose:v},null,8,["onClose"])]),_:1})]),_:1},8,["label"])])]}),_:1}),w(ct,{class:"q-pb-md"},{default:C(()=>[w(Ta,{address:A(o),"sutitle-lines":2,"is-selected":"","fill-new-sale-btn":""},null,8,["address"])]),_:1}),w(Ke),kb,w(Ke)])):(P(),Y("div",Cb,[Sb,Tb,w(be,{rounded:"",unelevated:"",color:"primary",icon:"add",label:((h=(d=A(r))==null?void 0:d.labelReplacements)==null?void 0:h.addNewAddressBtn)||"Registrar una nueva ubicaci\xF3n",class:"q-py-sm q-mb-md"},{default:C(()=>[w(st,{mode:"dialog",position:"standard",maximized:""},{default:C(({close:f})=>[w(pa,{onClose:f},null,8,["onClose"])]),_:1})]),_:1},8,["label"])]))}}}),oc=xe({__name:"BaseDialog",props:{transitionShow:{},transitionHide:{},transitionDuration:{},modelValue:{type:Boolean},persistent:{type:Boolean},noEscDismiss:{type:Boolean},noBackdropDismiss:{type:Boolean},noRouteDismiss:{type:Boolean},autoClose:{type:Boolean},seamless:{type:Boolean},maximized:{type:Boolean},fullWidth:{type:Boolean},fullHeight:{type:Boolean},position:{},square:{type:Boolean},noRefocus:{type:Boolean},noFocus:{type:Boolean},noShake:{type:Boolean},allowFocusOutside:{type:Boolean},"onUpdate:modelValue":{},onShow:{},onBeforeShow:{},onHide:{},onBeforeHide:{},onShake:{},onEscapeKey:{},closeBtn:{type:Boolean,default:!0},bottomBar:{type:Boolean}},setup(t){const o=t;return(i,r)=>(P(),R(jl,Qt(rn(o)),{default:C(()=>[w(hn,{class:"column no-wrap",style:{"min-width":"min(420px, 60vw)"}},{default:C(()=>[i.bottomBar?V("",!0):(P(),R(ct,{key:0,class:"q-pb-none row"},{default:C(()=>[i.closeBtn?(P(),R(be,{key:0,flat:"",dense:"",round:"","no-caps":"",icon:"arrow_back",onClick:r[0]||(r[0]=s=>i.$emit("update:model-value",!1))})):V("",!0),ze(i.$slots,"bar")]),_:3})),w(ct,{class:"q-pa-none"},{default:C(()=>[ze(i.$slots,"default")]),_:3}),ze(i.$slots,"out"),i.bottomBar?(P(),R(ct,{key:1,class:"q-py-xs row absolute-bottom bg-white",style:{"border-top":"1px solid #ddd"}},{default:C(()=>[w(be,{flat:"",round:"",icon:"arrow_back",onClick:r[1]||(r[1]=s=>i.$emit("update:model-value",!1))}),ze(i.$slots,"bar")]),_:3})):V("",!0)]),_:3})]),_:3},16))}}),Mb={key:1,style:{height:"40px"}},Ab={style:{height:"230px"}},Bb={style:{"margin-bottom":"150px"}},Eb={class:"absolute-bottom bg-white",style:{"z-index":"3000"}},zb=xe({__name:"BottomDrawer",props:{isOpen:{default:!1,local:!0}},emits:["update:isOpen"],setup(t){const o=wt(t,"isOpen",{local:!0}),{pages:i,selectedPageName:r,selectedPage:s}=Pi(),{defaultMargins:l}=yo(),{selectedAddress:u,bottomDrawerSelectedAddress:d}=bn();yt(()=>{l.value={...l,bottom:280,top:60}});const h=It();function f(){var m,v,g,_;h.platform.is.mobile&&window.open(encodeURI(`geo://?q=${(v=(m=d.value)==null?void 0:m.coords)==null?void 0:v.latlng[0]},${(_=(g=d.value)==null?void 0:g.coords)==null?void 0:_.latlng[1]}`),"_system")}return(m,v)=>(P(),R(_b,{maxHeight:A(h).screen.height-130,minHeight:260,"is-open":o.value,"onUpdate:isOpen":v[2]||(v[2]=g=>o.value=g)},{top:C(()=>[A(d)?(P(),R(be,{key:0,"no-caps":"",rounded:"",dense:"",color:"white","text-color":"grey-7",icon:"o_near_me",label:"Abrir en Google Maps",class:"q-mb-sm q-mx-sm q-px-md",onClick:f})):(P(),Y("div",Mb))]),header:C(()=>[O("div",Ab,[w(Lb)])]),body:C(()=>[O("div",Bb,[w(Vo,{"keep-alive":"",modelValue:A(r),"onUpdate:modelValue":v[0]||(v[0]=g=>vo(r)?r.value=g:null),animated:""},{default:C(()=>[(P(!0),Y(qe,null,Ue(A(i),g=>(P(),R(Zt,{key:g.name,name:g.name,class:"q-pa-none"},{default:C(()=>[(P(),R(na(g.components[0].component),Qt(rn(g.components[0].componenProps)),null,16))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),bottom:C(()=>[O("div",Eb,[w(Ke),w(wo,{dense:"",modelValue:A(r),"onUpdate:modelValue":v[1]||(v[1]=g=>vo(r)?r.value=g:null),"active-class":"text-primary",class:"text-grey-8",align:"justify",breakpoint:0},{default:C(()=>[(P(!0),Y(qe,null,Ue(A(i),g=>(P(),R(Et,{class:"q-pa-none",key:g.name,"no-caps":"",name:g.name,label:g.label,icon:A(r)===g.name?g.icon:`o_${g.icon}`,onClick:g.onClick},null,8,["name","label","icon","onClick"]))),128))]),_:1},8,["modelValue"])])]),default:C(()=>[(P(!0),Y(qe,null,Ue(A(i),(g,_)=>(P(),Y("div",{key:_},[(P(!0),Y(qe,null,Ue(g.components.slice(1).filter(S=>S.visible),(S,M)=>{var q,F;return P(),R(oc,{maximized:"",key:M,"model-value":(F=(q=S.componenProps)==null?void 0:q.modelValue)==null?void 0:F.value,"onUpdate:modelValue":ee=>{var B,z;return!ee&&((z=(B=S.componenProps)==null?void 0:B.modelValue)==null?void 0:z.value)&&(S.componenProps.modelValue.value=!1)}},{default:C(()=>[(P(),R(na(S.component),Qt(rn(S.componenProps)),null,16))]),_:2},1032,["model-value","onUpdate:modelValue"])}),128))]))),128))]),_:1},8,["maxHeight","is-open"]))}}),Rl=150;var Db=_t({name:"QDrawer",inheritAttrs:!1,props:{...Os,...Jn,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Is,"onLayout","miniState"],setup(t,{slots:o,emit:i,attrs:r}){const s=Pt(),{proxy:{$q:l}}=s,u=eo(t,l),{preventBodyScroll:d}=Wd(),{registerTimeout:h,removeTimeout:f}=yi(),m=et(Fl,Kt);if(m===Kt)return console.error("QDrawer needs to be child of QLayout"),Kt;let v,g=null,_;const S=H(t.behavior==="mobile"||t.behavior!=="desktop"&&m.totalWidth.value<=t.breakpoint),M=k(()=>t.mini===!0&&S.value!==!0),q=k(()=>M.value===!0?t.miniWidth:t.width),F=H(t.showIfAbove===!0&&S.value===!1?!0:t.modelValue===!0),ee=k(()=>t.persistent!==!0&&(S.value===!0||de.value===!0));function B(ne,Te){if(Z(),ne!==!1&&m.animate(),rt(0),S.value===!0){const Ie=m.instances[Ae.value];Ie!==void 0&&Ie.belowBreakpoint===!0&&Ie.hide(!1),mt(1),m.isContainer.value!==!0&&d(!0)}else mt(0),ne!==!1&&Vt(!1);h(()=>{ne!==!1&&Vt(!0),Te!==!0&&i("show",ne)},Rl)}function z(ne,Te){$(),ne!==!1&&m.animate(),mt(0),rt(W.value*q.value),fn(),Te!==!0?h(()=>{i("hide",ne)},Rl):f()}const{show:D,hide:U}=Rs({showing:F,hideOnRouteChange:ee,handleShow:B,handleHide:z}),{addToHistory:Z,removeFromHistory:$}=jd(F,U,ee),j={belowBreakpoint:S,hide:U},ae=k(()=>t.side==="right"),W=k(()=>(l.lang.rtl===!0?-1:1)*(ae.value===!0?1:-1)),oe=H(0),re=H(!1),ve=H(!1),Se=H(q.value*W.value),Ae=k(()=>ae.value===!0?"left":"right"),le=k(()=>F.value===!0&&S.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:q.value:0),ie=k(()=>t.overlay===!0||t.miniToOverlay===!0||m.view.value.indexOf(ae.value?"R":"L")>-1||l.platform.is.ios===!0&&m.isContainer.value===!0),Le=k(()=>t.overlay===!1&&F.value===!0&&S.value===!1),de=k(()=>t.overlay===!0&&F.value===!0&&S.value===!1),ce=k(()=>"fullscreen q-drawer__backdrop"+(F.value===!1&&re.value===!1?" hidden":"")),_e=k(()=>({backgroundColor:`rgba(0,0,0,${oe.value*.4})`})),we=k(()=>ae.value===!0?m.rows.value.top[2]==="r":m.rows.value.top[0]==="l"),Me=k(()=>ae.value===!0?m.rows.value.bottom[2]==="r":m.rows.value.bottom[0]==="l"),pe=k(()=>{const ne={};return m.header.space===!0&&we.value===!1&&(ie.value===!0?ne.top=`${m.header.offset}px`:m.header.space===!0&&(ne.top=`${m.header.size}px`)),m.footer.space===!0&&Me.value===!1&&(ie.value===!0?ne.bottom=`${m.footer.offset}px`:m.footer.space===!0&&(ne.bottom=`${m.footer.size}px`)),ne}),me=k(()=>{const ne={width:`${q.value}px`,transform:`translateX(${Se.value}px)`};return S.value===!0?ne:Object.assign(ne,pe.value)}),ge=k(()=>"q-drawer__content fit "+(m.isContainer.value!==!0?"scroll":"overflow-auto")),Q=k(()=>`q-drawer q-drawer--${t.side}`+(ve.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(u.value===!0?" q-drawer--dark q-dark":"")+(re.value===!0?" no-transition":F.value===!0?"":" q-layout--prevent-focus")+(S.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${M.value===!0?"mini":"standard"}`+(ie.value===!0||Le.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(we.value===!0?" q-drawer--top-padding":""))),K=k(()=>{const ne=l.lang.rtl===!0?t.side:Ae.value;return[[po,pt,void 0,{[ne]:!0,mouse:!0}]]}),Ee=k(()=>{const ne=l.lang.rtl===!0?Ae.value:t.side;return[[po,jt,void 0,{[ne]:!0,mouse:!0}]]}),De=k(()=>{const ne=l.lang.rtl===!0?Ae.value:t.side;return[[po,jt,void 0,{[ne]:!0,mouse:!0,mouseAllDir:!0}]]});function Ne(){he(S,t.behavior==="mobile"||t.behavior!=="desktop"&&m.totalWidth.value<=t.breakpoint)}ke(S,ne=>{ne===!0?(v=F.value,F.value===!0&&U(!1)):t.overlay===!1&&t.behavior!=="mobile"&&v!==!1&&(F.value===!0?(rt(0),mt(0),fn()):D(!1))}),ke(()=>t.side,(ne,Te)=>{m.instances[Te]===j&&(m.instances[Te]=void 0,m[Te].space=!1,m[Te].offset=0),m.instances[ne]=j,m[ne].size=q.value,m[ne].space=Le.value,m[ne].offset=le.value}),ke(m.totalWidth,()=>{(m.isContainer.value===!0||document.qScrollPrevented!==!0)&&Ne()}),ke(()=>t.behavior+t.breakpoint,Ne),ke(m.isContainer,ne=>{F.value===!0&&d(ne!==!0),ne===!0&&Ne()}),ke(m.scrollbarWidth,()=>{rt(F.value===!0?0:void 0)}),ke(le,ne=>{kt("offset",ne)}),ke(Le,ne=>{i("onLayout",ne),kt("space",ne)}),ke(ae,()=>{rt()}),ke(q,ne=>{rt(),Ce(t.miniToOverlay,ne)}),ke(()=>t.miniToOverlay,ne=>{Ce(ne,q.value)}),ke(()=>l.lang.rtl,()=>{rt()}),ke(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(Ut(),m.animate())}),ke(M,ne=>{i("miniState",ne)});function rt(ne){ne===void 0?ft(()=>{ne=F.value===!0?0:q.value,rt(W.value*ne)}):(m.isContainer.value===!0&&ae.value===!0&&(S.value===!0||Math.abs(ne)===q.value)&&(ne+=W.value*m.scrollbarWidth.value),Se.value=ne)}function mt(ne){oe.value=ne}function Vt(ne){const Te=ne===!0?"remove":m.isContainer.value!==!0?"add":"";Te!==""&&document.body.classList[Te]("q-body--drawer-toggle")}function Ut(){g!==null&&clearTimeout(g),s.proxy&&s.proxy.$el&&s.proxy.$el.classList.add("q-drawer--mini-animate"),ve.value=!0,g=setTimeout(()=>{g=null,ve.value=!1,s&&s.proxy&&s.proxy.$el&&s.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function pt(ne){if(F.value!==!1)return;const Te=q.value,Ie=Wn(ne.distance.x,0,Te);if(ne.isFinal===!0){Ie>=Math.min(75,Te)===!0?D():(m.animate(),mt(0),rt(W.value*Te)),re.value=!1;return}rt((l.lang.rtl===!0?ae.value!==!0:ae.value)?Math.max(Te-Ie,0):Math.min(0,Ie-Te)),mt(Wn(Ie/Te,0,1)),ne.isFirst===!0&&(re.value=!0)}function jt(ne){if(F.value!==!0)return;const Te=q.value,Ie=ne.direction===t.side,Re=(l.lang.rtl===!0?Ie!==!0:Ie)?Wn(ne.distance.x,0,Te):0;if(ne.isFinal===!0){Math.abs(Re)<Math.min(75,Te)===!0?(m.animate(),mt(1),rt(0)):U(),re.value=!1;return}rt(W.value*Re),mt(Wn(1-Re/Te,0,1)),ne.isFirst===!0&&(re.value=!0)}function fn(){d(!1),Vt(!0)}function kt(ne,Te){m.update(t.side,ne,Te)}function he(ne,Te){ne.value!==Te&&(ne.value=Te)}function Ce(ne,Te){kt("size",ne===!0?t.miniWidth:Te)}return m.instances[t.side]=j,Ce(t.miniToOverlay,q.value),kt("space",Le.value),kt("offset",le.value),t.showIfAbove===!0&&t.modelValue!==!0&&F.value===!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),yt(()=>{i("onLayout",Le.value),i("miniState",M.value),v=t.showIfAbove===!0;const ne=()=>{(F.value===!0?B:z)(!1,!0)};if(m.totalWidth.value!==0){ft(ne);return}_=ke(m.totalWidth,()=>{_(),_=void 0,F.value===!1&&t.showIfAbove===!0&&S.value===!1?D(!1):ne()})}),zt(()=>{_!==void 0&&_(),g!==null&&(clearTimeout(g),g=null),F.value===!0&&fn(),m.instances[t.side]===j&&(m.instances[t.side]=void 0,kt("size",0),kt("offset",0),kt("space",!1))}),()=>{const ne=[];S.value===!0&&(t.noSwipeOpen===!1&&ne.push(At(X("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),K.value)),ne.push(Ss("div",{ref:"backdrop",class:ce.value,style:_e.value,"aria-hidden":"true",onClick:U},void 0,"backdrop",t.noSwipeBackdrop!==!0&&F.value===!0,()=>De.value)));const Te=M.value===!0&&o.mini!==void 0,Ie=[X("div",{...r,key:""+Te,class:[ge.value,r.class]},Te===!0?o.mini():Dt(o.default))];return t.elevated===!0&&F.value===!0&&Ie.push(X("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),ne.push(Ss("aside",{ref:"content",class:Q.value,style:me.value},Ie,"contentclose",t.noSwipeClose!==!0&&S.value===!0,()=>Ee.value)),X("div",{class:"q-drawer-container"},ne)}}});const $b=xe({__name:"DenseSidebar",props:ut({items:{}},{selectedItem:{local:!0,default:""}}),emits:["update:selectedItem"],setup(t){const o=wt(t,"selectedItem",{local:!0});return(i,r)=>(P(),R(Db,{bordered:"","model-value":!0,"show-if-above":"",mini:!1,breakpoint:10,width:46,class:"bg-white"},{default:C(()=>[w(nc,{class:"fit"},{default:C(()=>[w(Bt,{padding:"",class:"q-gutter-y-xs column no-wrap",style:{height:"100vh"}},{default:C(()=>[(P(!0),Y(qe,null,Ue(i.items,s=>(P(),Y("div",{key:s.name,style:St(s.isSpacing?"flex-grow: 1":"")},[s.isSeparator?(P(),R(Ke,{key:0,inset:"",spaced:"",style:{background:"#999"}})):s.isSpacing?V("",!0):(P(),R(be,{key:1,flat:o.value!==s.name,dense:"",size:"12px",class:at(["q-mx-xs q-pa-sm",s.name===o.value?"bg-primary text-white":"text-grey-7"]),style:{"border-radius":"10px"},icon:o.value===s.name?s.selectedIcon||s.icon:`o_${s.icon}`,onClick:l=>o.value=s.name},{default:C(()=>[s.label?(P(),R(Un,{key:0,anchor:"center right",self:"center left",offset:[1,10]},{default:C(()=>[Ze(ue(s.label),1)]),_:2},1024)):V("",!0)]),_:2},1032,["flat","class","icon","onClick"]))],4))),128))]),_:1})]),_:1})]),_:1}))}});const Ob=xe({__name:"MapFloatingMenu",props:{offsets:{},contentBgColor:{default:"transparent"},width:{default:"350px"},zIndex:{}},setup(t){const o=t,i=dn({leftPx:k(()=>{var r,s;return((r=o.offsets)==null?void 0:r.left)&&`${(s=o.offsets)==null?void 0:s.left}px`}),topPx:k(()=>{var r,s;return((r=o.offsets)==null?void 0:r.top)&&`${(s=o.offsets)==null?void 0:s.top}px`}),rightPx:k(()=>{var r,s;return((r=o.offsets)==null?void 0:r.right)&&`${(s=o.offsets)==null?void 0:s.right}px`}),bottomPx:k(()=>{var r,s;return((r=o.offsets)==null?void 0:r.bottom)&&`${(s=o.offsets)==null?void 0:s.bottom}px`})});return(r,s)=>(P(),Y("div",{class:"main-container scroll",style:St([`left: ${i.leftPx}`,`padding-top: ${i.topPx}`,`right: ${i.rightPx}`,`padding-bottom: ${i.bottomPx}`,"padding-right: 2px","padding-left: 2px",`width: ${r.width}`,`z-index: ${r.zIndex||500}`])},[O("div",{class:at(["inner-container",`bg-${r.contentBgColor}`])},[ze(r.$slots,"default",{},void 0,!0)],2)],4))}});var ic=Vs(Ob,[["__scopeId","data-v-2c1df0b2"]]);const qb={key:0},Ib=xe({__name:"IndexSideBar",setup(t){const{pages:o,selectedPage:i,selectedPageName:r}=Pi({propsOptions:{hideActions:!0}}),{defaultMargins:s}=yo(),l=k(()=>{var u,d;return((u=i.value.components[0])!=null&&u.visible?400:0)+((d=i.value.components[1])!=null&&d.visible?400:0)});return ke(l,()=>{s.value={...s,left:l.value,top:60}},{immediate:!0}),(u,d)=>(P(),Y(qe,null,[w($b,{"selected-item":A(r),"onUpdate:selectedItem":d[0]||(d[0]=h=>vo(r)?r.value=h:null),items:A(o)},null,8,["selected-item","items"]),(P(!0),Y(qe,null,Ue(A(i).components,(h,f)=>{var m,v;return P(),Y("div",{key:f},[h.visible?(P(),R(ic,{key:0,width:h.width,contentBgColor:"white","z-index":"zIndex"in h?`${h.zIndex}`:void 0,offsets:{left:12+A(i).components.slice(0,f).filter(g=>g.visible).length*360+("offsetsDelta"in h&&((m=h.offsetsDelta)==null?void 0:m.left)||0),top:12+("offsetsDelta"in h&&((v=h.offsetsDelta)==null?void 0:v.top)||0),bottom:12}},{default:C(()=>{var g;return[O("div",{class:at(["column",{"q-mt-md":f===0}])},[(g=h.componenProps)!=null&&g.modelValue?(P(),Y("div",qb,[w(be,{flat:"",dense:"",size:"12px",color:"grey-8",icon:"arrow_back",label:"Cerrar",class:"q-pa-md",onClick:_=>h.componenProps.modelValue.value=!1},null,8,["onClick"]),w(Ke)])):V("",!0),(P(),R(na(h.component),Qt(rn(h.componenProps)),null,16))],2)]}),_:2},1032,["width","z-index","offsets"])):V("",!0)])}),128))],64))}}),Rb={class:"text-h6"},Fb={class:"text-subtitle1"},Nb={class:"text-caption"},Zb=xe({__name:"UserProfile",setup(t){const{userProfile:o}=Ht(),{companyProfile:i}=nn(),r=Hs(),s=va();function l(){localStorage.removeItem("access"),localStorage.clear(),s.clear(),r.replace({name:"Login"})}return(u,d)=>A(i)&&A(o)?(P(),R(hn,{key:0,style:{"min-width":"260px"}},{default:C(()=>[w(ct,{class:"column flex-center"},{default:C(()=>{var h;return[w(Dn,{size:"80px","font-size":"42px",color:A(Ho)(A(i).id),"text-color":"white",class:"q-mb-md"},{default:C(()=>[Ze(ue(A(ir)(A(i).name)),1)]),_:1},8,["color"]),O("div",Rb,ue((h=A(i))==null?void 0:h.name),1),O("div",Fb,[Ze(ue(A(o).name)+" ",1),A(o).isSuperuser?(P(),R(Nt,{key:0,color:"orange","text-color":"white",label:"Admin",class:"q-py-xs"})):V("",!0)]),O("div",Nb,"@"+ue(A(o).username),1)]}),_:1}),w(ct,{class:"flex flex-center"},{default:C(()=>[w(be,{unelevated:"",rounded:"",color:"red",icon:"logout",label:"Cerrar sesi\xF3n",onClick:l})]),_:1})]),_:1})):V("",!0)}}),Hb=O("div",{class:"q-mb-md text-h6"}," Establecer nueva contrase\xF1a ",-1),Vb=xe({__name:"NotificationList",setup(t){const{getUserById:o}=go(),{userProfile:i}=Ht(),{companyProfile:r,refetchCompanyProfile:s}=nn(),{confirmAdminPasswordRequest:l,isConfirmingAdminPasswordRequest:u}=Jd(),d=H(!1),h=[{name:"password",props:{label:"Nueva contrase\xF1a",type:"password",required:!0}},{name:"confirmPassword",props:{label:"Confirmar nueva contrase\xF1a",type:"password",required:!0}}];async function f(m,v){if(!m.password||!m.confirmPassword)return;const g="x";l({password:m.password,confirmPassword:m.confirmPassword,id:v.user,token:g},{onSuccess(){d.value=!1,s.value()}})}return(m,v)=>A(r)&&A(i)?(P(),R(hn,{key:0,style:{"min-width":"220px","max-width":"240px"}},{default:C(()=>[w(ct,{class:"column flex-center q-pa-none"},{default:C(()=>[w(Bt,{separator:""},{default:C(()=>[(P(!0),Y(qe,null,Ue(A(r).temporalPasswordRequests,g=>(P(),R(tt,{key:g.id},{default:C(()=>[w(it,{class:"column q-gutter-sm"},{default:C(()=>{var _;return[O("div",null,[O("strong",null,ue((_=A(o)(g.user))==null?void 0:_.name),1),Ze(" ha solicitado un cambio de contrase\xF1a. ")]),O("div",null,[w(be,{dense:"","no-caps":"",size:"14px",flat:"",color:"primary",label:"Establecer nueva contrase\xF1a",id:`action-${g.id}`},{default:C(()=>[w(st,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=S=>d.value=S),"parent-id":`action-${g.id}`,position:"standard",mode:"dialog"},{default:C(()=>[w(hn,{style:{"min-width":"220px"}},{default:C(()=>[w(ct,null,{default:C(()=>[Hb,w(Fo,{"initial-values":{password:"",confirmPassword:""},fields:h,validations:["return data.password === data.confirmPassword || 'Las contrase\xF1as no coinciden'"],onSubmit:S=>f(S,g),loading:A(u)},null,8,["validations","onSubmit","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","parent-id"])]),_:2},1032,["id"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):V("",!0)}}),Ub={class:"row q-gutter-x-sm"},jb=xe({__name:"ProfileFloatingMenu",setup(t){const{userProfile:o}=Ht(),{companyProfile:i}=nn(),{setFullBounds:r}=yo(),s=k(()=>o.value?Ho(o.value.id):"white");return(l,u)=>(P(),R(ic,{width:l.$q.platform.is.mobile?"220px":"320px",contentBgColor:"white",offsets:{right:12,top:12,bottom:12}},{default:C(()=>[w(hn,null,{default:C(()=>[w(ct,{class:"q-pa-sm row justify-between items-center"},{default:C(()=>{var d,h;return[O("div",null,[w(be,{rounded:"",unelevated:"",dense:"","no-caps":"",color:"grey-3","text-color":"grey-9",label:"Centrar mapa",class:"q-px-md",onClick:u[0]||(u[0]=f=>A(r)())})]),O("div",Ub,[A(o)&&(((h=(d=A(i))==null?void 0:d.temporalPasswordRequests)==null?void 0:h.length)||0)>0?(P(),R(be,{key:0,dense:"",flat:"",round:"",id:"notifications-btn",class:"q-mr-sm"},{default:C(()=>[w(Dn,{size:"34px","font-size":"14px",color:"white","text-color":"grey-8",icon:"notifications"},{default:C(()=>[w(Nt,{color:"red",floating:"",rounded:"",class:"text-weight-bold"},{default:C(()=>{var f,m;return[Ze(ue((m=(f=A(i))==null?void 0:f.temporalPasswordRequests)==null?void 0:m.length),1)]}),_:1})]),_:1}),w(st,{"parent-id":"notifications-btn",position:"bottom",maximized:""},{default:C(()=>[w(Vb)]),_:1})]),_:1})):V("",!0),A(o)?(P(),R(be,{key:1,dense:"",flat:"",round:"",id:"user-profile-btn"},{default:C(()=>[w(Dn,{size:"34px","font-size":"14px",color:s.value,"text-color":"white"},{default:C(()=>[Ze(ue(A(ir)(A(o).name||A(o).username)),1)]),_:1},8,["color"]),w(st,{"parent-id":"user-profile-btn",position:"bottom",maximized:""},{default:C(()=>[w(Zb)]),_:1})]),_:1})):V("",!0)])]}),_:1})]),_:1})]),_:1},8,["width"]))}}),Wb={class:"q-pa-md"},Yb=xe({__name:"FormsManagerDialog",setup(t){const o=H({});return(i,r)=>(P(!0),Y(qe,null,Ue(A(pi),s=>(P(),R(oc,{key:s.id,modelValue:s.isOpened,"onUpdate:modelValue":[l=>s.isOpened=l,l=>{s.isOpened=l,l||s.onCancel&&s.onCancel()}],"close-btn":!1,class:"q-pa-md"},{default:C(()=>[O("div",Wb,[s.form?(P(),R(Fo,{key:0,fields:s.form.fields,validations:s.form.validations,onChange:r[0]||(r[0]=(l,u)=>o.value[l]=u),onCancel:()=>{s.onCancel&&s.onCancel(),s.isOpened=!1},onSubmit:l=>{s.onConfirm&&s.onConfirm(l),s.isOpened=!1}},null,8,["fields","validations","onCancel","onSubmit"])):V("",!0)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))}}),Gb={key:0},Kb=xe({__name:"IndexPage",setup(t){const o=It(),i=Hs(),{selectedPage:r}=Pi(),{addressesHasFetchedOnce:s}=no(),{zonesHasFetchedOnce:l}=_o(),{setFullBounds:u}=yo(),{userProfile:d}=Ht();ke(d,async()=>{var m;(m=d.value)!=null&&m.requiredChangePassword&&(await ft(),setTimeout(()=>i.replace({name:"ResetPassword"}),500))},{immediate:!0}),yt(async()=>{});const h=k(()=>({bottom:335})),f=H(!1);return ke([s,l],()=>s.value&&l.value&&u()),yt(()=>{localStorage.getItem("access")||(localStorage.clear(),i.replace({name:"Login"}))}),(m,v)=>A(d)?A(r)?(P(),R(Xh,{key:1,class:"row items-center justify-evenly"},{default:C(()=>[w(hb,{margins:h.value},null,8,["margins"]),A(o).platform.is.mobile?(P(),R(zb,{key:0,"is-open":f.value,"onUpdate:isOpen":v[0]||(v[0]=g=>f.value=g)},null,8,["is-open"])):(P(),R(Ib,{key:1})),w(jb),w(Yb)]),_:1})):(P(),R(th,{key:2,"btn-label":"Cerrar sesi\xF3n","btn-url":"login/"})):(P(),Y("div",Gb))}});var n0=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"}));export{n0 as I,yu as W};
